(function(e){function t(t){for(var i,s,r=t[0],c=t[1],l=t[2],h=0,d=[];h<r.length;h++)s=r[h],a[s]&&d.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={"double-teachers":0},o=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;o.push([1,"chunk-vendors","chunk-common"]),n()})({"0d73":function(e,t,n){},1:function(e,t,n){e.exports=n("42bd")},"21b4":function(e,t,n){"use strict";var i=n("0d73"),a=n.n(i);a.a},"235e":function(e,t,n){"use strict";var i=n("a7bf"),a=n.n(i);a.a},"42bd":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i,a,o,s,r,c,l,u,h=n("2b0e"),d=n("77ed"),p=n.n(d),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Room",{ref:"room"}),n("splash",{staticClass:"splash"}),n("alert",{staticClass:"alert"}),n("GroupChat",{staticClass:"group-chat"})],1)},f=[],b=(n("28a5"),n("c5f6"),n("a481"),n("4917"),n("f499")),_=n.n(b),v=n("5d73"),g=n.n(v),w=n("e814"),C=n.n(w),y=(n("96cf"),n("3b8d")),T=n("0a0d"),k=n.n(T),x=(n("7f7f"),n("cebc")),E=n("2f62"),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"room-container",style:{width:e.page.width+"px",height:e.page.height+"px",zoom:e.page.ratio}},[n("Header",{attrs:{isTeacher:e.isTeacher},on:{initRoom:e.initRoom,onlineChange:e.onlineChange}}),n("div",{staticClass:"content"},[e.user.id?[e.isAdmin?n("video-admin",{ref:"videoplay",staticClass:"left",attrs:{classId:e.room.roomId,appToken:e.user.appToken,token:e.user.token,userType:e.user.type,stuInfo:e.student}}):n("Video",{ref:"video",staticClass:"left",attrs:{classId:e.room.roomId,appToken:e.user.appToken,token:e.user.token,userType:e.user.type,stuInfo:e.student}})]:e._e(),n("div",{staticClass:"right"},[n("div",{staticClass:"course-area",style:{width:e.paint.width+"px",height:e.paint.height+"px"}},[n("div",{ref:"coursepanel",staticClass:"fill"},[n("courseware",{ref:"course",staticClass:"fill"},[n("img",{staticClass:"fill",attrs:{slot:"loading",src:e.bgMask},slot:"loading"})]),n("Painter",{attrs:{type:"local",enable:e.paintEnable,emitEnable:!0,receiveEnable:!1,width:e.paint.width,height:e.paint.height,ratio:e.page.ratio,lineWidth:e.paint.lineWidth,lineColor:e.paint.lineColor},on:{beginPaint:e.beginPaint,painting:e.painting}}),n("Painter",{attrs:{type:"remote",enable:!1,receiveEnable:!0,width:e.paint.width,height:e.paint.height,ratio:e.page.ratio}}),n("TextBox",{attrs:{enable:e.writeEnable,width:e.paint.width,height:e.paint.height,ratio:e.page.ratio,fontSize:e.paint.fontSize,color:e.paint.lineColor},on:{beginWrite:e.beginWrite,writing:e.writing}}),n("BaseButton",{staticClass:"screen stage-screen",attrs:{icon:"uu-upstage"},on:{change:e.stageChange}})],1),e.isAdmin?n("div",{staticClass:"fill"}):e._e(),n("EncourageAnimation",{staticClass:"encourage-animation"}),n("Encourage",{directives:[{name:"show",rawName:"v-show",value:e.paint.animateEnable,expression:"paint.animateEnable"}],staticClass:"encourage-container",on:{encourage:e.encourage}}),n("bubble-window",{staticClass:"bubble-tip"}),n("socket-status")],1),n("Footer",[n("course-page-picker",{staticClass:"page-picker",attrs:{slot:"pagePicker"},on:{change:e.pageChangeHandler},slot:"pagePicker"})],1)],1),e.isAdmin?n("UserOnlineList",{ref:"userList",staticClass:"user-list",attrs:{list:e.onlineList}}):e._e()],2)],1)},$=[],O=(n("ac6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-container"},[n("img",{staticClass:"logo",attrs:{src:"juren"==e.room.group_name?e.logojuren:e.logo,alt:"logo"}}),n("ul",{staticClass:"tool-bar"},[n("li",{staticClass:"course-num-item"},[n("div",[e._v(e._s(e.$t("room_course_num"))+"："+e._s(e.room.courseNum))])]),n("li",{staticClass:"clock-item"},[e._v("\n      "+e._s(e.$t("room_course_duration",{courseDuration:e.courseDuration}))+"\n      "),n("Clock",{staticClass:"clock"})],1),e.room.supported?e._e():n("li",{staticClass:"browser"},[n("img",{attrs:{src:e.browserAlert},on:{click:e.browserAlertHandler}})]),n("li",{staticClass:"item",on:{click:function(t){e.user.type!=e.Global.UserType.ADMIN?e.notice():e.onlineHandler()}}},[n("icon-font",{staticClass:"icon-font",attrs:{icon:"uu-notice"}})],1),e.user.type!=e.Global.UserType.ADMIN?n("li",{staticClass:"item",on:{click:e.videoSetter}},[n("icon-font",{staticClass:"icon-font",attrs:{icon:"uu-setting"}})],1):e._e(),e.user.type!=e.Global.UserType.ADMIN?n("li",{staticClass:"item",on:{click:e.itHelpHandler}},[n("icon-font",{staticClass:"icon-font",attrs:{icon:"uu-mic"}})],1):e._e(),n("li",{staticClass:"item",on:{click:e.refreshClick}},[n("icon-font",{staticClass:"icon-font",attrs:{icon:"uu-reflesh"}})],1),n("li",{staticClass:"item",on:{click:function(t){e.isTeacher?e.exitClick():e.stuExitClick()}}},[n("icon-font",{staticClass:"icon-font",attrs:{icon:"uu-exit"}})],1)])])}),A=[],j=n("23ea"),I=n("a1d8"),U=n.n(I),N=n("38e7"),D=n.n(N),R=n("479b"),P=n.n(R),G=n("5118"),V=n("d225"),L=function e(t){Object(V["a"])(this,e);var n=t?"//kefu.easemob.com/webim/en-US/easemob.js":"//kefu.easemob.com/webim/easemob.js",i=document.createElement("script");i.setAttribute("src",n),i.defer=!0,setTimeout(function(){document.querySelector("body").appendChild(i)},1e3)},M=L,H={name:"Header",components:{},props:["isTeacher"],data:function(){return{num:0,logo:U.a,logojuren:D.a,browserAlert:P.a}},computed:Object(x["a"])({},Object(E["c"])("room",{room:function(e){return e}}),Object(E["c"])("user",{user:function(e){return e}}),Object(E["c"])("teacher",{teacher:function(e){return e}}),Object(E["c"])("config",{config:function(e){return e}}),{courseDuration:function(){var e=this.room,t=e.startTime,n=e.endTime,i=C()((n-t)/60);return i}}),methods:Object(x["a"])({},Object(E["b"])("user",["addUser"]),Object(E["b"])("room",["setRoom","endTheClass"]),{refreshClick:function(){var e=this;this.alert.show({icon:"refresh",title:this.$t("alert_title_refresh_classroom"),text:this.$t("alert_text_refresh_classroom"),label:this.$t("button_label"),cancellabel:this.$t("button_cancel_label")},function(){e.$sensor.emit("fresh"),Object(G["setTimeout"])(function(){window.location.reload()})})},exitClick:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$clock.startTimeDifference<0?this.alert.show({icon:"exit",title:"LEAVE CLASSROOM",text:"Please remember to come back when the class begins.",label:"exit",cancellabel:"cancel"},Object(y["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:j["a"].save(j["a"].EXIT,"退出"),n.endTheClass().then(function(e){window.location.href=e});case 2:case"end":return e.stop()}},e,this)}))):this.alert.show({icon:"exit",title:this.$t("alert_title_leave_classroom"),text:this.$t("alert_text_leave_classroom"),label:this.$t("button_leave_label"),cancellabel:this.$t("button_cancel_label")},Object(y["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:j["a"].save(j["a"].EXIT,"退出"),n.endTheClass(!0).then(function(e){t.isTeacher&&t.$socket.broadcast("complete",{user:null,list:[],url:e}),e&&(window.location.href=e)});case 2:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),stuExitClick:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.alert.show({icon:"exit",title:this.$t("alert_title_leave_classroom"),text:this.$t("alert_text_leave_classroom"),label:this.$t("button_leave_label"),cancellabel:this.$t("button_cancel_label")},Object(y["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:j["a"].save(j["a"].EXIT,"退出"),t.endTheClass().then(function(e){window.location.href=e});case 2:case"end":return e.stop()}},e,this)})));case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),videoSetter:function(){this.alert.videoSetter({title:this.$t("video_setter_title"),label:this.$t("video_setter_label"),cancellabel:this.$t("button_cancel_label")})},notice:function(){var e={studentNote:this.room.studentNote,teacherNote:this.room.teacherNote,coursewareName:this.room.coursewareName,teacherName:this.teacher.name};this.alert.showHtml({html:this.$t("classnote",e),timer:5e3})},onlineHandler:function(){this.$emit("onlineChange",!0)},itHelpHandler:function(){easemobim.bind?easemobim.bind({configId:this.isTeacher?this.config.im.tid:this.config.im.sid}):console.warn("Waiting for easemob.js loading to completed!")},browserAlertHandler:function(){var e=this;this.alert.show({icon:"exit",text:this.$t("browser_text",{name:this.room.browser.name,version:this.room.browser.version}),label:this.$t("browser_label"),cancellabel:this.$t("browser_download")},null,function(){location.href=e.room.browser.download})}}),created:function(){new M(this.isTeacher)},mounted:function(){window.easemobim=window.easemobim||{},easemobim.config={hide:!0,autoConnect:!0,visitor:{trueName:this.user.name,userNickname:this.user.name}}}},z=H,W=(n("4f7f"),n("2877")),B=Object(W["a"])(z,O,A,!1,null,"46a69138",null),F=B.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer"},[e.user.type==e.UserType.TEACHER||e.user.type==e.UserType.STUDENT?[n("ul",{staticClass:"tool-bar"},[n("li",{staticClass:"item item-aniamte",class:{active:e.paint.animateEnable},on:{click:function(t){return e.toggleEncourage()}}},[n("IconFont",{staticClass:"icon-font",attrs:{icon:"uu-animation1"}})],1),n("li",{staticClass:"item",class:{active:"interact"==e.paint.activeAction},on:{click:function(t){return e.startInteract()}}},[n("IconFont",{staticClass:"icon-font",attrs:{icon:"uu-hand"}})],1),n("li",{staticClass:"item item-t-fonts",class:{active:"write"==e.paint.activeAction},on:{click:function(t){return e.write()}}},[n("IconFont",{staticClass:"icon-font",attrs:{icon:"uu-text"}}),n("span",{staticClass:"sub"},[e._v(e._s(e.activeFontSize))]),n("ul",{staticClass:"t-fonts"},[e._l(e.fontSizes,function(t,i){return n("li",{key:i,class:{active:e.paint.fontSize===t.value},on:{click:function(n){return e.write(t.value)}}},[e._v(e._s(t.name))])}),n("hr")],2)],1),n("li",{staticClass:"item item-line-width",class:{active:"draw"==e.paint.activeAction},on:{click:function(t){return e.draw()}}},[n("IconFont",{staticClass:"icon-font",attrs:{icon:"uu-pen"}}),n("span",{staticClass:"sub"},[e._v(e._s(e.activeLineWidth))]),n("ul",{staticClass:"line-widths"},[e._l(e.lineWidths,function(t,i){return n("li",{key:i,class:{active:e.paint.lineWidth===t.value},on:{click:function(n){return e.draw(t.value)}}},[e._v(e._s(t.name))])}),n("hr")],2)],1),n("li",{staticClass:"item item-color"},[n("ul",e._l(e.lineColors,function(t,i){return n("li",{key:i,on:{click:function(n){return e.setColor(t.value)}}},[n("IconFont",{staticClass:"icon-font",attrs:{icon:"uu-color-"+t.name}}),n("IconFont",{directives:[{name:"show",rawName:"v-show",value:e.paint.lineColor==t.value,expression:"paint.lineColor==item.value"}],staticClass:"icon-font icon-font-select",attrs:{icon:"uu-color-select"}})],1)}),0)]),n("li",{staticClass:"item",on:{click:function(t){return e.clear()}}},[n("IconFont",{staticClass:"icon-font",attrs:{icon:"uu-ease"}})],1)]),e._t("pagePicker")]:e._e()],2)},J=[],K={data:function(){var e=(new Date).getTime();return{UserType:this.Global.UserType,lastSetInteractTime:e,lastSetFontSizeTime:e,lastSetLineWidthTime:e,lastSetLineColorTime:e,fontSizes:[{name:"L",value:32},{name:"M",value:24},{name:"S",value:18}],lineWidths:[{name:"3",value:9},{name:"2",value:6},{name:"1",value:3}],lineColors:[{name:"red",value:"#ff3b2f"},{name:"yellow",value:"#f7d158"},{name:"blue",value:"#1b8bfe"},{name:"green",value:"#2dc21b"},{name:"orange",value:"#ff8000"},{name:"purpe",value:"#7c76f7"}]}},computed:Object(x["a"])({},Object(E["c"])("paint",{paint:function(e){return e}}),Object(E["c"])("user",{user:function(e){return e}}),{activeFontSize:function(){var e="",t=!0,n=!1,i=void 0;try{for(var a,o=g()(this.fontSizes);!(t=(a=o.next()).done);t=!0){var s=a.value;s.value===this.paint.fontSize&&(e=s.name)}}catch(r){n=!0,i=r}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e},activeLineWidth:function(){var e="",t=!0,n=!1,i=void 0;try{for(var a,o=g()(this.lineWidths);!(t=(a=o.next()).done);t=!0){var s=a.value;s.value===this.paint.lineWidth&&(e=s.name)}}catch(r){n=!0,i=r}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}}),methods:Object(x["a"])({},Object(E["b"])("paint",["setLineColor","startAnimate","startInteract","startWrite","startDraw","endAnimate"]),{add0:function(e){return e<10&&(e="0"+e),e},toggleEncourage:function(){this.paint.animateEnable?this.endAnimate():this.startAnimate()},setColor:function(e){var t=this.paint.lineColor;if(t!=e){this.setLineColor(e);var n=(new Date).getTime(),i=this.lastSetLineColorTime;this.$sensor.emit("pencolor",{pencolor:t,longtime:n-i}),this.lastSetLineColorTime=n}},write:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.paint.fontSize;if(this.startWrite(e),"write"!=!this.paint.activeAction&&e&&t!=e){var n=(new Date).getTime(),i=this.lastSetFontSizeTime;this.$sensor.emit("fontsize",{fontsize:t,longtime:n-i}),this.lastSetFontSizeTime=n}},draw:function(e){var t=this.paint.lineWidth;if(this.startDraw(e),"draw"!=!this.paint.activeAction&&e&&t!=e){var n=(new Date).getTime(),i=this.lastSetLineWidthTime;this.$sensor.emit("pensize",{pensize:t,longtime:n-i}),this.lastSetLineWidthTime=n}},clear:function(){this.$socket.broadcast("cls"),this.$painter.clear(),this.$textbox.clear(),this.$sensor.emit("clean")}})},X=K,Y=(n("7f87"),Object(W["a"])(X,q,J,!1,null,"0956d47d",null)),Q=Y.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video"},[n("div",{staticClass:"view-item"},[n("VideoIconBar",{ref:"remoteVideoPlayer",staticClass:"fill",attrs:{iconShow:!1,disabled:!e.isMonitor,upstage:!e.remoteUpstage,stuInfo:e.stuInfo,userName:e.isTeacher?e.student.name:e.teacher.name},on:{interChange:e.interChange,penChange:e.penChange,micChange:e.micChange,stageChange:e.remoteStageChange}},[n("remote-stream",{ref:"remoteVideo",staticClass:"remoteVideo",attrs:{videotip:e.videotip},on:{stream:e.streamAddHandler}})],1)],1),n("div",{staticClass:"view-item"},[n("VideoIconBar",{ref:"localVideoPlayer",staticClass:"fill",attrs:{iconShow:!1,disabled:!e.isMonitor,stuInfo:e.stuInfo,userName:e.isTeacher?e.teacher.name:e.student.name,upstage:!e.localUpstage},on:{interChange:e.interChange,penChange:e.penChange,micChange:e.micChange,stageChange:e.localStageChange}},[n("local-stream",{ref:"localVideo",staticClass:"localVideo",attrs:{userType:e.userType,device:e.device,videotip:e.isTeacher?"no camera":"无摄像头",videoProfile:e.videoProfile},on:{complate:e.localVideoComplate,error:e.localVideoError}})],1)],1)])},ee=[],te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"videodisplay"},[n("span",[e._v(e._s(e.videotip))]),n("video",{attrs:{id:"localvideo",playsinline:"",autoplay:"",muted:""},domProps:{muted:!0}},[e._v("浏览器不支持video播放")])])},ne=[],ie=n("d5b3"),ae=n.n(ie),oe={name:"LocalStream",props:{userType:{type:Number,default:1},device:{type:Object,default:null},videoProfile:{type:String,default:"480P_3"},videotip:{type:String,default:"暂无摄像头"}},computed:{icon:function(){return ae.a},cameras:function(){return this.videoStream?this.videoStream.cameras:[]},microphones:function(){return this.videoStream?this.videoStream.microphones:[]},localStream:function(){return this.videoStream?this.videoStream.localStream:null}},methods:{init:function(e){var t=this,n=this;this.splash.progress(2,n.$t("splash_open_device"));var i=this.videoStream;i.init().then(function(i){n.splash.progress(2,n.$t("splash_init_local_video")),console.log(i),n.microphones.length?n.userType==n.Global.UserType.TEACHER?n.cameras.length?n.createLocalVideo(e):n.alert.show({icon:"refresh",title:n.$t("video_device_no_cam_title"),text:n.$t("video_device_no_cam_text"),label:t.$t("alert_error_refresh_label")},function(){window.location.reload()}):n.createLocalVideo(e):n.cameras.length?n.alert.show({icon:"refresh",title:n.$t("video_device_no_mic_title"),text:n.$t("video_device_no_mic_text"),label:t.$t("alert_error_refresh_label")},function(){window.location.reload()}):n.$emit("error","DEVICES_NOT_FOUND")}).catch(function(e){n.$emit("error","DEVICES_NOT_FOUND")})},createLocalVideo:function(e){var t=this,n=this.videoStream;this.device&&(this.videoStream.cameraId=this.device.camera,this.videoStream.microphoneId=this.device.microphone),n.videoElement=document.querySelector("#localvideo"),n.videoProfile=this.videoProfile,console.log("视频发布规格:",n.videoProfile,e),n.streamID=e,n.createStream().then(function(e){t.splash.progress(2,t.$t("splash_create_local_video")),t.play(),t.$emit("complate",e)}).catch(function(e){t.$emit("error",e)})},play:function(){var e=this.videoStream;e.display()}}},se=oe,re=(n("a9b2"),Object(W["a"])(se,te,ne,!1,null,"14848271",null)),ce=re.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"videodisplay",attrs:{id:"remotevideo"}},[n("span",[e._v(e._s(e.videotip||e.status))])])},ue=[],he={name:"RemoteStream",props:{videotip:{type:String,default:""}},data:function(){return{status:"老师正在积攒能量"}},methods:{init:function(e){var t=this;t.splash.progress(2,t.$t("splash_video_sub")),e.on("stream",function(n,i,a){console.log("STREAM ADD :::",n,i,a),t.$emit("stream",n,i,a),e.player(a,document.querySelector("#remotevideo"))}),e.on("removed",function(n,i,a){console.log("STREAM REMOVED :::",n,i,a),t.$emit("removed",n,i,a),e.stopPlayer(a)})},close:function(){}}},de=he,pe=(n("c6b9"),Object(W["a"])(de,le,ue,!1,null,"f58a484c",null)),me=pe.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-bar"},[e._t("default"),e.iconShow?n("div",{staticClass:"tools"},[n("toggle-button",{attrs:{icon:"uu-interview",selectIcon:"uu-interview-disable",disabled:!e.disabled,selected:e.interSelected},on:{change:e.interChange}}),n("toggle-button",{attrs:{icon:"uu-pen-enable",selectIcon:"uu-pen-disable",disabled:!e.disabled,selected:e.penSelected},on:{change:e.penChange}}),n("toggle-button",{attrs:{icon:"uu-mic-enable",selectIcon:"uu-mic-disable",disabled:!e.disabled,selected:e.micSelected},on:{change:e.micChange}})],1):e._e(),e.iconShow?e._e():n("span",{directives:[{name:"show",rawName:"v-show",value:e.userName,expression:"userName"}],staticClass:"user-name"},[e._v(e._s(e.userName))]),e.disabled?n("toggle-button",{staticClass:"screen",attrs:{icon:"uu-upstage",selected:e.upstage,selectIcon:"uu-downstage"},on:{change:e.stageChange}}):e._e()],2)},be=[],_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn",class:{interactive:e.disabled,selected:!e.selecteValue},on:{click:e.btnClickHandler}},[n("icon-font",{staticClass:"icon-font",attrs:{icon:e.iconLabel}})],1)},ve=[],ge={name:"ToggleButton",props:{icon:{type:String,default:""},selectIcon:{type:String},selected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{selecteValue:this.selected}},watch:{selected:function(e){this.selecteValue=e}},computed:{iconLabel:function(){return this.selecteValue?this.icon:this.selectIcon}},methods:{btnClickHandler:function(){this.disabled||(this.selecteValue=!this.selecteValue,this.$emit("change",this.selecteValue))}}},we=ge,Ce=(n("235e"),Object(W["a"])(we,_e,ve,!1,null,"f8ce82d0",null)),ye=Ce.exports,Te={name:"VideoIconBar",components:{ToggleButton:ye},props:{stuInfo:{type:Object,default:function(){}},userName:{type:String,default:""},iconShow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},upstage:{type:Boolean,default:!1}},computed:{interSelected:function(){return!!this.stuInfo&&this.stuInfo.animate},penSelected:function(){return!!this.stuInfo&&this.stuInfo.drawing},micSelected:function(){return!!this.stuInfo&&!this.stuInfo.muted}},methods:{interChange:function(e){this.$emit("interChange",e)},penChange:function(e){this.$emit("penChange",e)},micChange:function(e){this.$emit("micChange",!e)},stageChange:function(e){this.$emit("stageChange",e)}}},ke=Te,xe=(n("9581"),Object(W["a"])(ke,fe,be,!1,null,"6e86952d",null)),Ee=xe.exports,Se=n("8e44"),$e=n("b0b4"),Oe=n("308d"),Ae=n("6bb5"),je=n("013f"),Ie=n("4e2b"),Ue=n("bd86"),Ne=n("0443"),De=function(e){function t(){var e;return Object(V["a"])(this,t),e=Object(Oe["a"])(this,Object(Ae["a"])(t).call(this)),Object(Ue["a"])(Object(je["a"])(e),"parentNodes",[]),Object(Ue["a"])(Object(je["a"])(e),"nodes",[]),e}return Object(Ie["a"])(t,e),Object($e["a"])(t,[{key:"init",value:function(){var e=this,t=Array.prototype.slice.call(arguments)||[];t.forEach(function(t,n){e.nodes.push(t),e.parentNodes.push(t.parentNode)})}},{key:"reset",value:function(){var e=this;this.parentNodes.forEach(function(t,n){t.insertBefore(e.nodes[n],t.firstChild),e.play(t)})}},{key:"exchange",value:function(e,t){var n=this.nodes[e],i=this.nodes[t],a=this.parentNodes[t];n&&i&&(n.parentNode.insertBefore(i,n),a.insertBefore(n,a.firstChild)),this.play(n),this.play(i),this.emit("change",e,t)}},{key:"play",value:function(e){if(e){var t=e.querySelector("video");t&&t.play()}}}]),t}(Ne["a"]),Re=De,Pe=n("c4b9"),Ge=n.n(Pe),Ve={components:{LocalStream:ce,RemoteStream:me,VideoIconBar:Ee},props:{stuInfo:Object,classId:Number,appToken:String,token:Number,userType:Number},data:function(){return{appid:null,device:null,remote_isStudent:!1,exchange:new Re,remoteUpstage:!1,localUpstage:!1,hasFetchGroupChatRecord:!1}},computed:Object(x["a"])({},Object(E["c"])("teacher",{teacher:function(e){return e}}),Object(E["c"])("student",{student:function(e){return e}}),Object(E["c"])("user",{user:function(e){return e}}),Object(E["c"])("room",{room:function(e){return e}}),{videoProfile:function(){return"480P_1"},isStudent:function(){return this.userType==this.Global.UserType.STUDENT},isTeacher:function(){return this.userType==this.Global.UserType.TEACHER},isMonitor:function(){return this.userType==this.Global.UserType.ADMIN||this.userType==this.Global.UserType.PARENT},videotip:function(){return this.isTeacher?"wait...":""},stageIndex:function(){return this.room.stageIndex}}),watch:{stageIndex:function(e){this.restoreStage(e)}},methods:Object(x["a"])({},Object(E["b"])("student",["mutedStudent","drawingStudent","animateStudent"]),Object(E["b"])("room",["updateStage"]),{init:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(t,n){var i,a,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=this,this.appid=t,this.splash.progress(2,this.$t("splash_read_device")),e.next=5,this.Api.readDevice();case 5:a=e.sent,o=a.isSuccess,a.code,a.message,s=a.result,this.device=o&&s,this.$refs["localVideo"].init(this.token),this.exchange.init(n,this.$refs["remoteVideoPlayer"].$el,this.$refs["localVideoPlayer"].$el),this.exchange.on("change",function(){i.course.completed=!1}),this.restoreStage(this.stageIndex);case 15:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),restoreStage:function(e){this.exchange&&(this.exchange.reset(),this.remoteUpstage=this.localUpstage=!1,e&&(this.exchange.exchange(e,0),1==e?this.remoteUpstage=!0:this.localUpstage=!0))},localVideoComplate:function(){var e=this,t=document.createElement("audio");t.src=Ge.a;var n=t.play();t.volume=.01,n&&n.then(function(){e.initVideoClient(e.classId,e.user.appToken,e.token)}).catch(function(t){console.log("autoplay 策略检查:不可用",t.name,t.message),e.alert.show({text:"The browser needs your authorization to support the classroom.",label:"Authorize"},function(t){e.initVideoClient(e.classId,e.user.appToken,e.token)})})},localVideoError:function(e){e=-1!=["PERMISSION_DENIED","PermissionDismissedError"].indexOf(e)?this.$t("brower_allow_tip"):-1!=["MEDIA_OPTION_INVALID","NotReadableError"].indexOf(e)?this.$t("brower_notfound"):-1!=["NotAllowedError"].indexOf(e)?this.$t("brower_allow_error"):-1!=["NOT_SUPPORTED","MEDIA_OPTION_INVALID"].indexOf(e)?this.$t("brower_updated"):"DEVICES_NOT_FOUND"==e?this.$t("video_device_no_text"):this.$t("brower_undefined")+"</br>"+e,this.alert.show({icon:"refresh",title:this.$t("brower_open_device"),text:e,label:this.$t("alert_error_refresh_label")},function(){window.location.reload()})},videoClientError:function(e){"SOCKET_DISCONNECTED"==e&&console.error("视频服务已经断开")},initVideoClient:function(e,t,n){var i=this;i.splash.progress(2,i.$t("splash_video_init"));var a=this.videoClient;a.on("rejected",function(e){i.alert.show({icon:"exit",text:i.$t("alert_error_banned_text"),label:i.$t("alert_error_refresh_label")},function(){window.location.reload()})}),a.on("error",i.videoClientError),a.init(i.appid).then(function(){i.splash.progress(2,i.$t("splash_video_connect")),i.$refs["remoteVideo"].init(i.videoClient),a.connect(e,t,n).then(function(e,t,n){i.splash.progress(2,i.$t("splash_video_pub")),a.publish(i.videoStream.localStream),i.splash.progress(2,i.$t("splash_video")),i.splash.complete(i.$t("splash_complated"))}).catch(function(e){i.alert.show({icon:"refresh",text:_()(e),label:i.$t("alert_error_refresh_label")},function(){window.location.reload()})})}).catch(function(e){i.alert.show({icon:"refresh",text:_()(e),label:i.$t("alert_error_refresh_label")},function(){window.location.reload()})})},streamAddHandler:function(e,t,n){this.remote_isStudent=t==this.Global.UserType.STUDENT},close:function(){this.videotip="课程已经结束",this.closeVideoClient()},closeVideoClient:function(){this.videoClient&&(this.videoClient.exit(),this.videoClient=null)},remoteStageChange:function(e){this.localUpstage=!1,this.remoteUpstage=!e,this.exchange.reset(),this.remoteUpstage?(this.exchange.exchange(1,0),this.updateStage(1),this.$socket.broadcast("stagechage",{index:2})):(this.updateStage(0),this.$socket.broadcast("stagechage",{index:0}))},localStageChange:function(e){this.remoteUpstage=!1,this.localUpstage=!e,this.exchange.reset(),this.localUpstage?(this.exchange.exchange(2,0),this.updateStage(2),this.$socket.broadcast("stagechage",{index:1})):(this.updateStage(0),this.$socket.broadcast("stagechage",{index:0}))},resetStageChange:function(){this.remoteUpstage=!1,this.localUpstage=!1,this.exchange.reset(),this.updateStage(0),this.$socket.broadcast("stagechage",{index:0})},interChange:function(e){this.animateChange(e),e&&this.drawingChange(!e)},animateChange:function(e){j["a"].save(j["a"].ANIMATE,{state:e?1:2,extend:null},this.student),this.animateStudent(e),this.$socket.broadcast("animate",{id:this.student.id,enabled:e})},penChange:function(e){this.drawingChange(e),e&&this.animateChange(!e)},drawingChange:function(e){j["a"].save(j["a"].DRAWING,{state:e?1:2,extend:null},this.student),this.drawingStudent(e),this.$socket.broadcast("draw",{id:this.student.id,enabled:e})},micChange:function(e){j["a"].save(j["a"].MIC,{state:e?2:1,extend:null},this.student),this.mutedStudent(e),this.$socket.broadcast("muted",{id:this.student.id,enabled:e}),this.videoClient&&this.videoClient.toggleAudio(this.student.token,e)},showGroupChat:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(t){var n,i,a,o,s,r,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasFetchGroupChatRecord||this.user.type!=t){e.next=9;break}return this.user.type==this.Global.UserType.TEACHER?(n=1,i=this.teacher.id):(n=2,i=this.student.id),e.next=4,this.Api.getGroupChatRecord(n,i);case 4:a=e.sent,o=a.isSuccess,s=a.result,o&&(r=[],s.list.forEach(function(e){r.push({name:e.user_nickname,self:e.user_id==c.user.id,message:e.message})}),this.$groupChat.init(r,this.user.name,"技术支持")),this.$groupChat.show();case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),sendMessage:function(e){var t,n;this.user.type==this.Global.UserType.TEACHER?(t=1,n=this.teacher.id):(t=2,n=this.student.id),this.$socket.broadcast("talk",{userId:this.user.id,userType:this.user.type,type:this.Global.UserType.ADMIN,info:e}),this.Api.sendGroupChat(t,n,e)},listen:function(){var e=this;this.user.type!=this.Global.UserType.STUDENT&&this.user.type!=this.Global.UserType.TEACHER||(this.$socket.on("share",function(t,n,i){"talk"==t&&(e.$groupChat.shown||e.showGroupChat(n.activeChat),e.user.type==n.activeChat&&e.$groupChat.recive(n.info,i.name))}),this.$groupChat.on("send",this.sendMessage))}}),created:function(){this.listen()}},Le=Ve,Me=(n("689b"),Object(W["a"])(Le,Z,ee,!1,null,"dddc9b58",null)),He=Me.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video"},[n("div",{staticClass:"view-item",on:{mouseenter:e.studentEnter,mouseleave:e.studentLeave}},[n("VideoIconBar",{ref:"videoPlayerStudent",staticClass:"fill",attrs:{stuInfo:e.student,userName:e.student.name,iconShow:!1}},[n("div",{staticClass:"remoteVideo videodisplay",attrs:{id:"videodisplay"+e.student.token,userdata:JSON.stringify({id:e.student.id,type:e.student.type,extend_id:e.student.uuid})}})]),e.student.online?n("div",{directives:[{name:"show",rawName:"v-show",value:e.studentMask,expression:"studentMask"}],staticClass:"fill mask"},[n("div",{staticClass:"btn-group"},[n("button",{attrs:{type:"button",name:"button"},on:{click:function(t){return e.refreshClient(e.Global.UserType.STUDENT)}}},[e._v("刷新")]),n("button",{attrs:{type:"button",name:"button"},on:{click:function(t){return e.showGroupChat(e.Global.UserType.STUDENT)}}},[e._v("私聊")])])]):e._e()],1),n("div",{staticClass:"view-item",on:{mouseenter:e.teacherEnter,mouseleave:e.teacherLeave}},[n("VideoIconBar",{ref:"videoPlayerTeacher",staticClass:"fill",attrs:{userName:e.teacher.name,iconShow:!1}},[n("div",{staticClass:"remoteVideo videodisplay",attrs:{id:"videodisplay"+e.teacher.token,userdata:JSON.stringify({id:e.teacher.id,type:e.teacher.type,extend_id:e.teacher.uuid})}})]),e.teacher.online?n("div",{directives:[{name:"show",rawName:"v-show",value:e.teacherMask,expression:"teacherMask"}],staticClass:"fill mask"},[n("div",{staticClass:"btn-group"},[n("button",{attrs:{type:"button",name:"button"},on:{click:function(t){return e.refreshClient(e.Global.UserType.TEACHER)}}},[e._v("刷新")]),n("button",{attrs:{type:"button",name:"button"},on:{click:function(t){return e.showGroupChat(e.Global.UserType.TEACHER)}}},[e._v("私聊")])])]):e._e()],1)])},We=[],Be={components:{RemoteStream:me,VideoIconBar:Ee},props:{stuInfo:Object,classId:Number,appToken:String,token:Number,userType:Number},data:function(){return{appid:null,exchange:new Re,studentMask:!1,teacherMask:!1,activeChat:""}},computed:Object(x["a"])({},Object(E["c"])("teacher",{teacher:function(e){return e}}),Object(E["c"])("student",{student:function(e){return e}}),Object(E["c"])("user",{user:function(e){return e}}),Object(E["c"])("room",{room:function(e){return e}}),{stageIndex:function(){return this.room.stageIndex}}),watch:{stageIndex:function(e){this.restoreStage(e)}},methods:Object(x["a"])({},Object(E["b"])("room",["updateStage"]),{init:function(e,t){var n=this;this.appid=e,this.splash.progress(2,this.$t("splash_read_device")),this.initVideoClient(this.classId,this.appToken,this.token),this.exchange.on("change",function(){n.course.completed=!1}),this.exchange.init(t,this.$refs["videoPlayerStudent"].$el,this.$refs["videoPlayerTeacher"].$el),this.restoreStage(this.stageIndex)},restoreStage:function(e){this.exchange&&(this.exchange.reset(),e&&this.exchange.exchange(e,0))},videoClientError:function(e){"SOCKET_DISCONNECTED"==e&&console.error("视频服务已经断开")},initVideoClient:function(e,t,n){var i=this;i.splash.progress(2,i.$t("splash_video_init"));var a=this.videoClient;a.on("error",i.videoClientError),a.init(i.appid).then(function(){i.splash.progress(2,i.$t("splash_video_sub")),a.on("stream",function(e,t,n){console.log("STREAM ADD :::",e,t,n),a.player(n,document.querySelector("#videodisplay"+n))}),a.on("removed",function(e,t,n){console.log("STREAM REMOVED :::",e,t,n),a.stopPlayer(n)}),a.connect(e,t,n).then(function(e,t,n){i.splash.progress(2,i.$t("splash_video")),i.splash.complete(i.$t("splash_complated")),console.log("进入成功")}).catch(function(e){i.alert.show({icon:"refresh",text:_()(e),label:i.$t("alert_error_refresh_label")},function(){window.location.reload()})})}).catch(function(e){i.alert.show({icon:"refresh",text:_()(e),label:i.$t("alert_error_refresh_label")},function(){window.location.reload()})})},close:function(){this.videotip="课程已经结束",this.closeVideoClient()},closeVideoClient:function(){this.videoClient&&(this.videoClient.exit(),this.videoClient=null)},studentEnter:function(){this.studentMask=!0},studentLeave:function(){this.studentMask=!1},teacherEnter:function(){this.teacherMask=!0},teacherLeave:function(){this.teacherMask=!1},refreshClient:function(e){var t=this;this.alert.show({icon:"refresh",text:"确认要刷新"+(e==this.Global.UserType.TEACHER?"老师":"学生")+"上课教室, 并中断当前课程吗?",label:"刷新",cancellabel:this.$t("button_cancel_label")},function(){t.$socket.broadcast("refresh",{type:e})})},showGroupChat:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(t){var n,i,a,o,s,r,c,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t==this.activeChat){e.next=8;break}return t==this.Global.UserType.TEACHER?(n=1,i=this.teacher.id,a=this.teacher.name):(n=2,i=this.student.id,a=this.student.name),e.next=4,this.Api.getGroupChatRecord(n,i);case 4:o=e.sent,s=o.isSuccess,r=o.result,s&&(c=[],r.list.forEach(function(e){c.push({name:e.user_nickname,self:e.user_id==l.user.id,message:e.message})}),this.$groupChat.init(c,this.user.name,a));case 8:this.$groupChat.show(),this.activeChat=t;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),sendMessage:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(t){var n,i,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.activeChat==this.Global.UserType.TEACHER?(n=1,i=this.teacher.id):(n=2,i=this.student.id),e.next=3,this.Api.sendGroupChat(n,i,t);case 3:a=e.sent,o=a.isSuccess,o&&this.$socket.broadcast("talk",{userId:this.user.id,userType:this.user.type,activeChat:this.activeChat,type:this.Global.UserType.ADMIN,info:t});case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),listen:function(){var e=this;this.user.type==this.Global.UserType.ADMIN&&(this.$socket.on("share",function(t,n,i){"talk"==t&&(e.$groupChat.shown||e.showGroupChat(i.type),e.$groupChat.recive(n.info,i.name))}),this.$groupChat.on("send",this.sendMessage))}}),created:function(){this.listen()}},Fe=Be,qe=(n("b45d"),Object(W["a"])(Fe,ze,We,!1,null,"26e788a4",null)),Je=qe.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn",class:{interactive:e.disabled},on:{click:e.btnClickHandler}},[n("icon-font",{staticClass:"icon-font",attrs:{icon:e.icon}})],1)},Xe=[],Ye={name:"BaseButton",props:{icon:{type:String,default:""},disabled:{type:Boolean,default:!1}},methods:{btnClickHandler:function(e){this.disabled||this.$emit("change",e)}}},Qe=Ye,Ze=(n("b5f5"),Object(W["a"])(Qe,Ke,Xe,!1,null,"149070fa",null)),et=Ze.exports,tt=n("4756"),nt=n("39bd"),it=n("4742"),at=n("19f2"),ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{"enter-active-class":"animated bounceIn","leave-active-class":"animated bounceOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visiabled,expression:"visiabled"}],staticClass:"table"},[n("ul",[n("li",[n("span",[e._v("ID")]),n("span",[e._v("类型")]),n("span",[e._v("姓名")])]),e._l(e.list,function(t){return n("li",{key:t.token},[n("span",[e._v(e._s(t.uuid||t.id))]),n("span",[e._v(e._s(e.types[t.type-1]))]),n("span",[e._v(e._s(t.name))])])})],2),n("div",{staticClass:"btn",on:{click:e.hide}},[n("IconFont",{staticClass:"close",attrs:{icon:"uu-close1"}})],1)])])},st=[],rt={name:"UserOnlineList",props:{list:{type:Array,default:[]}},data:function(){return{visiabled:!1,types:["学生","老师","家长","管理员"]}},methods:{hide:function(){this.visiabled=!1},show:function(){this.visiabled=!0}}},ct=rt,lt=(n("21b4"),Object(W["a"])(ct,ot,st,!1,null,"933ebc0a",null)),ut=lt.exports,ht=n("74a4"),dt=n.n(ht),pt=n("e6c2"),mt=n.n(pt),ft={components:{Header:F,Footer:Q,Video:He,VideoAdmin:Je,BaseButton:et,Courseware:tt["a"],CoursePagePicker:nt["a"],BubbleWindow:it["a"],SocketStatus:at["a"],UserOnlineList:ut},data:function(){return{config:{appid:"c5f20309b7d64264aa73f1bc7e438de7"},onlineList:[]}},computed:Object(x["a"])({},Object(E["c"])("page",{page:function(e){return e}}),Object(E["c"])("room",{room:function(e){return e}}),Object(E["c"])("user",{user:function(e){return e}}),Object(E["c"])("paint",{paint:function(e){return e}}),Object(E["c"])("teacher",{teacher:function(e){return e}}),Object(E["c"])("student",{student:function(e){return e}}),{isTeacher:function(){return this.user.type==this.Global.UserType.TEACHER},isAdmin:function(){return this.user.type==this.Global.UserType.ADMIN},bgMask:function(){return this.isTeacher?mt.a:dt.a},paintEnable:function(){return"draw"==this.paint.activeAction&&0===this.room.stageIndex&&!this.isAdmin},writeEnable:function(){return"write"==this.paint.activeAction&&0===this.room.stageIndex&&!this.isAdmin}}),methods:Object(x["a"])({},Object(E["b"])("page",["setRatio"]),Object(E["b"])("room",["endTheClass","updateStage"]),Object(E["b"])("paint",["endAnimate"]),Object(E["b"])("teacher",["mergeTeacher"]),Object(E["b"])("student",["mergeStudent","mutedStudent","drawingStudent","animateStudent"]),{resize:function(){var e=document.documentElement.clientWidth-2*this.page.left,t=document.documentElement.clientHeight,n=e/this.page.width,i=this.page.height*n;i>t&&(n=t/this.page.height),this.setRatio(Number(n.toFixed(4)))},beginPaint:function(e,t){this.$socket.broadcast("position",{type:"start",x:e,y:t,width:this.paint.lineWidth,color:this.paint.lineColor})},painting:function(e,t){this.$socket.broadcast("position",{type:"move",x:e,y:t})},beginWrite:function(e,t){this.$socket.broadcast("draw_text",{type:"textstart",x:e,y:t,width:300,height:40})},writing:function(e,t,n,i,a,o,s){this.$socket.broadcast("draw_text",{type:"textchange",x:e,y:t,width:n,height:i,fontSize:a,color:o,text:s})},encourage:function(e,t){var n=this;this.$socket.broadcast("excit",{index:e,delay:t}),setTimeout(function(){n.endAnimate()},t)},pageChangeHandler:function(e,t){this.$socket.broadcast("page",{page:e,total:t,reset:0}),j["a"].save(j["a"].PAGE_CHANGE,{page:e})},getCourseAction:function(e){var t=this;this.Api.getCourseState().then(function(n){var i=n.isSuccess,a=(n.message,n.result);if(i){t.course.page=a.pageSetting||1;var o=a.animationSetting.map(function(e){return _()(e)});t.course.actionlist=o}e&&e()})},initRoom:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:10,t=this,this.videoClient.on("tokenExpire",function(){t.Api.getAgoraToken(1).then(function(e){var n=e.isSuccess,i=e.code,a=e.message,o=e.result;n?t.videoClient.renewToken(o.token):-1!=[10008].indexOf(i)&&(window.location.hash="classover",t.alert.show({icon:"exit",text:t.$t("class_timeout_text"),title:t.$t("class_timeout_title"),label:t.$t("button_leave_label")},function(){t.isAdmin?window.location.hash="classover":t.endTheClass().then(function(e){window.location.href=e||"/message?code=".concat(i,"&message=").concat(a)})}))})}),this.isAdmin?this.$nextTick(function(){n.$refs["videoplay"].init(n.config.appid,n.$refs["coursepanel"])}):this.$refs["video"].init(this.config.appid,this.$refs["coursepanel"]),this.$refs["course"].init();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),classOut:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.endTheClass();case 2:t=e.sent,t&&(window.location.href=t);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),socketListener:function(){var e=this,t=this;this.$socket&&(this.$socket.on("connected",function(){var t=e.user,n=t.id,i=t.type,a=t.name,o=t.token,s=t.photo,r=t.uuid;e.$socket.join({room_id:e.room.roomId,user_id:n,role:i,info:{name:a,token:o,photo:s,uuid:r}})}),this.$socket.on("enterSuccess",function(){function e(){switch(t.course.initPage(t.course.page),t.user.type){case t.Global.UserType.TEACHER:t.$socket.broadcast("stagechage",{index:t.room.stageIndex}),t.$socket.broadcast("page",{page:t.course.page,total:t.course.total,reset:1});break;case t.Global.UserType.STUDENT:t.mergeStudent({online:!0}),t.$socket.broadcast("students",t.student);break}}t.$socket.isKoConnected?t.getCourseAction(e):e()}),this.$socket.on("userEnter",function(t,n,i){var a={id:t,type:n,name:i.name,photo:i.photo,uuid:i.uuid,online:!0};e.user.type==e.Global.UserType.TEACHER&&(e.$socket.broadcast("stagechage",{index:e.room.stageIndex}),e.$socket.broadcast("page",{page:e.course.page,total:e.course.total,reset:1})),n==e.Global.UserType.TEACHER?(e.mergeTeacher(a),e.$sensor.emit("registerPage",{anchorID:i.uuid})):n==e.Global.UserType.STUDENT&&e.mergeStudent(a),e.onlineList.push({uuid:i.uuid,id:t,type:n,name:i.name,token:n+""+t})}),this.$socket.on("userQuit",function(t,n,i){var a=e;n==e.Global.UserType.TEACHER?e.mergeTeacher({online:!1}):n==e.Global.UserType.STUDENT&&e.mergeStudent({online:!1}),e.onlineList.forEach(function(e,i){e.token==n+""+t&&a.onlineList.splice(i,1)})}),this.$socket.on("share",function(n,i,a){switch(n){case"draw":e.drawingStudent(i.enabled);break;case"animate":e.isAdmin?e.course.hasAuthority(!1):e.course.hasAuthority(i.enabled),e.animateStudent(i.enabled);break;case"muted":e.user.type!=e.Global.UserType.STUDENT&&e.videoClient&&e.videoClient.toggleAudio(e.student.token,i.enabled),e.mutedStudent(i.enabled);break;case"students":e.mergeStudent(i);break;case"stagechage":a.type!=t.Global.UserType.TEACHER&&a.type!=t.Global.UserType.STUDENT||(a.type==t.Global.UserType.TEACHER&&e.isAdmin&&(i.index=1==i.index?2:2==i.index?1:i.index),t.updateStage(i.index));break;case"refresh":i.type==e.user.type&&window.location.reload();break;case"rostrum":case"flower":break;case"chat":e.$groupChat.emit("chat",a,i);break;case"excit":e.$encourage.beginAnimation(i.index,i.delay);break;case"cls":e.$painter.clear(),e.$textbox.clear();break;case"page":i.reset?e.getCourseAction(function(){e.course.page=i.page,e.course.completed&&e.course.initPage(i.page)}):e.course.initPage(i.page);break;case"action":e.course.mockAction(i);break;case"line":e.localDrawLine(i.points,i.color,i.width,a);break;case"position":var o=i.type,s=i.x,r=i.y,c=i.width,l=i.color;"start"==o?e.$painter.beginPaint(s,r,c,l):"move"==o&&e.$painter.painting(s,r);break;case"interaction":e.interaction(i,a);break;case"draw_text":var u=i.type,h=i.x,d=i.y,p=i.width,m=i.height,f=i.fontSize,b=i.color,_=i.text;"textstart"===u?e.$textbox.beginWrite(h,d,p,m):"textchange"===u&&e.$textbox.writing(h,d,p,m,f,b,_);break;case"complete":e.alert.show({text:e.$t("class_is_over"),label:e.$t("button_leave_label")},e.classOut),e.$refs["video"].close(),e.$socket.close();break}}),this.$socket.on("enterReject",function(t,n){10040==t?window.location.href="/message?code=".concat(t,"&message=").concat(n):e.alert.show({icon:"refresh",text:e.$t("alert_error_refresh_text"),label:e.$t("alert_error_refresh_label")},function(){location.reload()})}),this.$socket.on("offline",function(){e.alert.show({icon:"exit",text:e.$t("alert_offline_text"),label:e.$t("button_leave_label")},e.classOut)}),this.$socket.on("close",function(){var t=e;e.$socket.close();var n=e.$socket.nextSocketItem({id:e.$socket.id});n?setTimeout(function(){t.$socket.connect(n)},500):e.alert.show({icon:"unlink",text:e.$t("alert_connection_failed_text"),label:e.$t("button_leave_label")},e.classOut)}))},courseListener:function(){var e=this,t=this;this.course.on(this.course.EVENT_ACTION,function(e,n){t.$socket.broadcast("action",e);var i=JSON.parse(e);i.page=n,j["a"].save(j["a"].ANIMATE_INFO,i)}),this.course.on(this.course.EVENT_PAGE_COMPLETE,function(t,n,i,a){e.$painter.clear(),e.$textbox.clear()})},stageChange:function(){this.$refs["video"].resetStageChange()},onlineChange:function(){this.$refs["userList"].show()}}),created:function(){var e=this;this.resize(),window.onresize=function(){e.resize()},this.socketListener(),this.courseListener()}},bt=ft,_t=(n("6ce8"),Object(W["a"])(bt,S,$,!1,null,null,null)),vt=_t.exports,gt=n("98ab"),wt=n("f6a7"),Ct={name:"App",components:{Room:vt,Alert:gt["a"],Splash:wt["a"]},computed:Object(x["a"])({},Object(E["c"])("config",{config:function(e){return e}}),Object(E["c"])("user",{user:function(e){return e}}),Object(E["c"])("room",{room:function(e){return e}}),Object(E["c"])("teacher",{teacher:function(e){return e}})),methods:Object(x["a"])({},Object(E["b"])("config",["setConfig"]),Object(E["b"])("user",["addUser","saveDevice"]),Object(E["b"])("room",["setRoom","browser","pushStudent","endTheClass","roomUpdateUser"]),Object(E["b"])("paint",["startDraw"]),Object(E["b"])("teacher",["setTeacher"]),Object(E["b"])("student",["addStudent","updateStudent"]),{checkPageProfile:function(){var e=this,t=document.createElement("audio");t.src=Ge.a;var n=t.play();t.volume=.01,n&&n.then(function(){e.getClassInfo()}).catch(function(t){console.log("autoplay 策略检查:不可用",t.name,t.message),e.alert.show({title:"准备好了吗?就要开启学习之旅了哦!",label:"立即开启"},function(t){e.getClassInfo()})})},setClock:function(e,t){this.$clock.startTime=e||k()(),this.$clock.serverTime=t||k()(),this.$clock.start()},notice:function(){var e={studentNote:this.room.studentNote,teacherNote:this.room.teacherNote,coursewareName:this.room.coursewareName,teacherName:this.teacher.name};this.alert.showHtml({html:this.$t("classnote",e),timer:5e3})},getClassInfo:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a,o,s,r,c,l,u,h,d,p,m,f,b,_,v,w,y,T;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.Api.getClassInfo();case 2:if(t=e.sent,n=t.isSuccess,i=t.code,a=t.message,o=t.result,s=t.now,!n){e.next=45;break}if(r=o.room_id,c=o.setting,o.page,l=o.course_num,u=o.start_time,h=o.end_time,o.courseware,d=o.teacher_note,p=o.courseware_name,m=o.student_note,f=o.users,this.$socket.init(r,c["websocket"]),c["socket"]=this.$socket.getSocketItem(),this.course.load_bak_list=o.setting["courseware"].list||[],this.course.load_bak_timeout=o.setting["courseware"].timeout||10,this.setConfig(c),this.setRoom({group_name:o.group_name,room_id:r,course_num:l,start_time:u,end_time:h,teacher_note:d,courseware_name:p,student_note:m}),this.setClock(C()(u),C()(s)),!f.length){e.next=37;break}for(b=!0,_=!1,v=void 0,e.prev=21,w=g()(f);!(b=(y=w.next()).done);b=!0)T=y.value,T.user_type==this.Global.UserType.TEACHER?(T.now=s,this.setTeacher(T),this.$sensor.emit("registerPage",{anchorID:T.external_id})):this.addStudent(T);e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](21),_=!0,v=e.t0;case 29:e.prev=29,e.prev=30,b||null==w.return||w.return();case 32:if(e.prev=32,!_){e.next=35;break}throw v;case 35:return e.finish(32);case 36:return e.finish(29);case 37:this.course.userType=this.Global.UserType.TEACHER,this.course.dataProvider(o["courseware"]),this.splash.progress(3,"init..."),(this.user.type==this.Global.UserType.TEACHER&&d||this.user.type==this.Global.UserType.STUDENT&&m)&&this.notice(),this.getDeviceInfo(),this.$sensor.emit("registerPage",{roomID:r}),e.next=46;break;case 45:this.alert.show({icon:"exit",text:a,label:this.$t("button_leave_label")},function(){window.location.href="/message?code=".concat(i,"&message=").concat(a)});case 46:case"end":return e.stop()}},e,this,[[21,25,29,37],[30,,32,36]])}));function t(){return e.apply(this,arguments)}return t}(),getDeviceInfo:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.Api.getDeviceInfo();case 3:n=e.sent,i=n.isSuccess,n.code,n.message,a=n.result,n.now,i&&(a&&t.saveDevice(a),this.getTools());case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getTools:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.Api.getTools();case 3:n=e.sent,i=n.isSuccess,n.code,n.message,a=n.result,n.now,i&&(t.course.page=a.pageSetting||1,o=a.animationSetting.map(function(e){return _()(e)}),t.course.actionlist=o,s=a.toolSetting||{},t.updateStudent(s)),this.$socket.connect(this.config.ws),this.socketInited=!0,this.$refs["room"].initRoom();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getUserInfo:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.Api.getUserInfo();case 3:n=e.sent,i=n.isSuccess,a=n.code,o=n.message,s=n.result,i?(t.addUser(s),this.$i18n.locale=this.user.type==this.Global.UserType.TEACHER?"en_US":this.$i18n.locale,document.title=this.$t("document_title"),this.browserCheck(function(){t.user.type==t.Global.UserType.ADMIN?t.checkPageProfile():(t.user.type==t.Global.UserType.TEACHER&&t.startDraw(),t.getClassInfo())})):101001006==a?this.alert.show({icon:"exit",text:this.$t("class_is_over"),label:this.$t("button_leave_label")},function(){window.location.href="/message?code=".concat(a,"&message=").concat(o)}):-1!=[10008].indexOf(a)?(window.location.hash="classover",t.alert.show({icon:"exit",text:this.$t("class_timeout_text"),title:this.$t("class_timeout_title"),label:this.$t("button_leave_label")},function(){t.endTheClass().then(function(e){e&&(window.location.href=e||"/message?code=".concat(a,"&message=").concat(o))})})):this.alert.show({icon:"exit",text:o,label:this.$t("button_leave_label")},function(){window.location.href="/message?code=".concat(a,"&message=").concat(o)});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),browserCheck:function(e){var t=this,n={download:"https://www.uuabc.com/download.html"},i=navigator.userAgent.toLowerCase(),a=/(msie|firefox|chrome|opera|version).*?([\d.]+)/,o=i.match(a);n.name=o[1].replace(/version/,"safari"),n.version=o[2],n.mainVersion=Number(o[2].split(".")[0]),-1!=["chrome"].indexOf(n.name)?"chrome"==n.name&&n.mainVersion>59?(n.supported=!0,this.browser(n),e()):(n.supported=!1,this.browser(n),this.alert.show({icon:"exit",text:this.$t("browser_text",{name:n.name,version:n.version}),label:this.$t("browser_label"),cancellabel:this.$t("browser_download")},e,function(){location.href=n.download,e&&e()})):(n.supported=!1,this.browser(n),this.alert.show({icon:"exit",text:this.$t("browser_text",{name:n.name,version:n.version}),label:this.$t("browser_download"),cancellabel:this.$t("button_leave_label")},function(){location.href=n.download,e&&e()},function(){t.endTheClass().then(function(t){window.location.href=t||'/message?code=0&message="Browser does not support"',e&&e()})}))}}),created:function(){this.getUserInfo()}},yt=Ct,Tt=(n("80793"),Object(W["a"])(yt,m,f,!1,null,"5b89322f",null)),kt=Tt.exports,xt="setConfig",Et="SETRATIO",St={namespaced:!0,state:{ws:"",im:{},appid:"",leaveUrl:"",loginUrl:"",Layout:{ratio:1}},mutations:(i={},Object(Ue["a"])(i,xt,function(e,t){e.ws=t["socket"],e.im=t["im"],e.appid=t["agora_key"],e.leaveUrl=t["leave_url"],e.loginUrl=t["login_url"]}),Object(Ue["a"])(i,Et,function(e,t){e.Layout.ratio=t}),i),actions:(a={},Object(Ue["a"])(a,xt,function(e,t){var n=e.commit;n(xt,t)}),Object(Ue["a"])(a,"setRatio",function(e,t){var n=e.commit;n(Et,t)}),a),getters:{}},$t="SETRATIO",Ot={namespaced:!0,state:{width:1260,height:757,left:43,ratio:1},mutations:Object(Ue["a"])({},$t,function(e,t){e.ratio=t}),actions:{setRatio:function(e,t){var n=e.commit;n($t,t)}},getters:{}},At=n("795b"),jt=n.n(At),It={SETROOM:"setRoom",UPDATE_STAGE:"updateStage",LEAVE:"LEAVE",ENDTHECLASS:"ENDTHECLASS"},Ut={namespaced:!0,state:{roomId:1,courseNum:1,startTime:1,endTime:1,stageIndex:0,isClassOver:!1,hasLeave:!1,teacherNote:"",coursewareName:"",studentNote:"",group_name:null,supported:!0,browser:{}},mutations:(o={},Object(Ue["a"])(o,"browser",function(e,t){e.supported=t.supported,e.browser=t}),Object(Ue["a"])(o,It.SETROOM,function(e,t){var n=t.group_name,i=t.room_id,a=t.course_num,o=t.start_time,s=t.end_time,r=t.teacher_note,c=t.courseware_name,l=t.student_note;e.group_name=n,e.roomId=i,e.courseNum=a,e.startTime=o,e.endTime=s,e.teacherNote=r,e.coursewareName=c,e.studentNote=l}),Object(Ue["a"])(o,It.UPDATE_STAGE,function(e,t){e.stageIndex=t}),Object(Ue["a"])(o,It.LEAVE,function(e){e.hasLeave=!0}),Object(Ue["a"])(o,It.ENDTHECLASS,function(e){e.isClassOver=!0}),o),actions:{browser:function(e,t){var n=e.commit;n("browser",t)},setRoom:function(e,t){var n=e.commit;n(It.SETROOM,t)},updateStage:function(e,t){var n=e.commit;n(It.UPDATE_STAGE,t)},endTheClass:function(e,t){var n=e.commit;return new jt.a(function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(i){var a,o,s,r,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(new Se["a"]).leaveClass(t?0:1);case 2:a=e.sent,o=a.isSuccess,s=a.result,o&&(r=s.redirect_url,c=s.classover,r||n(It.LEAVE),c&&n(It.ENDTHECLASS),i(r));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}},getters:{}},Nt="SETTEACHER",Dt="timerChange",Rt="mergeUser",Pt={namespaced:!0,state:{uuid:"",photo:null,name:"UU-Teacher",id:"",type:2,time:null,online:!1},mutations:(s={},Object(Ue["a"])(s,Nt,function(e,t){e.uuid=t.external_id,e.photo=t.avatar,e.name=t.nickname,e.id=t.user_id,e.type=t.user_type,e.token=C()([e.type,e.id].join(""))}),Object(Ue["a"])(s,Dt,function(e,t){e.time=t}),Object(Ue["a"])(s,Rt,function(e,t){for(var n in t)e[n]=t[n];e.token=C()([e.type,e.id].join(""))}),s),actions:{setTeacher:function(e,t){var n=e.commit;n(Nt,t)},mergeTeacher:function(e,t){var n=e.commit;n(Rt,t)}},getters:{teacherLoaded:function(e){return!!e.user_id},classTime:function(e){return e.time},userName:function(e){return e.nickname}}},Gt=n("5176"),Vt=n.n(Gt),Lt={ADD_USER:"addUser",UPDATE_USER:"updateUser",MERGE_USER:"mergeUser",UPDATE_DRAWING:"updateDrawing",UPDATE_STAGE:"updateStage",UPDATE_ANIMATE:"updateAnimate",UPDATE_MUTED:"updateMuted"},Mt={namespaced:!0,state:{id:0,name:"",type:1,photo:null,token:0,diamond:0,entryTime:0,leaveTime:0,muted:!1,drawing:!0,animate:!1,stage:!1,point:null,online:!1},mutations:(r={},Object(Ue["a"])(r,Lt.ADD_USER,function(e,t){e.id=t["user_id"],e.uuid=t.external_id,e.name=t["nickname"],e.type=t["user_type"],e.photo=t["avatar"],e.token=t["user_type"]+""+t["user_id"],e.diamond=Number(t["diamond"]||0),e.entryTime=t["entry_time"],e.leaveTime=t["leave_time"],e.muted=!1,e.drawing=!0,e.animate=!1,e.stage=!1,e.point=null}),Object(Ue["a"])(r,Lt.UPDATE_USER,function(e,t){for(var n in t){var i=t[n];i.forEach(function(t){if(n==e.id)switch(t.type){case j["a"].MIC:e.muted=2==t.state;break;case j["a"].DRAWING:e.drawing=1==t.state;break;case j["a"].ANIMATE:e.animate=1==t.state;break}})}}),Object(Ue["a"])(r,Lt.MERGE_USER,function(e,t){e=Vt()(e,t)}),Object(Ue["a"])(r,Lt.UPDATE_MUTED,function(e,t){e.muted=t}),Object(Ue["a"])(r,Lt.UPDATE_DRAWING,function(e,t){e.drawing=t}),Object(Ue["a"])(r,Lt.UPDATE_ANIMATE,function(e,t){e.animate=t}),r),actions:{addStudent:function(e,t){var n=e.commit;n(Lt.ADD_USER,t)},updateStudent:function(e,t){var n=e.commit;n(Lt.UPDATE_USER,t)},mergeStudent:function(e,t){var n=e.commit;n(Lt.MERGE_USER,t)},mutedStudent:function(e,t){var n=e.commit;n(Lt.UPDATE_MUTED,t)},drawingStudent:function(e,t){var n=e.commit;n(Lt.UPDATE_DRAWING,t)},animateStudent:function(e,t){var n=e.commit;n(Lt.UPDATE_ANIMATE,t)}},getters:{}},Ht="SETLINECOLOR",zt="STARTINTERACT",Wt="STARTANIMATE",Bt="ENDANIMATE",Ft="STARTWRITE",qt="STARTDRAW",Jt={namespaced:!0,state:{width:800,height:600,fontSize:24,lineColor:"#ff3b2f",lineWidth:3,activeAction:"draw",animateEnable:!1},mutations:(c={},Object(Ue["a"])(c,Ht,function(e,t){e.lineColor=t}),Object(Ue["a"])(c,Wt,function(e){e.animateEnable=!0}),Object(Ue["a"])(c,Bt,function(e){e.animateEnable=!1}),Object(Ue["a"])(c,zt,function(e){e.activeAction="interact"}),Object(Ue["a"])(c,Ft,function(e,t){t&&(e.fontSize=t),e.activeAction="write"}),Object(Ue["a"])(c,qt,function(e,t){t&&(e.lineWidth=t),e.activeAction="draw"}),c),actions:{setLineColor:function(e,t){var n=e.commit;n(Ht,t)},startAnimate:function(e){var t=e.commit;t(Wt)},endAnimate:function(e){var t=e.commit;t(Bt)},startInteract:function(e){var t=e.commit;t(zt)},startWrite:function(e,t){var n=e.commit;n(Ft,t)},startDraw:function(e,t){var n=e.commit;n(qt,t)}}},Kt={ADD:"addUser",SAVE_DEVICE:"saveDevice",POP_LOGIN:"popLogin"},Xt={namespaced:!0,state:{id:"",uuid:null,name:"",type:0,photo:"",token:20,appToken:"",popUp:!1,cameraId:null,microphoneId:null},mutations:(l={},Object(Ue["a"])(l,Kt.ADD,function(e,t){e.id=t["user_id"],e.name=t["nickname"],e.type=t["user_type"],e.photo=t.avatar,e.uuid=t["external_id"],e.appToken=t["token"],e.id?e.token=C()([t["user_type"],t["user_id"]].join("")):e.token=null}),Object(Ue["a"])(l,Kt.POP_LOGIN,function(e,t){e.popUp=!e.id&&t}),Object(Ue["a"])(l,Kt.SAVE_DEVICE,function(e,t){e.cameraId=t.camera,e.microphoneId=t.microphone}),l),actions:(u={},Object(Ue["a"])(u,Kt.ADD,function(e,t){var n=e.commit;n(Kt.ADD,t)}),Object(Ue["a"])(u,Kt.POP_LOGIN,function(e,t){var n=e.commit;n(Kt.POP_LOGIN,t)}),Object(Ue["a"])(u,"saveDevice",function(e,t){var n=e.commit;n(Kt.SAVE_DEVICE,t)}),u),getters:{userType:function(e){return e.type},isLogin:function(e){return!!e.id}}};h["default"].use(E["a"]);var Yt=new E["a"].Store({modules:{config:St,page:Ot,room:Ut,paint:Jt,teacher:Pt,student:Mt,user:Xt}}),Qt=n("a925");function Zt(){var e=n("7bd8"),t={};return e.keys().forEach(function(n){var i=n.match(/([A-Za-z0-9-_]+)\./i);if(i&&i.length>1){var a=i[1];t[a]=e(n)}}),t}h["default"].use(Qt["a"]);var en=new Qt["a"]({locale:"zh_CN",fallbackLocale:"zh_CN",messages:Zt()}),tn=(n("657a"),n("f922")),nn=n("8a87"),an=n("41d1"),on={STUDENT:1,TEACHER:2,PARENT:3,ADMIN:4},sn={install:function(e){e.prototype.Global={UserType:on},e.prototype.videoStream=new tn["b"],e.prototype.videoClient=new tn["a"],e.prototype.course=new window.Course,e.prototype.alert=new nn["a"],e.prototype.splash=new an["a"]}},rn=function(e){function t(){return Object(V["a"])(this,t),Object(Oe["a"])(this,Object(Ae["a"])(t).call(this))}return Object(Ie["a"])(t,e),t}(Se["a"]),cn={install:function(e){e.prototype.Api=new rn}},ln=n("8e76"),un=(n("0da9"),n("6912")),hn={install:function(e){e.prototype.$socket=new un["k"],e.component(un["c"].name,un["c"]),e.component(un["d"].name,un["d"]),e.prototype.$encourage=new un["e"],e.component(un["i"].name,un["i"]),e.prototype.$painter=new un["j"],e.component(un["l"].name,un["l"]),e.prototype.$textbox=new un["m"],e.component(un["a"].name,un["a"]),e.prototype.$clock=new un["b"],e.component(un["f"].name,un["f"]),e.prototype.$groupChat=new un["g"],e.component(un["h"].name,un["h"])}},dn=hn;n("f815");h["default"].config.productionTip=!1,h["default"].use(sn),h["default"].use(dn),h["default"].use(cn),h["default"].use(ln["a"],{enable:!1}),h["default"].use(p.a),window.vm=new h["default"]({store:Yt,i18n:en,render:function(e){return e(kt)}}).$mount("#app")},4790:function(e,t,n){},"4f7f":function(e,t,n){"use strict";var i=n("93db"),a=n.n(i);a.a},"4ffa":function(e,t,n){},"67a0":function(e){e.exports={document_title:"Double Teachers",which_page:"page {page}",browser_text:'The browser you\'re using currently is {name} : {version} , which does not meet our requirement. Please install Chrome (version 59 or above). Click on "details" to enter the download page.',browser_label:"Continue to use",browser_download:"Download it now!",autoplay_text:"The browser needs your authorization to support the classroom.",autoplay_label:"Authorize",class_is_over:"Class is Over",leave_the_class:"You have exited the classroom",alert_title_leave_classroom:"class over",alert_text_leave_classroom:"Are you sure the class is over?",alert_title_refresh_classroom:"refresh",alert_text_refresh_classroom:"Do you want to refresh the current page?",button_label:"confirm",button_leave_label:"leave",button_cancel_label:"cancel",class_timeout_title:"Class Time is Over",class_timeout_text:"Because the class has timed out, system has shut down the classroom!",alert_error_refresh_label:"refresh",alert_error_banned_text:"You might have logged into multiple browsers. Please close other browsers and refresh to enter.",alert_offline_text:"You have logged on to other devices and the client is offline.",alert_connection_failed_text:'Something\'s wrong with the classroom.<br/>Please contact support team <br/>on Skype ("Aaron UU" - search with teacher.fm@uuabc.com) <br/>or Wechat ("Aaron UU"- search with uuabchelper)!',alert_error_refresh_text:"Something's wrong with the classroom. Try refreshing!",splash_socket_reconnect:"Connection failed, retry ",splash_open_device:"Enable cameras and microphones",splash_read_device:"Read user devices",splash_init_local_video:"Loading camera and microphone",splash_create_local_video:"Video Image Enablation Completion",splash_video_init:"Video init",splash_video_connect:"Video Connection",splash_video_pub:"Publishing Video",splash_video_sub:"Start subscribing to video streams",splash_video:"Released successfully",splash_complated:"Enter successfully",video_camera:"Camera",video_microphone:"Microphone",video_setter_title:"setting",video_setter_label:"confirm",video_device_no_title:"device not found",video_device_no_text:"No cameras, microphones <br> Students can not see you, you can not hear each other,<br> there is no way to class,Check it and go into class~~~",video_device_no_cam_title:"no camera",video_device_no_cam_text:"No camera has been detected. <br>Please check whether there's any camera connected <br> and refresh the classroom.",video_device_no_mic_title:"no microphone",video_device_no_mic_text:"No microphone has been detected. <br>Please check whether there's any microphone connected <br> and refresh the classroom.",video_change_error_title:"failed",video_change_error_text:"The current device failed to start. Please refresh and retry",brower_open_device:"Turn on the camera and microphone",brower_notfound:"Fail to turn on your camera and microphone. <br/> Please close the browser and re-enter this classroom.",brower_updated:"Fail to turn on your camera and microphone, Upgrade the browser to the latest version!",brower_allow_tip:"Please click on [allow] to use camera and microphone to normal class ~",brower_allow_error:"Please check your browser setting if your camera or microphone has no permission to access. Camera and microphone will work only after you allow them to use.",course_page_first:"This is the first page.",course_page_last:"This is the last page.",course_page_error:"Error page number",course_error:"Not getting the supporting courseware",socket_reconnect:"Offline & Re-connecting...  Please wait.",socket_connect_faild:"Connection failure, denial of entry",room_course_num:"Course number",room_course_duration:"Duration {courseDuration} mins",classnote:"Please read this Classnote: <h6>Hi</h6>{teacherNote}",support_title:"UUABC Support",support_send:"Send",support_placeholder:"Type a message here...",support_no_message:"Blank message cannnot be sent"}},"689b":function(e,t,n){"use strict";var i=n("85f9"),a=n.n(i);a.a},"6ce8":function(e,t,n){"use strict";var i=n("de56"),a=n.n(i);a.a},7091:function(e,t,n){},"7bd8":function(e,t,n){var i={"./en_US.json":"67a0","./zh_CN.json":"f47f"};function a(e){var t=o(e);return n(t)}function o(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="7bd8"},"7f87":function(e,t,n){"use strict";var i=n("4790"),a=n.n(i);a.a},80793:function(e,t,n){"use strict";var i=n("9637"),a=n.n(i);a.a},"85f9":function(e,t,n){},"874b":function(e,t,n){},"93db":function(e,t,n){},9581:function(e,t,n){"use strict";var i=n("4ffa"),a=n.n(i);a.a},9637:function(e,t,n){},a0e1:function(e,t,n){},a7bf:function(e,t,n){},a9b2:function(e,t,n){"use strict";var i=n("874b"),a=n.n(i);a.a},b45d:function(e,t,n){"use strict";var i=n("c857"),a=n.n(i);a.a},b5f5:function(e,t,n){"use strict";var i=n("a0e1"),a=n.n(i);a.a},c6b9:function(e,t,n){"use strict";var i=n("7091"),a=n.n(i);a.a},c857:function(e,t,n){},d5b3:function(e,t,n){e.exports=n.p+"static/img/video_tip.8abf209e.png"},de56:function(e,t,n){},f47f:function(e){e.exports={document_title:"双师教室",which_page:"第{page}页",browser_text:"您当前使用的是 {name} : {version} 浏览器，不符合设备要求，请使用59版以上谷歌浏览器上课",browser_label:"坚持使用",browser_download:"去下载",autoplay_text:"发现你的浏览器有些特别，要“点我”一下才可以开启上课哦~",autoplay_label:"点我",class_is_over:"这节课下课啦～",leave_the_class:"您已退出教室~",alert_title_leave_classroom:"离开教室",alert_text_leave_classroom:"离开后,别忘记回来哦！",alert_title_refresh_classroom:"刷新",alert_text_refresh_classroom:"您想要刷新当前页吗？",button_label:"确认",button_leave_label:"离开",button_cancel_label:"取消",class_timeout_title:"课程已经结束",class_timeout_text:"由于课程严重超时，系统已自动关闭教室！",alert_error_refresh_label:"刷新",alert_error_banned_text:"您可能在多个浏览器上登录，请检查关闭其它浏览器，刷新页面重新进入。",alert_offline_text:"您已在其它设备上登录,当前客户端已经下线",alert_connection_failed_text:"咦？教室出错了呢<br/>快联系我们的服务人员帮您解决吧！<br/>400-163-6161",alert_error_refresh_text:"小U发现您当前的教室有些异常呦~<br/>快刷新下教室试试吧！<br/>400-163-6161",splash_socket_reconnect:"连接失败，重试中 ",splash_open_device:"启用本地设备",splash_read_device:"读取用户设备",splash_init_local_video:"初始化本地视频",splash_create_local_video:"本地视频流创建成功",splash_video_init:"初始化视频服务",splash_video_connect:"视频服务连接中",splash_video_pub:"发送视频中",splash_video_sub:"准备订阅视频流",splash_video:"视频发送成功",splash_complated:"进入成功",video_camera:"摄像头",video_microphone:"麦克风",video_setter_title:"设置",video_setter_label:"确认设置",video_device_no_title:"设备未找到",video_device_no_text:"没有摄像头/麦克风<br>别人看不到你，你听不到对方的声音，<br>不能上课，请检查一下再去上课~",video_device_no_cam_title:"无摄像头",video_device_no_cam_text:"未检测到摄像头。<br>请检查是否连接了摄像头<br>并刷新教室。",video_device_no_mic_title:"无麦克风",video_device_no_mic_text:"未检测到麦克风。<br>请检查是否连接了麦克风<br>并刷新教室。",video_change_error_title:"设备切换失败",video_change_error_text:"当前设备启用失败,请刷新重试",brower_open_device:"打开摄像头和麦克风",brower_notfound:"启用摄像头和麦克风异常，请关闭浏览器，重新打开!",brower_updated:"启用摄像头和麦克风异常, 请升级浏览器到最新版本!",brower_allow_tip:"请点击【允许】使用摄像和麦克风，才能正常上课~",brower_allow_error:"摄像头或麦克风访问被拒绝 <br> 请检查浏览器设置... <br>摄像头和麦克风同时【允许】后 <br>才可以正常上课~",brower_undefined:"未定义错误",course_page_first:"已经是首页",course_page_last:"已经是最后一页",course_page_error:"错误的页码",course_error:"不支持的课件",socket_reconnect:"消息断开,正在重连...",socket_connect_faild:"连接失败,无法进入",room_course_num:"课程编号",room_course_duration:"课时长{courseDuration}分钟",classnote:"跟{teacherName}一起学习 {coursewareName} 课程，好好表现哦～ <h6>课前提醒:</h6>{studentNote}",support_title:"与{name}私聊",support_send:"发送",support_placeholder:"请输入内容...",support_no_message:"输入内容不能为空"}}});
//# sourceMappingURL=double-teachers.49d2644d.js.map