<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文件上传</title>
    <style>
        .custom-file-container__image-multi-preview {}
        
        .custom-file-container__image-multi-preview {
            width: 320px;
            height: 240px;
            display: inline-block;
            background-size: 100% 100%;
        }
    </style>
</head>

<body>
    <div class="custom-file-container" data-upload-id="myUniqueUploadId">
        <div>
            上传文件 <a href="javascript:void(0)" class="custom-file-container__image-clear" title="Clear Image">&times;</a>
        </div>

        <div class="custom-file-container__custom-file">
            <input type="file" class="custom-file-container__custom-file__custom-file-input" accept="*" multiple aria-label="Choose File" />
            <input type="hidden" name="MAX_FILE_SIZE" value="10485760" />
            <span class="custom-file-container__custom-file__custom-file-control"></span>
        </div>

        <div class="custom-file-container__image-preview"></div>
    </div>

    <div>
        <button onclick="emulateInputSelection()">选择文件</button>
        <button onclick="clearPreviewPanel()">清理</button>
        <button onclick="cachedFileArray()">文件列表</button>
        <button onclick="currentFileCount()">文件数量</button>
    </div>

    <script src="https://unpkg.com/file-upload-with-preview@4.1.0/dist/file-upload-with-preview.min.js"></script>
    <script>
        var upload = new FileUploadWithPreview("myUniqueUploadId", {
            showDeleteButtonOnImages: true,
            text: {
                chooseFile: "请选择文件....",
                browse: "Custom Button Copy",
                selectedCount: "文件数量:${ n }",
            },
            images: {
                //占位符图像
                baseImage: null, //替换占位符图像。
                backgroundImage: null, //将背景图像替换为图像网格。
                successFileAltImage: null, //替换成功的备用文件上传图像。
                successPdfImage: null, //替换成功的PDF上传图像。
                successVideoImage: null, //替换成功的视频上传图像。
            },
            // 预加载文件列表，自动上传
            presetFiles: [
                "/assets/image.jpg",
                "https://images.unsplash.com/photo-1557090495-fc9312e77b28?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=668&q=80",
            ],
            showDeleteButtonOnImages: true, //预览区删除按钮
            maxFileCount: 0 // 文件数量无限制
        });

        // upload.deleteFileAtIndex(index);//删除文件
        // upload.refreshPreviewPanel(); //刷新预览面板

        // 以编程方式打开图像浏览器
        function emulateInputSelection() {
            upload.emulateInputSelection()
        }

        // 将cachedFileArray图像填充为文件对象
        function addFiles() {
            // upload.addFiles([...File]);
        }

        // 清除 cachedFileArray
        function clearPreviewPanel() {
            upload.clearPreviewPanel()
        }

        // 使用当前刷新图像预览面板 cachedFileArray
        function refreshPreviewPanel() {
            upload.refreshPreviewPanel()
        }

        //选择的文件列表
        function cachedFileArray() {
            console.log("选择的文件列表", upload.cachedFileArray);
        }

        //选择的文件数量
        function currentFileCount() {
            console.log("选择的文件数量", upload.currentFileCount);
            alert("选择的文件数量" + upload.currentFileCount);
        }
    </script>

</body>

</html>