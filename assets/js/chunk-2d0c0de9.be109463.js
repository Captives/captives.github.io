(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0de9"],{"442e":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-main",[t("h2",[e._v("Web SQL Database")]),t("p",[e._v(" 在数据库中处理大量结构化数据，html5引入Web SQL Database概念，它使用 SQL 来操纵客户端数据库的 API，这些 API 是异步的，规范中使用的是SQLlite（SQL后端）。 ")]),t("h4",[e._v("三个核心方法")]),t("ul",[t("li",[e._v(" 1、openDatabase：这个方法使用现有数据库或创建新数据库创建数据库对象。 ")]),t("li",[e._v("2、transaction：这个方法允许我们根据情况控制事务提交或回滚。")]),t("li",[e._v("3、executeSql：这个方法用于执行真实的SQL查询。")])]),t("h4",[e._v("新建/打开数据库")]),t("el-row",[e._v(" openDatabase方法可以打开已经存在的数据库，不存在则创建： "),t("vue-code",[t("pre",{attrs:{lang:"javascript"}},[e._v("var dataBase = window.openDatabase(database_name, database_version, database_displayname, database_size);")])]),t("span",[e._v("参数分别为：数据库名、版本号、描述、数据库大小。")])],1),t("el-row",{staticStyle:{padding:"20px 0px"}},[t("el-form",{attrs:{inline:!0,model:e.dataBase,"label-width":"60px"}},[t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{attrs:{placeholder:"数据库名称",disabled:e.dataBase.connected},model:{value:e.dataBase.name,callback:function(a){e.$set(e.dataBase,"name",a)},expression:"dataBase.name"}})],1),t("el-form-item",{attrs:{label:"版本号"}},[t("el-input",{attrs:{placeholder:"版本号",disabled:e.dataBase.connected},model:{value:e.dataBase.version,callback:function(a){e.$set(e.dataBase,"version",a)},expression:"dataBase.version"}})],1),t("el-form-item",{attrs:{label:"描述"}},[t("el-input",{attrs:{placeholder:"数据库名",disabled:e.dataBase.connected},model:{value:e.dataBase.desc,callback:function(a){e.$set(e.dataBase,"desc",a)},expression:"dataBase.desc"}})],1),t("el-form-item",{attrs:{label:"大小"}},[t("el-input",{attrs:{placeholder:"数据库名",disabled:e.dataBase.connected},model:{value:e.dataBase.size,callback:function(a){e.$set(e.dataBase,"size",a)},expression:"dataBase.size"}})],1),t("el-form-item",[e.dataBase.connected?t("el-button",{attrs:{type:"danger"},on:{click:e.unConnectHandler}},[e._v("断开数据库")]):t("el-button",{attrs:{type:"primary"},on:{click:e.connectHandler}},[e._v("连接数据库")])],1)],1)],1),t("h4",[e._v("插入/查询数据操作")]),t("el-row",[t("el-form",{attrs:{inline:!0,model:e.table,"label-width":"60px"}},[t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{attrs:{placeholder:"名称"},model:{value:e.table.name,callback:function(a){e.$set(e.table,"name",a)},expression:"table.name"}})],1),t("el-form-item",{attrs:{label:"地址"}},[t("el-input",{attrs:{placeholder:"地址"},model:{value:e.table.address,callback:function(a){e.$set(e.table,"address",a)},expression:"table.address"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.insertHandler}},[e._v("插入数据")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"180"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t("el-table-column",{attrs:{prop:"address",label:"地址"}})],1)],1)],1)},n=[],l=(t("99af"),t("b0c0"),{name:"OpenDatabase",data:function(){return{db:null,dataBase:{name:"websql",version:1,desc:"4M Web DB",size:4194304,connected:!1},table:{name:"",address:""},tableData:[]}},methods:{connectHandler:function(){var e=this,a=this;this.db=window.openDatabase(this.dataBase.name+this.dataBase.version,this.dataBase.version,this.dataBase.desc,this.dataBase.size,(function(a){e.dataBase.connected=!0})),this.dataBase.connected=!0,console.log(this.db),this.db.transaction((function(e){e.executeSql("CREATE TABLE IF NOT EXISTS demos (id, name, address)"),a.queryTableDataList()}))},insertHandler:function(){var e=this,a="INSERT INTO demos (id, name, address) VALUES (".concat(Date.now(),", ").concat(this.table.name,", ").concat(this.table.address,")");this.db.transaction((function(t){t.executeSql(a),e.queryTableDataList()}))},queryTableDataList:function(){var e=this;e.tableData=[],this.db.transaction((function(a){a.executeSql("SELECT * FROM demos",[],(function(a,t){console.log(t.rows);for(var s=0;s<t.rows.length;s++)e.tableData.push(t.rows[s])}))}))},unConnectHandler:function(){this.dataBase.connected=!1}}}),d=l,o=t("2877"),i=function(e){e.options.__source="src/guide/views/web/WebSQL.vue"},r=i,c=Object(o["a"])(d,s,n,!1,null,null,null);"function"===typeof r&&r(c);a["default"]=c.exports}}]);