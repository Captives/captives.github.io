(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6294"],{9821:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",{staticClass:"center"},[n("el-row",{attrs:{gutter:50}},[n("el-col",{staticClass:"center",attrs:{xs:24,sm:24,md:12}},[n("el-divider",{attrs:{"content-position":"left"}},[e._v("Session")]),n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"Session:"}},[n("el-input",{model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}},[n("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-user"},on:{click:e.joinSession},slot:"append"},[e._v("进入")])],1)],1)],1)],1),n("el-col",{staticClass:"center",attrs:{xs:24,sm:24,md:12}},[n("el-divider",{attrs:{"content-position":"left"}},[e._v("Local")]),n("canvas",{ref:"canvas",staticClass:"video-item"})],1)],1),n("el-row",{attrs:{gutter:50}},[n("el-col",{staticClass:"center",attrs:{span:6}},[n("el-divider",[e._v("Session")])],1)],1)],1)},i=[],o=(n("d3b7"),n("3d9c")),a=n("bc3a"),r=n.n(a),c="https://local.uuabc.com:4443",l="MY_SECRET",u=function(e){var t={method:"POST",url:c+"/api/sessions",data:JSON.stringify({customSessionId:e}),headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+l),"Content-Type":"application/json"}};return console.log(">>>",t.method,t),new Promise((function(n,s){r.a.post(t).then((function(e){return n(e.id)}))["catch"]((function(t){409===t.status?n(e):(console.warn("未连接到OpenVidu服务器。这可能是以下位置的证书错误 "+c),window.confirm("未连接到OpenVidu服务器。这可能是以下位置的证书错误"+c+'; 单击“确定”导航并接受它。如果没有显示证书警告，请检查OpenVidu服务器是否已在 "'+c+'"'))}))}))},d=function(e){return new Promise((function(t,n){r.a.post({method:"post",url:c+"/api/tokens",data:JSON.stringify({session:e}),headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+l),"Content-Type":"application/json"}}).then((function(e){return t(e.id)}))["catch"]((function(e){return n(e)}))}))},h={name:"HelloWorld",data:function(){return{userName:"SessionA3",OV:null,session:null}},destroyed:function(){this.leaveSession()},methods:{joinSession:function(){var e=this;this.OV=new o["OpenVidu"],this.session=this.OV.initSession(),this.session.on("streamCreated",(function(t){var n=t.stream;e.session.subscribe(n,"subscriber")})),this.getToken(this.userName).then((function(t){e.session.connect(t).then((function(){var t=e.OV.initPublisher("publisher");e.session.publish(t)}))["catch"]((function(e){console.log("There was an error connecting to the session:",e.code,e.message)}))}))},leaveSession:function(){this.session&&this.session.disconnect()},getToken:function(e){return u(e).then((function(e){return d(e)}))}}},p=h,f=n("2877"),m=Object(f["a"])(p,s,i,!1,null,null,null);t["default"]=m.exports}}]);