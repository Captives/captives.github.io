(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03f85312"],{"0011":function(e,t,n){},1276:function(e,t,n){"use strict";var i=n("d784"),o=n("44e7"),a=n("825a"),r=n("1d80"),s=n("4840"),l=n("8aa5"),u=n("50c4"),c=n("14c3"),d=n("9263"),v=n("d039"),h=[].push,p=Math.min,m=4294967295,f=!v((function(){return!RegExp(m,"y")}));i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(r(this)),a=void 0===n?m:n>>>0;if(0===a)return[];if(void 0===e)return[i];if(!o(e))return t.call(i,e,a);var s,l,u,c=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,f=new RegExp(e.source,v+"g");while(s=d.call(f,i)){if(l=f.lastIndex,l>p&&(c.push(i.slice(p,s.index)),s.length>1&&s.index<i.length&&h.apply(c,s.slice(1)),u=s[0].length,p=l,c.length>=a))break;f.lastIndex===s.index&&f.lastIndex++}return p===i.length?!u&&f.test("")||c.push(""):c.push(i.slice(p)),c.length>a?c.slice(0,a):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=r(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,o,n):i.call(String(o),t,n)},function(e,o){var r=n(i,e,this,o,i!==t);if(r.done)return r.value;var d=a(e),v=String(this),h=s(d,RegExp),b=d.unicode,g=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"y":"g"),y=new h(f?d:"^(?:"+d.source+")",g),x=void 0===o?m:o>>>0;if(0===x)return[];if(0===v.length)return null===c(y,v)?[v]:[];var w=0,j=0,O=[];while(j<v.length){y.lastIndex=f?j:0;var _,B=c(y,f?v:v.slice(j));if(null===B||(_=p(u(y.lastIndex+(f?0:j)),v.length))===w)j=l(v,j,b);else{if(O.push(v.slice(w,j)),O.length===x)return O;for(var k=1;k<=B.length-1;k++)if(O.push(B[k]),O.length===x)return O;j=w=_}}return O.push(v.slice(w)),O}]}),!f)},2734:function(e,t,n){},2786:function(e,t,n){"use strict";var i=n("2734"),o=n.n(i);o.a},"44e7":function(e,t,n){var i=n("861d"),o=n("c6b6"),a=n("b622"),r=a("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==o(e))}},"4bb5":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("2fe1"),o=n("2f62"),a=c("computed",o["e"]),r=c("computed",o["c"]),s=c("methods",o["b"]),l=c("methods",o["d"]);function u(e,t){function n(t){function n(n,i){if("string"===typeof i){var o=i,a=n;return t(o,{namespace:e})(a,o)}var r=n,s=v(i||{},{namespace:e});return t(r,s)}return n}return t?(console.warn("[vuex-class] passing the 2nd argument to `namespace` function is deprecated. pass only namespace string instead."),n(t)):{State:n(a),Getter:n(r),Mutation:n(l),Action:n(s)}}function c(e,t){function n(n,o){return Object(i["a"])((function(i,a){i[e]||(i[e]={});var r,s=(r={},r[a]=n,r);i[e][a]=void 0!==o?t(o,s)[a]:t(s)[a]}))}function o(e,t){if("string"===typeof t){var i=t,o=e;return n(i,void 0)(o,i)}var a=d(t),r=e;return n(r,a)}return o}function d(e){var t=e&&e.namespace;if("string"===typeof t)return"/"!==t[t.length-1]?t+"/":t}function v(e,t){var n={};return[e,t].forEach((function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))})),n}},"66d5":function(e,t,n){"use strict";var i=n("0011"),o=n.n(i);o.a},8335:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{ref:"page",staticClass:"page",style:e.domStyle},[n("el-header",[e._v(" 顶部控制 ")]),n("el-container",[n("el-aside",{staticClass:"video-list",attrs:{width:"308"}},e._l(e.list,(function(t){return n("div",{key:t.id,staticClass:"video-item"},[t.stage?n("VideoToolBar",{attrs:{label:t.label,value:t}}):e._e(),n("VideoToolBar",{class:{stage:t.stage,move:t.stage&&!0},style:e.anchor(t),attrs:{label:t.label,value:t},on:{move:e.videoBarMoveHandler}},[n("p",{staticStyle:{"text-align":"center",margin:"0"}},[e._v(e._s(e._f("toString")(e.anchor(t))))]),n("el-button",{staticClass:"stage-button",attrs:{type:t.stage?"danger":"primary",circle:"",icon:t.stage?"el-icon-bottom-left":"el-icon-top-right"},on:{click:function(n){return e.stageChangeHandler(t)}}})],1)],1)})),0),n("el-aside",{ref:"white-board",staticClass:"stage-body white-board",attrs:{width:"800"}},[e._v(" 舞台区域 "),e._l(e.list,(function(t){return[t.stage?n("p",{key:t.id},[e._v(e._s(t.label)+" - "),n("b",{staticStyle:{color:"red"}},[e._v(e._s(t.position))])]):e._e()]}))],2),n("el-main",[e._v(" 聊天扩展区 ")])],1),n("el-footer",[n("marquee",[e._v("底部占位")])],1)],1)},o=[],a=(n("a15b"),n("a9e3"),n("ac1f"),n("5319"),n("1276"),n("d4ec")),r=n("bee2"),s=n("262e"),l=n("2caf"),u=n("9ab4"),c=n("1b40"),d=n("4bb5"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"video-bar",staticClass:"video-bar"},[e._t("default"),n("p",{staticClass:"user-name"},[e._v(e._s(e.label))])],2)},h=[],p=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.visible=!1,e.mouseDown=!1,e.emitTime=Date.now(),e}return Object(r["a"])(n,[{key:"mounted",value:function(){this.videoBar.addEventListener("mouseenter",this.mouseEnterHandler.bind(this),!1),this.videoBar.addEventListener("mouseleave",this.mouseLeaveHandler.bind(this),!1),this.videoBar.addEventListener("mousedown",this.mouseDownHandler.bind(this),!1)}},{key:"mouseEnterHandler",value:function(){this.visible=!0}},{key:"mouseLeaveHandler",value:function(){this.visible=!1}},{key:"mouseDownHandler",value:function(e){this.mouseDown=this.value.stage&&!0,this.mouseDown&&(this.videoBar.style["zIndex"]="10",this.$emit("movestart",e),document.addEventListener("mousemove",this.mouseMoveHandler.bind(this),!0),document.addEventListener("mouseup",this.mouseUpHandler.bind(this),!1),document.addEventListener("mouseleave",this.mouseUpHandler.bind(this),!1))}},{key:"mouseMoveHandler",value:function(e){this.mouseDown&&Date.now()-this.emitTime>20&&(this.emitTime=Date.now(),this.$emit("move",e,this.value,this.videoBar.getBoundingClientRect()))}},{key:"mouseUpHandler",value:function(e){this.mouseDown&&(this.videoBar.style["zIndex"]="1",console.log("离开可视区域"),this.mouseDown=!1,this.$emit("moveend",e),document.removeEventListener("mousemove",this.mouseMoveHandler,!0),document.removeEventListener("mouseup",this.mouseUpHandler,!1),document.removeEventListener("mouseleave",this.mouseUpHandler,!1))}}]),n}(c["l"]);Object(u["a"])([Object(c["f"])()],p.prototype,"label",void 0),Object(u["a"])([Object(c["f"])()],p.prototype,"value",void 0),Object(u["a"])([Object(c["j"])("video-bar")],p.prototype,"videoBar",void 0),p=Object(u["a"])([Object(c["a"])({name:"VideoToolBar"})],p);var m=p,f=m,b=(n("2786"),n("2877")),g=function(e){e.options.__source="src/live/components/VideoToolBar.vue"},y=g,x=Object(b["a"])(f,v,h,!1,null,"1c4eb120",null);"function"===typeof y&&y(x);var w=x.exports,j=Object(d["a"])("RoomStore"),O=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.list=[{label:"video 1",id:"v1",stage:!1,position:null},{label:"video 2",id:"v2",stage:!1,position:null},{label:"video 3",id:"v3",stage:!1,position:null},{label:"video 4",id:"v4",stage:!1,position:null},{label:"video 5",id:"v5",stage:!1,position:null},{label:"video 6",id:"v6",stage:!1,position:null},{label:"video 7",id:"v7",stage:!1,position:null},{label:"video 8",id:"v8",stage:!1,position:null},{label:"video 9",id:"v9",stage:!1,position:null},{label:"video 10",id:"v10",stage:!1,position:null},{label:"video 11",id:"v11",stage:!1,position:null}],e}return Object(r["a"])(n,[{key:"roomRatioChange",value:function(e){var t=this;setTimeout((function(){return t.$forceUpdate()}),10)}},{key:"mounted",value:function(){this.onResize({element:this.$el,whiteBoard:this.whiteBoard.$el,padding:20}),window.addEventListener("resize",this.onResize.bind(this,{element:this.$el,whiteBoard:this.whiteBoard.$el,padding:20}),!1)}},{key:"stageChangeHandler",value:function(e){e.stage=!e.stage}},{key:"videoBarMoveHandler",value:function(e,t,n){if(console.log("move",e.x,e.y,t,n),t.stage){var i=this.room.ratio,o=this.room.wrapperRect,a=this.room.whiteBoardRect,r={x:0,y:0};r.x=e.x-n.width/2,r.y=e.y-n.height/2,r.x<=a.x&&(r.x=a.x),r.y<=a.y&&(r.y=a.y),r.x+n.width>=a.x+a.width&&(r.x=a.x+a.width-n.width),r.y+n.height>=a.y+a.height&&(r.y=a.y+a.height-n.height),console.log("有效坐标：%sx%s, 页边距：%sx%s, 舞台边距：%sx%s",Math.round(r.x),Math.round(r.y),Math.round(o.x),Math.round(o.y),Math.round(a.x),Math.round(a.y));var s=r.y-o.y-(a.y-o.y),l=r.x-o.x-(a.x-o.x),u=Math.round(l/i),c=Math.round(s/i);console.log("800x600 位置坐标",u,c),t.position=[u,c].join("x")}}},{key:"anchor",get:function(){var e=this;return function(t){var n=(t.position||"0x0").split("x"),i=e.room.wrapperRect,o=e.room.whiteBoardRect;if(i&&o&&t.stage){var a={x:(o.x-i.x)/e.room.ratio,y:(o.y-i.y)/e.room.ratio};return{left:Number(n[0])+a.x+"px",top:Number(n[1])+a.y+"px"}}return null}}}]),n}(c["l"]);Object(u["a"])([Object(c["j"])()],O.prototype,"page",void 0),Object(u["a"])([Object(c["j"])("white-board")],O.prototype,"whiteBoard",void 0),Object(u["a"])([j.State((function(e){return e}))],O.prototype,"room",void 0),Object(u["a"])([j.Getter("domStyle")],O.prototype,"domStyle",void 0),Object(u["a"])([j.Action("onResize")],O.prototype,"onResize",void 0),Object(u["a"])([Object(c["m"])("room.ratio")],O.prototype,"roomRatioChange",null),O=Object(u["a"])([Object(c["a"])({name:"LiveRoom",components:{VideoToolBar:w},filters:{toString:function(e){return e?(e.left=Math.round(e.left.replace("px","")),e.top=Math.round(e.top.replace("px","")),e.left+"x"+e.top):""}}})],O);var _=O,B=_,k=(n("66d5"),function(e){e.options.__source="src/live/views/LiveRoom.vue"}),E=k,H=Object(b["a"])(B,i,o,!1,null,"2f3a7a4c",null);"function"===typeof E&&E(H);t["default"]=H.exports}}]);