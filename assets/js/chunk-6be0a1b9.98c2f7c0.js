(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6be0a1b9"],{"101d":function(t,e,i){},"159b":function(t,e,i){var r=i("da84"),a=i("fdbc"),n=i("17c2"),s=i("9112");for(var o in a){var c=r[o],u=c&&c.prototype;if(u&&u.forEach!==n)try{s(u,"forEach",n)}catch(h){u.forEach=n}}},"17c2":function(t,e,i){"use strict";var r=i("b727").forEach,a=i("a640"),n=i("ae40"),s=a("forEach"),o=n("forEach");t.exports=s&&o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1d1c":function(t,e,i){var r=i("23e7"),a=i("83ab"),n=i("37e8");r({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperties:n})},"1dde":function(t,e,i){var r=i("d039"),a=i("b622"),n=i("2d00"),s=a("species");t.exports=function(t){return n>=51||!r((function(){var e=[],i=e.constructor={};return i[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4160:function(t,e,i){"use strict";var r=i("23e7"),a=i("17c2");r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"4ac1":function(t,e,i){"use strict";var r=i("9ac7"),a=i.n(r);a.a},"4de4":function(t,e,i){"use strict";var r=i("23e7"),a=i("b727").filter,n=i("1dde"),s=i("ae40"),o=n("filter"),c=s("filter");r({target:"Array",proto:!0,forced:!o||!c},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},5239:function(t,e,i){},5530:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("a4d3"),i("4de4"),i("4160"),i("1d1c"),i("7a82"),i("e439"),i("dbb4"),i("b64b"),i("159b");var r=i("ade3");function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}},"60db":function(t,e,i){"use strict";var r=i("5239"),a=i.n(r);a.a},"7a82":function(t,e,i){var r=i("23e7"),a=i("83ab"),n=i("9bf2");r({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperty:n.f})},8418:function(t,e,i){"use strict";var r=i("c04e"),a=i("9bf2"),n=i("5c6c");t.exports=function(t,e,i){var s=r(e);s in t?a.f(t,s,n(0,i)):t[s]=i}},8556:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",[i("el-container",[i("el-header",[i("span",{attrs:{type:"success"}},[t._v("房间："+t._s(t.tdvalue))]),i("span",[t._v("当前用户:"+t._s(t.user.name)+" | "+t._s(t.user.uid))]),i("i",{staticClass:"icon-button el-icon-more",staticStyle:{right:"60px"},on:{click:function(e){t.drawerVisible=!0}}}),i("i",{staticClass:"icon-button el-icon-switch-button",staticStyle:{right:"0"},on:{click:t.logoutHandler}})]),i("el-container",[i("el-aside",{staticStyle:{"text-align":"center"},attrs:{width:"320px"}},[t.localStream?i("VideoPanel",{attrs:{stream:t.localStream}},[i("VideoPlayer",{attrs:{title:t.user.name,stream:t.localStream,muted:!0,range:t.stageRange}})],1):t._e(),t._l(t.streamList,(function(e){return i("VideoPanel",{key:e.id,attrs:{stream:e.stream}},[i("VideoPlayer",{attrs:{title:e.name,stream:e.stream,range:t.stageRange}})],1)}))],2),i("el-main",{ref:"stage"},[t._v("主面板")])],1)],1),i("el-drawer",{attrs:{visible:t.drawerVisible,withHeader:!1,direction:"rtl","custom-class":"slide-drawer","modal-append-to-body":!1},on:{"update:visible":function(e){t.drawerVisible=e}}},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("用户列表")]),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList,border:""}},[i("el-table-column",{attrs:{prop:"id",label:"UID"}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"}})],1),i("el-divider",{attrs:{"content-position":"left"}},[t._v("视频列表")]),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.streamList,border:""}},[i("el-table-column",{attrs:{prop:"id",label:"UID"}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"}}),i("el-table-column",{attrs:{prop:"streamId",label:"媒体流地址"}})],1)],1)],1)},a=[],n=(i("b0c0"),i("5530")),s=i("d4ec"),o=i("bee2"),c=i("262e"),u=i("2caf"),h=i("9ab4"),l=i("60a3"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-item"},[i("div",{staticClass:"video-tool-bar"},[t._v("下台")]),t._t("default")],2)},f=[],v=function(t){Object(c["a"])(i,t);var e=Object(u["a"])(i);function i(){return Object(s["a"])(this,i),e.apply(this,arguments)}return i}(l["f"]);Object(h["a"])([Object(l["c"])({type:MediaStream,default:null})],v.prototype,"stream",void 0),v=Object(h["a"])([Object(l["a"])({name:"VideoPanel"})],v);var b=v,m=b,y=(i("f1cc"),i("2877")),g=Object(y["a"])(m,d,f,!1,null,"677d728a",null),p=g.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"videoPanel",class:[t.drag.moving?t.size:"",t.drag.moving?"video-item move":"video-item"]},[i("video",{attrs:{autoplay:""},domProps:{muted:t.muted,srcObject:t.stream}}),t._t("default"),i("p",{ref:"titleBar",staticClass:"title-bar"},[i("em",[t._v(t._s(t.title))]),t.drag.moving?i("i",{staticClass:"el-icon-full-screen",on:{click:t.videoResizeHandler}}):t._e(),i("i",{class:[t.drag.moving?"el-icon-news":"el-icon-copy-document"],on:{click:t.videoMoveHandler}})]),i("ul",[i("li",[t._v("startMatrix = "+t._s(t.drag.startMatrix))]),i("li",[t._v("endMatrix = "+t._s(t.drag.endMatrix))]),i("li",[t._v("initStartMatrix = "+t._s(t.drag.initStartMatrix))])])],2)},O=[],j=(i("99af"),i("c0b6"),function(){function t(e,i,r,a,n,o){Object(s["a"])(this,t),this.a=e||1,this.b=i||0,this.c=r||0,this.d=a||1,this.x=n||0,this.y=o||0}return Object(o["a"])(t,[{key:"equals",value:function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.x===t.x&&this.y===t.y}},{key:"identity",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.x=0,this.y=0}},{key:"clone",value:function(){return new t(this.a,this.b,this.c,this.d,this.x,this.y)}},{key:"copyFrom",value:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.x=t.x,this.y=t.y}},{key:"rotate",value:function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a;this.a=e*this.a-i*this.b,this.b=i*r+e*this.b,r=this.c,this.c=e*this.c-i*this.d,this.d=i*r+e*this.d,r=this.x,this.x=e*this.x-i*this.y,this.y=i*r+e*this.y}},{key:"translate",value:function(t,e){this.x+=t,this.y+=e}},{key:"concat",value:function(t){var e=this.a*t.a,i=0,r=0,a=this.d*t.d,n=this.x*t.a+t.x,s=this.y*t.d+t.y;0===this.b&&0===this.c&&0===t.b&&0===t.c||(e+=this.b*t.c,a+=this.c*t.b,i+=this.a*t.b+this.b*t.d,r+=this.c*t.a+this.d*t.c,n+=this.y*t.c,s+=this.x*t.b),this.a=e,this.b=i,this.c=r,this.d=a,this.x=n,this.y=s}},{key:"invert",value:function(){if(0===this.b&&0===this.c&&0!==this.a&&0!==this.d)this.a=1/this.a,this.d=1/this.d,this.b=0,this.c=0,this.x=-this.a*this.x,this.y=-this.d*this.y;else{var t=this.a*this.d-this.b*this.c;if(0===t)return void this.identity();t=1/t;var e=this.a;this.a=this.d*t,this.b=-this.b*t,this.c=-this.c*t,this.d=e*t,e=this.y,this.y=-(this.b*this.x+this.d*this.y),this.x=-(this.a*this.x+this.c*e)}}},{key:"getRotationX",value:function(){return Math.atan2(this.b,this.a)}},{key:"getRotationY",value:function(){return Math.atan2(this.c,this.d)}},{key:"getTransformedX",value:function(t,e){return this.x+this.a*t+this.c*e}},{key:"getTransformedY",value:function(t,e){return this.y+this.d*e+this.b*t}},{key:"scale",value:function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.x*=t,this.y*=e}},{key:"containsPoint",value:function(e,i,r,a){var n=t.temp;n.copyFrom(this),n.invert();var s=n.x+n.a*e+n.c*i,o=n.y+n.d*i+n.b*e;return s>=0&&s<=r&&o>=0&&o<=a}}]),t}());j.temp=new j;var w=j,M=function(t){Object(c["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.size="",t.rect={},t.drag={startX:0,startY:0,moving:!1,startMatrix:new w,endMatrix:new w,initStartMatrix:new w},t}return Object(o["a"])(i,[{key:"videoResizeHandler",value:function(){this.size=""==this.size?"large":"large"===this.size?"small":""}},{key:"videoMoveHandler",value:function(){this.drag.moving=!this.drag.moving,this.drag.moving?(this.initMove(),this.titleBar.addEventListener("mousedown",this.startMove.bind(this),!1)):(this.videoPanel.style.transform="",this.titleBar.removeEventListener("mousedown",this.startMove.bind(this),!1),document.removeEventListener("mousemove",this.moveEvent,!1),document.removeEventListener("mouseup",this.upEvent,!1))}},{key:"getRange",value:function(){this.rect={x:0,y:0,width:0,height:0},this.range?this.rect=Object(n["a"])({},this.range):this.rect=document.documentElement.getBoundingClientRect()}},{key:"initMove",value:function(){this.getRange(),this.videoPanel.style.transform?this.drag.startMatrix.copyFrom(this.drag.endMatrix):this.drag.startMatrix=new w(1,0,0,1,this.rect.x,this.rect.y),this.drag.endMatrix.copyFrom(this.drag.startMatrix),this.drag.initStartMatrix.translate(this.drag.startMatrix.x,this.drag.startMatrix.y);var t=this.drag.initStartMatrix,e=t.x,i=t.y;this.videoPanel.style.transform="matrix(1, 0, 0, 1, ".concat(e,", ").concat(i,")")}},{key:"startMove",value:function(t){this.getRange(),this.drag.startX=t.x,this.drag.startY=t.y,this.videoPanel.style.transform?this.drag.startMatrix.copyFrom(this.drag.endMatrix):this.drag.startMatrix=new w(1,0,0,1,0,0),document.addEventListener("mousemove",this.moveEvent,!1),document.addEventListener("mouseup",this.upEvent,!1)}},{key:"moveEvent",value:function(t){var e=this.videoPanel.getBoundingClientRect(),i=e.width,r=e.height;if(this.drag.moving){this.drag.initStartMatrix.copyFrom(this.drag.startMatrix);var a=t.x-this.drag.startX,n=t.y-this.drag.startY;this.drag.initStartMatrix.translate(a,n);var s=this.drag.initStartMatrix,o=s.x,c=s.y;o<this.rect.x&&(o=this.rect.x),c<this.rect.y&&(c=this.rect.y),o+i>=this.rect.width+this.rect.x&&(o=this.rect.width+this.rect.x-i),c+r>=this.rect.height&&(c=this.rect.height+this.rect.y-r);var u="matrix(1, 0, 0, 1, ".concat(o,", ").concat(c,")");this.videoPanel.style.transform=u}}},{key:"upEvent",value:function(){this.drag.endMatrix.copyFrom(this.drag.initStartMatrix),document.removeEventListener("mousemove",this.moveEvent,!1),document.removeEventListener("mouseup",this.upEvent,!1)}}]),i}(l["f"]);Object(h["a"])([Object(l["e"])()],M.prototype,"titleBar",void 0),Object(h["a"])([Object(l["e"])()],M.prototype,"videoPanel",void 0),Object(h["a"])([Object(l["c"])({type:MediaStream,default:null})],M.prototype,"stream",void 0),Object(h["a"])([Object(l["c"])({type:Boolean,default:!1})],M.prototype,"muted",void 0),Object(h["a"])([Object(l["c"])({type:String,default:"标签"})],M.prototype,"title",void 0),Object(h["a"])([Object(l["c"])({type:Object,default:null})],M.prototype,"range",void 0),M=Object(h["a"])([Object(l["a"])({name:"VideoPlayer"})],M);var k=M,E=k,P=(i("4ac1"),Object(y["a"])(E,x,O,!1,null,"063e54f6",null)),S=P.exports,_=i("fcf1"),R=function(t){Object(c["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.tdvalue="7788",t.user={uid:null,name:null},t.localStream=null,t.userList=[],t.streamList=[],t.drawerVisible=!1,t.stageRange=null,t}return Object(o["a"])(i,[{key:"beforeRouteEnter",value:function(t,e,i){console.log("进入路由"),i()}},{key:"beforeRouteUpdate",value:function(t,e,i){console.log("路由改变")}},{key:"beforeRouteLeave",value:function(t,e,i){console.log("路由离开")}},{key:"logoutHandler",value:function(){var t=this;this.$confirm("是否确认退出？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){_["a"].destory().then((function(e){var i=e.success;i&&(t.$message({type:"success",message:"退出成功"}),t.$router.push("/login"))}))}))}},{key:"onResize",value:function(t){var e=this.stageElement.$el.getBoundingClientRect();this.stageRange={x:e.x,y:e.y,width:e.width,height:e.height},console.log(this.stageRange)}},{key:"created",value:function(){var t=this;_["a"].user().then((function(e){var i=e.success,r=e.user;i&&(t.user.name=r.name,t.user.uid=r.time)}))}},{key:"mounted",value:function(){var t=this;this.onResize(document.documentElement),window.onresize=function(){t.onResize(document.documentElement)},navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){t.localStream=e,t.streamList.push(Object(n["a"])(Object(n["a"])({},t.user),{},{stream:e})),t.streamList.push(Object(n["a"])(Object(n["a"])({},t.user),{},{stream:e}))}))["catch"]((function(t){}))}}]),i}(l["f"]);Object(h["a"])([Object(l["e"])("stage")],R.prototype,"stageElement",void 0),R=Object(h["a"])([Object(l["a"])({name:"Room",components:{VideoPanel:p,VideoPlayer:S}})],R);var L=R,C=L,V=(i("60db"),Object(y["a"])(C,r,a,!1,null,"072f6004",null));e["default"]=V.exports},"99af":function(t,e,i){"use strict";var r=i("23e7"),a=i("d039"),n=i("e8b5"),s=i("861d"),o=i("7b0b"),c=i("50c4"),u=i("8418"),h=i("65f0"),l=i("1dde"),d=i("b622"),f=i("2d00"),v=d("isConcatSpreadable"),b=9007199254740991,m="Maximum allowed index exceeded",y=f>=51||!a((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),g=l("concat"),p=function(t){if(!s(t))return!1;var e=t[v];return void 0!==e?!!e:n(t)},x=!y||!g;r({target:"Array",proto:!0,forced:x},{concat:function(t){var e,i,r,a,n,s=o(this),l=h(s,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(n=-1===e?s:arguments[e],p(n)){if(a=c(n.length),d+a>b)throw TypeError(m);for(i=0;i<a;i++,d++)i in n&&u(l,d,n[i])}else{if(d>=b)throw TypeError(m);u(l,d++,n)}return l.length=d,l}})},"9ac7":function(t,e,i){},a640:function(t,e,i){"use strict";var r=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&r((function(){i.call(null,e||function(){throw 1},1)}))}},ade3:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("7a82");function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},ae40:function(t,e,i){var r=i("83ab"),a=i("d039"),n=i("5135"),s=Object.defineProperty,o={},c=function(t){throw t};t.exports=function(t,e){if(n(o,t))return o[t];e||(e={});var i=[][t],u=!!n(e,"ACCESSORS")&&e.ACCESSORS,h=n(e,0)?e[0]:c,l=n(e,1)?e[1]:void 0;return o[t]=!!i&&!a((function(){if(u&&!r)return!0;var t={length:-1};u?s(t,1,{enumerable:!0,get:c}):t[1]=1,i.call(t,h,l)}))}},b0c0:function(t,e,i){var r=i("83ab"),a=i("9bf2").f,n=Function.prototype,s=n.toString,o=/^\s*function ([^ (]*)/,c="name";r&&!(c in n)&&a(n,c,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},b64b:function(t,e,i){var r=i("23e7"),a=i("7b0b"),n=i("df75"),s=i("d039"),o=s((function(){n(1)}));r({target:"Object",stat:!0,forced:o},{keys:function(t){return n(a(t))}})},bee2:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("7a82");function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}},c0b6:function(t,e,i){var r=i("23e7"),a=i("0538");r({target:"Function",proto:!0},{bind:a})},dbb4:function(t,e,i){var r=i("23e7"),a=i("83ab"),n=i("56ef"),s=i("fc6a"),o=i("06cf"),c=i("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,i,r=s(t),a=o.f,u=n(r),h={},l=0;while(u.length>l)i=a(r,e=u[l++]),void 0!==i&&c(h,e,i);return h}})},e439:function(t,e,i){var r=i("23e7"),a=i("d039"),n=i("fc6a"),s=i("06cf").f,o=i("83ab"),c=a((function(){s(1)})),u=!o||c;r({target:"Object",stat:!0,forced:u,sham:!o},{getOwnPropertyDescriptor:function(t,e){return s(n(t),e)}})},f1cc:function(t,e,i){"use strict";var r=i("101d"),a=i.n(r);a.a},fcf1:function(t,e,i){"use strict";var r=i("d4ec"),a=i("262e"),n=i("2caf"),s=(i("d3b7"),i("bee2")),o=i("bc3a"),c=i.n(o),u=function(){function t(){Object(r["a"])(this,t),this.prefix="",this.url="",this.axios=c.a}return Object(s["a"])(t,[{key:"request",value:function(t,e){var i=this;return new Promise((function(r,a){i.axios.post(i.prefix+t,e||{}).then((function(t){var e=t.data,i=e.code;e.message;10001===i?window.location.href="/error.html?code=".concat(i):r(t.data)}))["catch"](a)}))}}]),t}(),h=u,l=function(t){Object(a["a"])(i,t);var e=Object(n["a"])(i);function i(){var t;return Object(r["a"])(this,i),t=e.call(this),t.create=function(e,i){return t.request("/create",{name:e,password:i})},t.destory=function(){return t.request("/destory")},t.user=function(){return t.request("/user")},t.prefix="/live",t.url="",t}return i}(h);e["a"]=new l}}]);