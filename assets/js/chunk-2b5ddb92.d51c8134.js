(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b5ddb92"],{2532:function(e,t,i){"use strict";var n=i("23e7"),r=i("5a34"),a=i("1d80"),s=i("ab13");n({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~String(a(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},"26e8":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticStyle:{height:"100vh"}},[i("el-header",[i("label",[e._v("标 题：")]),i("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),i("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:function(t){return e.saveHandler()},command:e.exportHandler}},[e._v(" 保 存 "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"md"}},[e._v("导出 *.md")]),i("el-dropdown-item",{attrs:{command:"html"}},[e._v("导出 *.html")]),i("el-dropdown-item",{attrs:{command:"publish"}},[e._v("发行H5")])],1)],1)],1),i("el-main",[i("mavon-editor",{ref:"mavon-editor",staticClass:"fill",attrs:{toolbars:e.toolbars,fontSize:"16px",placeholder:"请输入文本"},on:{change:e.changeHandler,save:function(t){return e.saveHandler()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[i("template",{slot:"left-toolbar-before"},[i("button",{staticClass:"op-icon fa el-button el-icon-document-add",attrs:{type:"button",title:"新建"},on:{click:e.newHandler}}),i("span",{staticClass:"op-icon-divider"})]),i("template",{slot:"left-toolbar-after"},[i("button",{staticClass:"op-icon fa el-button el-icon-tableware",attrs:{type:"button",title:"页面样式和扩展"},on:{click:function(t){e.tableware.visible=!0}}})])],2)],1),i("el-dialog",{attrs:{title:"资源",visible:e.tableware.visible,center:"",width:"600px"},on:{"update:visible":function(t){return e.$set(e.tableware,"visible",t)}}},[i("MoreList",{attrs:{title:"style",list:e.tableware.preStyleList,placeholder:"请输入style地址"},model:{value:e.tableware.styles,callback:function(t){e.$set(e.tableware,"styles",t)},expression:"tableware.styles"}},[i("el-button",{attrs:{slot:"title",type:"text"},slot:"title"},[e._v(" 预设css "),i("i",{staticClass:"el-icon-arrow-down"})])],1),i("MoreList",{attrs:{title:"script",list:e.tableware.preScriptList,placeholder:"请输入script地址"},model:{value:e.tableware.scripts,callback:function(t){e.$set(e.tableware,"scripts",t)},expression:"tableware.scripts"}},[i("el-button",{attrs:{slot:"title",type:"text"},slot:"title"},[e._v(" 预设js "),i("i",{staticClass:"el-icon-arrow-down"})])],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.tableware.visible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tableware.visible=!1}}},[e._v("确 定")])],1)],1)],1)},r=[],a=(i("4de4"),i("a15b"),i("d3b7"),i("3ca3"),i("498a"),i("ddb0"),i("2b3d"),i("d4ec")),s=i("bee2"),l=i("262e"),o=i("2caf"),c=i("9ab4"),u=i("2d56"),d=i("1b40"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"more-list"},[e.title?i("div",{staticClass:"list-item"},[i("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.title))]),i("el-dropdown",{on:{command:e.commandHandler}},[e._t("title",[i("span",{staticClass:"el-dropdown-link"},[e._v("预设 "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})])]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.list,(function(t,n){return i("el-dropdown-item",{key:n,attrs:{command:t.value}},[e._v(e._s(t.label))])})),1)],2)],1):e._e(),e._l(e.value,(function(t,n){return i("div",{key:n,staticClass:"list-item"},[i("el-input",{attrs:{value:t,placeholder:e.placeholder},on:{input:function(t){return e.changeItemAtIndex(t,n)}}}),i("span",{staticClass:"el-icon-tools"},[i("i",{staticClass:"el-icon el-icon-circle-plus",on:{click:function(t){return e.addItemAtIndex(n)}}}),e.value.length>1?i("i",{staticClass:"el-icon el-icon-error",on:{click:function(t){return e.removeItemAtIndex(n)}}}):e._e()])],1)}))],2)},f=[],v=(i("caad"),i("a434"),i("2532"),function(e){Object(l["a"])(i,e);var t=Object(o["a"])(i);function i(){return Object(a["a"])(this,i),t.apply(this,arguments)}return Object(s["a"])(i,[{key:"changeItemAtIndex",value:function(e,t){var i=JSON.parse(JSON.stringify(this.value));i.splice(t,1,e),this.$emit("input",i)}},{key:"addItemAtIndex",value:function(e){var t=JSON.parse(JSON.stringify(this.value));t.splice(e+1,0,""),this.$emit("input",t)}},{key:"removeItemAtIndex",value:function(e){var t=JSON.parse(JSON.stringify(this.value));t.splice(e,1),this.$emit("input",t)}},{key:"commandHandler",value:function(e){if(!this.value.includes(e)){var t=JSON.parse(JSON.stringify(this.value));t.push(e),this.$emit("input",t)}}},{key:"created",value:function(){this.value.length||this.$emit("input",[""])}}]),i}(d["l"]));Object(c["b"])([Object(d["f"])({default:function(){return[""]}})],v.prototype,"value",void 0),Object(c["b"])([Object(d["f"])()],v.prototype,"title",void 0),Object(c["b"])([Object(d["f"])({default:"请输入"})],v.prototype,"placeholder",void 0),Object(c["b"])([Object(d["f"])()],v.prototype,"list",void 0),v=Object(c["b"])([Object(d["a"])({name:"MoreList"})],v);var h=v,b=h,m=(i("e6d8"),i("2877")),y=function(e){e.options.__source="src/tutorial/views/markdown/MoreList.vue"},w=y,g=Object(m["a"])(b,p,f,!1,null,"400893ac",null);"function"===typeof w&&w(g);var k=g.exports,j=window.URL||window.webkitURL,O=function(e){Object(l["a"])(i,e);var t=Object(o["a"])(i);function i(){var e;return Object(a["a"])(this,i),e=t.apply(this,arguments),e.id=null,e.title=null,e.value="#新建文档",e.html=null,e.desc="",e.error="",e.tableware={visible:!1,styles:[],scripts:[],preStyleList:[{label:"animate.css@4.1.1",value:"/css/animate.css/4.1.1/animate.min.css"}],preScriptList:[{label:"vuejs 2.0",value:"//cn.vuejs.org/js/vue.min.js"},{label:"vuejs 3.0-beta",value:"//unpkg.com/vue@3.0.11/dist/vue.global.js"},{label:"jQuery 3.6.0",value:"//code.jquery.com/jquery-3.6.0.min.js"}]},e.toolbars={bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},e}return Object(s["a"])(i,[{key:"routeChangeHandler",value:function(e){this.init(e.params)}},{key:"created",value:function(){this.init(this.$route.params)}},{key:"init",value:function(e){e&&e.id?"new"===e.id?(this.id=null,this.resetDocument()):this.editHandler(e.id):this.resetDocument()}},{key:"changeHandler",value:function(e,t){this.value=e,this.html=t}},{key:"resetDocument",value:function(){this.id=null,this.title=null,this.value="",this.desc=null,this.error=null,this.$refs["mavon-editor"].subfieldtoggle()}},{key:"newHandler",value:function(){var e=this;this.title||this.value?this.$confirm("确认放弃当前内容，新建文档吗？","新建文档").then((function(t){e.resetDocument(),e.$router.push({path:"/markdown/edit/new"})})):(this.resetDocument(),this.$router.push({path:"/markdown/edit/new"}))}},{key:"editHandler",value:function(e){var t=this;Object(u["a"])("/edit/read",{id:e}).then((function(e){var i=e.data,n=e.success;if(!n)return t.resetDocument(),t.$message({type:"warn",message:"未查询到内容"});t.id=i.id,t.title=i.title,t.value=i.text||"",t.desc=i.desc;var r=JSON.parse(i.links);t.tableware.styles=r.styles||[],t.tableware.scripts=r.scripts||[],document.title=t.title||"新建文档"}))}},{key:"saveHandler",value:function(e){var t=this;if(!this.value)return this.$message({type:"error",message:"暂无内容需要保存"});this.title?Object(u["a"])("/edit/save",{id:this.id,title:this.title,text:this.value,html:this.html,desc:this.desc,links:{styles:this.tableware.styles.filter((function(e){return e.trim()})),scripts:this.tableware.scripts.filter((function(e){return e.trim()}))}}).then((function(i){var n=i.success,r=i.data;console.log("保存",r),n&&(e&&e(r),t.$router.push({path:"/markdown/edit/"+r.id}),t.$message({type:"success",message:"内容已经保存成功"}))})):this.$message({type:"error",message:"请输入标题内容"})}},{key:"exportHandler",value:function(e){var t=this;if("publish"===e)return this.saveHandler((function(e){Object(u["a"])("/edit/publish",{id:e.id}).then((function(e){var i=e.success,n=e.message;t.$message({type:i?"success":"error",message:i?"发布完成":n})}))}));var i=null;if(this.value&&this.html){i="md"==e?new Blob([this.value],{type:"text/plain"}):new Blob([this.html],{type:"html/plain"});var n=j.createObjectURL(i),r=document.createElement("a");r.style.display="none",r.href=n,r.download=[this.title,e].join("."),document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(n),t.$message({type:"success",message:"文档下载完成"})}),100)}else this.$message({type:"error",message:"暂无内容需要导出"})}}]),i}(d["l"]);Object(c["b"])([Object(d["m"])("$route")],O.prototype,"routeChangeHandler",null),O=Object(c["b"])([Object(d["a"])({components:{MoreList:k},name:"MarkDownEditor"})],O);var x=O,_=x,S=(i("b12b"),function(e){e.options.__source="src/tutorial/views/markdown/Editor.vue"}),$=S,C=Object(m["a"])(_,n,r,!1,null,"4bd03a3b",null);"function"===typeof $&&$(C);t["default"]=C.exports},"2d56":function(e,t,i){"use strict";i("d3b7"),i("ac1f"),i("5319");var n=i("cebe"),r=i.n(n),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(i,n){r.a.post(location.origin.replace(location.port,"2020")+e,t).then((function(e){var t=e.data;return i(t)})).catch(n)}))};t["a"]=a},"498a":function(e,t,i){"use strict";var n=i("23e7"),r=i("58a8").trim,a=i("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return r(this)}})},"4de4":function(e,t,i){"use strict";var n=i("23e7"),r=i("b727").filter,a=i("1dde"),s=i("ae40"),l=a("filter"),o=s("filter");n({target:"Array",proto:!0,forced:!l||!o},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,i){var n=i("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6f2d":function(e,t,i){},a15b:function(e,t,i){"use strict";var n=i("23e7"),r=i("44ad"),a=i("fc6a"),s=i("a640"),l=[].join,o=r!=Object,c=s("join",",");n({target:"Array",proto:!0,forced:o||!c},{join:function(e){return l.call(a(this),void 0===e?",":e)}})},a434:function(e,t,i){"use strict";var n=i("23e7"),r=i("23cb"),a=i("a691"),s=i("50c4"),l=i("7b0b"),o=i("65f0"),c=i("8418"),u=i("1dde"),d=i("ae40"),p=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,h=Math.min,b=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var i,n,u,d,p,f,y=l(this),w=s(y.length),g=r(e,w),k=arguments.length;if(0===k?i=n=0:1===k?(i=0,n=w-g):(i=k-2,n=h(v(a(t),0),w-g)),w+i-n>b)throw TypeError(m);for(u=o(y,n),d=0;d<n;d++)p=g+d,p in y&&c(u,d,y[p]);if(u.length=n,i<n){for(d=g;d<w-n;d++)p=d+n,f=d+i,p in y?y[f]=y[p]:delete y[f];for(d=w;d>w-n+i;d--)delete y[d-1]}else if(i>n)for(d=w-n;d>g;d--)p=d+n-1,f=d+i-1,p in y?y[f]=y[p]:delete y[f];for(d=0;d<i;d++)y[d+g]=arguments[d+2];return y.length=w-n+i,u}})},ab13:function(e,t,i){var n=i("b622"),r=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[r]=!1,"/./"[e](t)}catch(n){}}return!1}},b12b:function(e,t,i){"use strict";var n=i("6f2d"),r=i.n(n);r.a},bee2:function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}i.d(t,"a",(function(){return r}))},c8d2:function(e,t,i){var n=i("d039"),r=i("5899"),a="​᠎";e.exports=function(e){return n((function(){return!!r[e]()||a[e]()!=a||r[e].name!==e}))}},caad:function(e,t,i){"use strict";var n=i("23e7"),r=i("4d64").includes,a=i("44d2"),s=i("ae40"),l=s("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!l},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d42c:function(e,t,i){},e6d8:function(e,t,i){"use strict";var n=i("d42c"),r=i.n(n);r.a}}]);