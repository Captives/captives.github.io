(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24ad5196"],{"8ada":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-main",[i("mavon-editor",{staticClass:"fill",attrs:{toolbars:t.toolbars,fontSize:"16px",placeholder:"请输入文本"},on:{change:t.changeHandler},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[i("template",{slot:"left-toolbar-before"},[i("el-popover",{attrs:{placement:"top-start",title:"文章列表",width:"200",trigger:"hover","popper-class":"popper-list"}},[i("ul",{staticClass:"list"},t._l(t.list,(function(e,a){return i("li",{key:a},[i("span",[t._v(" "+t._s(e.title))]),i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return t.editHandler(e)}}}),i("el-button",{attrs:{type:"text",icon:"el-icon-view"}})],1)})),0),i("button",{staticClass:"op-icon fa fa-mavon-bars",attrs:{slot:"reference",type:"button"},on:{click:t.getList},slot:"reference"})]),i("button",{staticClass:"op-icon fa el-icon-document-add",attrs:{type:"button"},on:{click:t.createPage}}),i("button",{staticClass:"op-icon fa fa-mavon-floppy-o",attrs:{type:"button"},on:{click:function(e){t.dialog.visible=!0}}}),i("span",{staticClass:"op-icon-divider"})],1)],2),i("el-dialog",{attrs:{title:"保存",visible:t.dialog.visible,width:"520px",center:""},on:{"update:visible":function(e){return t.$set(t.dialog,"visible",e)}}},[i("el-form",{ref:"dialog-form",attrs:{model:t.dialog,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"标题",prop:"title",rules:[{required:!0,message:"请输入文章标题",trigger:["blur","change"]}]}},[i("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:t.dialog.title,callback:function(e){t.$set(t.dialog,"title",e)},expression:"dialog.title"}})],1),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{attrs:{type:"textarea",rows:3,maxlength:"50",placeholder:"请输入描述信息"},model:{value:t.dialog.desc,callback:function(e){t.$set(t.dialog,"desc",e)},expression:"dialog.desc"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialog.visible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveHandler}},[t._v("确 定")])],1)],1)],1)},l=[],o=(i("d3b7"),i("ac1f"),i("466d"),i("5319"),i("bc3a")),n=i.n(o),s=function(t,e){return new Promise((function(i,a){n.a.post(location.origin.replace(location.port,2020)+t,e).then((function(t){var e=t.data;return i(e)})).catch(a)}))},r={name:"VueMarkdownEditor",data:function(){return{value:"# 这是默认值",list:[],dialog:{visible:!1,id:null,text:"",html:"",title:"",desc:"",anchor:[]},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},mounted:function(){this.getList()},methods:{createPage:function(){this.value="",this.dialog.id=null,this.dialog.text="",this.dialog.html="",this.dialog.title="",this.dialog.desc="",this.dialog.anchor=[]},changeHandler:function(t,e){this.dialog.text=t,this.dialog.html=t,console.log(t,e)},getList:function(){var t=this;s("/edit/list").then((function(e){var i=e.data;console.log(i),t.list=i}))},editHandler:function(t){var e=this;s("/edit/read",{id:t.id}).then((function(t){console.log("匹配结果",t.data.text.match(/^\-{3} - $\-{3}/g)),t.success&&(e.value=t.data.text,e.dialog.title=t.data.title,e.dialog.id=t.data.id,e.dialog.desc=t.data.desc)}))},saveHandler:function(){var t=this;if(!this.dialog.text)return this.$message({type:"error",message:"暂无内容需要保存"});this.$refs["dialog-form"].validate((function(e){e&&(s("/edit/save",{id:t.dialog.id,title:t.dialog.title,text:t.dialog.text,html:t.dialog.html,desc:t.dialog.desc}).then((function(t){console.log("保存",t)})),t.dialog.visible=!1,t.$message("内容已经发送服务器"))}))}}},c=r,d=(i("b14c"),i("2877")),u=function(t){t.options.__source="src/home/views/VueMarkdownEditor.vue"},g=u,f=Object(d["a"])(c,a,l,!1,null,"8a3f158a",null);"function"===typeof g&&g(f);e["default"]=f.exports},b14c:function(t,e,i){"use strict";var a=i("f8cb"),l=i.n(a);l.a},f8cb:function(t,e,i){}}]);