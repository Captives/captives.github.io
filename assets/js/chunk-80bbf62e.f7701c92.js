(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80bbf62e"],{"0011":function(e,t,i){},1276:function(e,t,i){"use strict";var o=i("d784"),n=i("44e7"),a=i("825a"),s=i("1d80"),r=i("4840"),l=i("8aa5"),u=i("50c4"),d=i("14c3"),c=i("9263"),v=i("d039"),h=[].push,p=Math.min,b=4294967295,m=!v((function(){return!RegExp(b,"y")}));o("split",2,(function(e,t,i){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var o=String(s(this)),a=void 0===i?b:i>>>0;if(0===a)return[];if(void 0===e)return[o];if(!n(e))return t.call(o,e,a);var r,l,u,d=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=new RegExp(e.source,v+"g");while(r=c.call(m,o)){if(l=m.lastIndex,l>p&&(d.push(o.slice(p,r.index)),r.length>1&&r.index<o.length&&h.apply(d,r.slice(1)),u=r[0].length,p=l,d.length>=a))break;m.lastIndex===r.index&&m.lastIndex++}return p===o.length?!u&&m.test("")||d.push(""):d.push(o.slice(p)),d.length>a?d.slice(0,a):d}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var n=s(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n,i):o.call(String(n),t,i)},function(e,n){var s=i(o,e,this,n,o!==t);if(s.done)return s.value;var c=a(e),v=String(this),h=r(c,RegExp),g=c.unicode,f=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(m?"y":"g"),y=new h(m?c:"^(?:"+c.source+")",f),x=void 0===n?b:n>>>0;if(0===x)return[];if(0===v.length)return null===d(y,v)?[v]:[];var w=0,j=0,O=[];while(j<v.length){y.lastIndex=m?j:0;var _,B=d(y,m?v:v.slice(j));if(null===B||(_=p(u(y.lastIndex+(m?0:j)),v.length))===w)j=l(v,j,g);else{if(O.push(v.slice(w,j)),O.length===x)return O;for(var k=1;k<=B.length-1;k++)if(O.push(B[k]),O.length===x)return O;j=w=_}}return O.push(v.slice(w)),O}]}),!m)},2734:function(e,t,i){},2786:function(e,t,i){"use strict";var o=i("2734"),n=i.n(o);n.a},"44e7":function(e,t,i){var o=i("861d"),n=i("c6b6"),a=i("b622"),s=a("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==n(e))}},"66d5":function(e,t,i){"use strict";var o=i("0011"),n=i.n(o);n.a},8335:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{ref:"page",staticClass:"page",style:e.domStyle},[i("el-header",[e._v(" 顶部控制 ")]),i("el-container",[i("el-aside",{staticClass:"video-list",attrs:{width:"308"}},e._l(e.list,(function(t){return i("div",{key:t.id,staticClass:"video-item"},[t.stage?i("VideoToolBar",{attrs:{label:t.label,value:t}}):e._e(),i("VideoToolBar",{class:{stage:t.stage,move:t.stage&&!0},style:e.anchor(t),attrs:{label:t.label,value:t},on:{move:e.videoBarMoveHandler}},[i("p",{staticStyle:{"text-align":"center",margin:"0"}},[e._v(e._s(e._f("toString")(e.anchor(t))))]),i("el-button",{staticClass:"stage-button",attrs:{type:t.stage?"danger":"primary",circle:"",icon:t.stage?"el-icon-bottom-left":"el-icon-top-right"},on:{click:function(i){return e.stageChangeHandler(t)}}})],1)],1)})),0),i("el-aside",{ref:"white-board",staticClass:"stage-body white-board",attrs:{width:"800"}},[e._v(" 舞台区域 "),e._l(e.list,(function(t){return[t.stage?i("p",{key:t.id},[e._v(e._s(t.label)+" - "),i("b",{staticStyle:{color:"red"}},[e._v(e._s(t.position))])]):e._e()]}))],2),i("el-main",[e._v(" 聊天扩展区 ")])],1),i("el-footer",[i("marquee",[e._v("底部占位")])],1)],1)},n=[],a=(i("a15b"),i("a9e3"),i("ac1f"),i("5319"),i("1276"),i("d4ec")),s=i("bee2"),r=i("262e"),l=i("2caf"),u=i("9ab4"),d=i("1b40"),c=i("4bb5"),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"video-bar",staticClass:"video-bar"},[e._t("default"),i("p",{staticClass:"user-name"},[e._v(e._s(e.label))])],2)},h=[],p=function(e){Object(r["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(a["a"])(this,i),e=t.apply(this,arguments),e.visible=!1,e.mouseDown=!1,e.emitTime=Date.now(),e}return Object(s["a"])(i,[{key:"mounted",value:function(){this.videoBar.addEventListener("mouseenter",this.mouseEnterHandler.bind(this),!1),this.videoBar.addEventListener("mouseleave",this.mouseLeaveHandler.bind(this),!1),this.videoBar.addEventListener("mousedown",this.mouseDownHandler.bind(this),!1)}},{key:"mouseEnterHandler",value:function(){this.visible=!0}},{key:"mouseLeaveHandler",value:function(){this.visible=!1}},{key:"mouseDownHandler",value:function(e){this.mouseDown=this.value.stage&&!0,this.mouseDown&&(this.videoBar.style["zIndex"]="10",this.$emit("movestart",e),document.addEventListener("mousemove",this.mouseMoveHandler.bind(this),!0),document.addEventListener("mouseup",this.mouseUpHandler.bind(this),!1),document.addEventListener("mouseleave",this.mouseUpHandler.bind(this),!1))}},{key:"mouseMoveHandler",value:function(e){this.mouseDown&&Date.now()-this.emitTime>20&&(this.emitTime=Date.now(),this.$emit("move",e,this.value,this.videoBar.getBoundingClientRect()))}},{key:"mouseUpHandler",value:function(e){this.mouseDown&&(this.videoBar.style["zIndex"]="1",console.log("离开可视区域"),this.mouseDown=!1,this.$emit("moveend",e),document.removeEventListener("mousemove",this.mouseMoveHandler,!0),document.removeEventListener("mouseup",this.mouseUpHandler,!1),document.removeEventListener("mouseleave",this.mouseUpHandler,!1))}}]),i}(d["l"]);Object(u["b"])([Object(d["f"])()],p.prototype,"label",void 0),Object(u["b"])([Object(d["f"])()],p.prototype,"value",void 0),Object(u["b"])([Object(d["j"])("video-bar")],p.prototype,"videoBar",void 0),p=Object(u["b"])([Object(d["a"])({name:"VideoToolBar"})],p);var b=p,m=b,g=(i("2786"),i("2877")),f=function(e){e.options.__source="src/live/components/VideoToolBar.vue"},y=f,x=Object(g["a"])(m,v,h,!1,null,"1c4eb120",null);"function"===typeof y&&y(x);var w=x.exports,j=Object(c["a"])("RoomStore"),O=function(e){Object(r["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(a["a"])(this,i),e=t.apply(this,arguments),e.list=[{label:"video 1",id:"v1",stage:!1,position:null},{label:"video 2",id:"v2",stage:!1,position:null},{label:"video 3",id:"v3",stage:!1,position:null},{label:"video 4",id:"v4",stage:!1,position:null},{label:"video 5",id:"v5",stage:!1,position:null},{label:"video 6",id:"v6",stage:!1,position:null},{label:"video 7",id:"v7",stage:!1,position:null},{label:"video 8",id:"v8",stage:!1,position:null},{label:"video 9",id:"v9",stage:!1,position:null},{label:"video 10",id:"v10",stage:!1,position:null},{label:"video 11",id:"v11",stage:!1,position:null}],e}return Object(s["a"])(i,[{key:"roomRatioChange",value:function(e){var t=this;setTimeout((function(){return t.$forceUpdate()}),10)}},{key:"mounted",value:function(){this.onResize({element:this.$el,whiteBoard:this.whiteBoard.$el,padding:20}),window.addEventListener("resize",this.onResize.bind(this,{element:this.$el,whiteBoard:this.whiteBoard.$el,padding:20}),!1)}},{key:"stageChangeHandler",value:function(e){e.stage=!e.stage}},{key:"videoBarMoveHandler",value:function(e,t,i){if(console.log("move",e.x,e.y,t,i),t.stage){var o=this.room.ratio,n=this.room.wrapperRect,a=this.room.whiteBoardRect,s={x:0,y:0};s.x=e.x-i.width/2,s.y=e.y-i.height/2,s.x<=a.x&&(s.x=a.x),s.y<=a.y&&(s.y=a.y),s.x+i.width>=a.x+a.width&&(s.x=a.x+a.width-i.width),s.y+i.height>=a.y+a.height&&(s.y=a.y+a.height-i.height),console.log("有效坐标：%sx%s, 页边距：%sx%s, 舞台边距：%sx%s",Math.round(s.x),Math.round(s.y),Math.round(n.x),Math.round(n.y),Math.round(a.x),Math.round(a.y));var r=s.y-n.y-(a.y-n.y),l=s.x-n.x-(a.x-n.x),u=Math.round(l/o),d=Math.round(r/o);console.log("800x600 位置坐标",u,d),t.position=[u,d].join("x")}}},{key:"anchor",get:function(){var e=this;return function(t){var i=(t.position||"0x0").split("x"),o=e.room.wrapperRect,n=e.room.whiteBoardRect;if(o&&n&&t.stage){var a={x:(n.x-o.x)/e.room.ratio,y:(n.y-o.y)/e.room.ratio};return{left:Number(i[0])+a.x+"px",top:Number(i[1])+a.y+"px"}}return null}}}]),i}(d["l"]);Object(u["b"])([Object(d["j"])()],O.prototype,"page",void 0),Object(u["b"])([Object(d["j"])("white-board")],O.prototype,"whiteBoard",void 0),Object(u["b"])([j.State((function(e){return e}))],O.prototype,"room",void 0),Object(u["b"])([j.Getter("domStyle")],O.prototype,"domStyle",void 0),Object(u["b"])([j.Action("onResize")],O.prototype,"onResize",void 0),Object(u["b"])([Object(d["m"])("room.ratio")],O.prototype,"roomRatioChange",null),O=Object(u["b"])([Object(d["a"])({name:"LiveRoom",components:{VideoToolBar:w},filters:{toString:function(e){return e?(e.left=Math.round(e.left.replace("px","")),e.top=Math.round(e.top.replace("px","")),e.left+"x"+e.top):""}}})],O);var _=O,B=_,k=(i("66d5"),function(e){e.options.__source="src/live/views/LiveRoom.vue"}),E=k,H=Object(g["a"])(B,o,n,!1,null,"2f3a7a4c",null);"function"===typeof E&&E(H);t["default"]=H.exports},a15b:function(e,t,i){"use strict";var o=i("23e7"),n=i("44ad"),a=i("fc6a"),s=i("a640"),r=[].join,l=n!=Object,u=s("join",",");o({target:"Array",proto:!0,forced:l||!u},{join:function(e){return r.call(a(this),void 0===e?",":e)}})}}]);