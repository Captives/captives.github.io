(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05d562fd"],{5054:function(e,t,i){},6:function(e,t){},7:function(e,t){},8:function(e,t){},cb10:function(e,t,i){"use strict";var a=i("5054"),n=i.n(a);n.a},e324:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("el-main",[i("canvas",{ref:"draw",staticClass:"panel",attrs:{width:"1360px",height:"720px"}}),i("ul",[i("li",[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:e.drawHandler}})],1),i("li",[i("el-button",{attrs:{type:"success",icon:"el-icon-rank",circle:""},on:{click:e.selectHandler}})],1),i("li",[i("el-button",{attrs:{type:"warning",icon:"el-icon-delete",circle:""},on:{click:e.clearHandler}})],1),i("li",[i("el-button",{attrs:{type:"danger",icon:"el-icon-refresh",circle:""},on:{click:e.resetHandler}})],1),i("li",[i("el-button",{attrs:{size:"small"},on:{click:e.selectFileHandler}},[e._v("照片")]),i("input",{staticStyle:{display:"none"},attrs:{id:"fileInput",type:"file",accept:"image/png,image/jpeg,image/jpg,image/bmp"},on:{change:e.fileChangeHandler}})],1),i("li",[i("el-link",{attrs:{href:"https://github.com/Couy69/vue-fabric-drawingboard"}},[e._v("例1")])],1),i("li",[i("el-link",{attrs:{href:"https://github.com/vipstone/drawingboard"}},[e._v("例2")])],1)])]),i("el-footer",[i("ul"),e._e()],1),i("el-footer",[i("FabricJS")],1)],1)},n=[],r=i("7a94"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-main",[i("h2",[e._v("简介")]),e._v(" \b "),i("p",[e._v(" Fabric.js是一个可以简化canvas程序编写的库。 Fabric.js为canvas提供所缺少的对象模型, svg parser, 交互和一整套其他不可或缺的工具。基于MIT协议开源，在github上有许多人贡献代码。"),i("a",{attrs:{href:"https://github.com/Rookie-Birds/Fabric-Tutorial_zh-CN",target:"_blank"}},[e._v("中文教程")])]),i("h3",[e._v("配置参数")]),i("ul",[i("li",[e._v("width宽：number")]),i("li",[e._v("height高：number")]),i("li",[e._v("fill填充颜色：string")]),i("li",[e._v("stroke描边颜色:string")]),i("li",[e._v("strokeWidth描边宽度：number")]),i("li",[e._v("angle角度:number")]),i("li",[e._v("left左边距:number")]),i("li",[e._v("top上边距:number")]),i("li",[e._v("originX横轴中心点:['center'|'left'|'right]")]),i("li",[e._v("originY纵轴中心点:['center|'top'|'bottom']")]),i("li",[e._v("flipX水平翻转:boolean")]),i("li",[e._v("flipY垂直翻转：boolean")]),i("li",[i("p",[e._v(" 更多配置参数请参考："),i("a",{attrs:{href:"http://fabricjs.com/docs/fabric.Object.html",rel:"nofollow noreferrer",target:"_blank"}},[e._v("fabric.Object")]),e._v("，以及其子类 ")])])]),i("h3",[e._v("对象")]),i("ul",[i("li",[e._v("fabric.Circle 圆")]),i("li",[e._v("fabric.Ellipse 椭圆")]),i("li",[e._v("fabric.Line 直线")]),i("li",[e._v("fabric.Polygon")]),i("li",[e._v("fabric.Polyline")]),i("li",[e._v("fabric.Rect 矩形")]),i("li",[e._v("fabric.Triangle 三角形")])]),i("h3",[e._v("方法")]),i("ul",[i("li",[e._v("add(object) 添加")]),i("li",[e._v("insertAt(object,index) 添加")]),i("li",[e._v("remove(object) 移除")]),i("li",[e._v("forEachObject 循环遍历")]),i("li",[e._v("getObjects() 获取所有对象")]),i("li",[e._v("item(int) 获取子项")]),i("li",[e._v("isEmpty() 判断是否空画板")]),i("li",[e._v("size() 画板元素个数")]),i("li",[e._v("contains(object) 查询是否包含某个元素")]),i("li",[e._v("fabric.util.cos")]),i("li",[e._v("fabric.util.sin")]),i("li",[e._v("fabric.util.drawDashedLine 绘制虚线")]),i("li",[e._v("getWidth() setWidth()")]),i("li",[e._v("getHeight()")]),i("li",[e._v("clear() 清空")]),i("li",[e._v("renderAll() 重绘")]),i("li",[e._v("requestRenderAll() 请求重新渲染")]),i("li",[e._v("rendercanvas() 重绘画板")]),i("li",[e._v("getCenter().top/left 获取中心坐标")]),i("li",[e._v("toDatalessJSON() 画板信息序列化成最小的json")]),i("li",[e._v("toJSON() 画板信息序列化成json")]),i("li",[e._v("moveTo(object,index) 移动")]),i("li",[e._v("dispose() 释放")]),i("li",[e._v("setCursor() 设置手势图标")]),i("li",[e._v("getSelectionContext()获取选中的context")]),i("li",[e._v("getSelectionElement()获取选中的元素")]),i("li",[e._v("getActiveObject() 获取选中的对象")]),i("li",[e._v("getActiveObjects() 获取选中的多个对象")]),i("li",[e._v("discardActiveObject()取消当前选中对象")]),i("li",[e._v("isType() 图片的类型")]),i("li",[e._v('setColor(color) = canvas.set("full","");')]),i("li",[e._v("rotate() 设置旋转角度")]),i("li",[e._v("setCoords() 设置坐标")])]),i("h3",[e._v("常用属性")]),i("ul",[i("li",[e._v("canvas.isDrawingMode = true; 可以自由绘制")]),i("li",[e._v("canvas.selectable = false; 控件不能被选择，不会被操作")]),i("li",[e._v("canvas.selection = true; 画板显示选中")]),i("li",[e._v("canvas.skipTargetFind = true; 整个画板元素不能被选中")]),i("li",[e._v('canvas.freeDrawingBrush.color = "#E34F51" 设置自由绘画笔的颜色')]),i("li",[e._v("freeDrawingBrush.width 自由绘笔触宽度")])]),i("h3",[e._v("IText的方法")]),i("ul",[i("li",[e._v("selectAll() 选择全部")]),i("li",[e._v("getSelectedText() 获取选中的文本")]),i("li",[e._v("exitEditing() 退出编辑模式")])]),i("h3",[e._v("样式修改")]),i("ul",[i("li",[e._v("canvas.selectionLineWidth = 1; //拖曳区块边框")]),i("li",[e._v(' canvas.selectionBorderColor = "rgb(121, 187, 255)"; //设定拖曳区块边框颜色 ')]),i("li",[e._v(' canvas.selectionColor = "rgba(236, 245, 255, 0.25)"; //拖曳区块背景顏色 ')]),i("li",[e._v("canvas.selectionDashArray = [5, 5]; //设定拖曳区块虚线样式")])]),i("h3",[e._v("知识点")]),i("ul",[i("li",[e._v(" //1: 获得画布上的所有对象："),i("br"),e._v(" var items = canvas.getObjects(); ")]),i("li",[e._v(" //2: 设置画布上的某个对象为活动对象。"),i("br"),e._v(" canvas.setActiveObject(items[i]); ")]),i("li",[e._v(" //3：获得画布上的活动对象"),i("br"),e._v(" canvas.getActiveObject() ")]),i("li",[e._v(" //4：取消画布中的所有对象的选中状态。"),i("br"),e._v(" canvas.discardActiveObject(); ")]),i("li",[e._v(" //5: 设置画布中的对象的某个属性值，比如第 0 个对象的 id"),i("br"),e._v(" var items = canvas.getObjects();"),i("br"),e._v(' tems[0].id ="items_id0" 或 items[0].set("id","items_id0") ')]),i("li",[e._v(" //6：获得画布中对象的某个属性，比如 第0 个对象的 id"),i("br"),e._v(" var items = canvas.getObjects();"),i("br"),e._v(" items[0].id;"),i("br"),e._v(" //或"),i("br"),e._v(' items[0].get("id");'),i("br")]),i("li",[e._v(" //7: 重新渲染一遍画布，当画布中的对象有变更，在最后显示的时候，需要执行一次该操作"),i("br"),e._v(" canvas.renderAll() ")]),i("li",[e._v(" //8: 清除画布中所有对象："),i("br"),e._v(" canvas.clear(); ")]),i("li",[e._v(" //9:清除画布中的活动对象："),i("br"),e._v(" var t = canvas.getActiveObject(); t && canvas.remove(t); ")]),i("li",[e._v(" //10: 设置活动对象在画布中的层级"),i("br"),e._v(" var t = canvas.getActiveObject();"),i("br"),e._v(" canvas.sendBackwards(t) //向下跳一层"),i("br"),e._v(" canvas.sendToBack(t) //向下跳底层："),i("br"),e._v(" canvas.bringForward(t) //向上跳一层："),i("br"),e._v(" canvas.bringToFront(t) //向上跳顶层："),i("br"),e._v(" //或者："),i("br"),e._v(" t.sendBackwards();"),i("br"),e._v(" t.sendToBack();"),i("br"),e._v(" t.bringForward();"),i("br"),e._v(" t.bringToFront();"),i("br")]),i("li",[e._v(" //11：当选择画布中的对象时，该对象不出现在顶层。"),i("br"),e._v(" canvas.preserveObjectStacking = true; ")])])])},c=[],s={name:"FabricJS"},o=s,v=i("2877"),g=function(e){e.options.__source="src/guide/views/canvas/drawboard/FabricJS.vue"},f=g,u=Object(v["a"])(o,l,c,!1,null,null,null);"function"===typeof f&&f(u);var b=u.exports,d={name:"BaseFabric",components:{FabricJS:b},data:function(){return{canvas:null,zoom:1,isDragging:!1,lastPosX:0,lastPosY:0,viewportTransform:[]}},mounted:function(){var e=this;this.$nextTick((function(){e.init()})),document.addEventListener("keydown",(function(t){var i=window.event?t.keyCode:t.which;8==i&&e.canvas.remove(e.canvas.getActiveObject())}))},methods:{init:function(){var e=this,t=this.canvas=new r["fabric"].Canvas(this.$refs.draw,{isDrawingMode:!0});r["fabric"].Object.prototype.transparentCorners=!1,t.freeDrawingBrush&&(t.freeDrawingBrush.color="#ff0",t.freeDrawingBrush.width=10,t.freeDrawingBrush.shadow=new r["fabric"].Shadow({blur:0,offsetX:0,offsetY:0,affectStroke:!0,color:"blue"})),console.log("canvas",t,this.$refs.draw),t.on("mouse:down",(function(t){console.log("mouse:down",t.e.type,t);var i=t.e;!0!==i.altKey||e.canvas.isDrawingMode||(e.isDragging=!0,e.canvas.selection=!1,e.lastPosX="touchstart"==i.type?i.targetTouches[0].clientX:i.clientX,e.lastPosY="touchstart"==i.type?i.targetTouches[0].clientY:i.clientY,console.log(e.lastPosX,e.lastPosY))})),t.on("mouse:move",(function(t){if(console.log("mouse:move",t.e.type,t),e.isDragging){var i=t.e,a=e.canvas.viewportTransform,n="touchmove"==i.type?i.targetTouches[0].clientX:i.clientX,r="touchmove"==i.type?i.targetTouches[0].clientY:i.clientY;a[4]+=n-e.lastPosX,a[5]+=r-e.lastPosY,console.log(n,e.lastPosX,r-e.lastPosY),e.canvas.requestRenderAll(),e.lastPosX=n,e.lastPosY=r}})),t.on("mouse:up",(function(t){console.log("mouse:up",t.e.type,t),e.isDragging&&(e.canvas.setViewportTransform(e.canvas.viewportTransform),e.isDragging=!1,e.canvas.selection=!0)})),t.on("mouse:wheel",(function(i){var a=i.e,n=a.deltaY,r=t.getZoom();r*=Math.pow(.999,n),r>10&&(r=10),r<.25&&(r=.25),e.zoom=r,t.zoomToPoint({x:a.offsetX,y:a.offsetY},r),a.preventDefault(),a.stopPropagation();var l=e.canvas.viewportTransform;r<.4?(l[4]=200-1e3*r/2,l[5]=200-1e3*r/2):(l[4]>=0?l[4]=0:l[4]<e.canvas.getWidth()-1e3*r&&(l[4]=e.canvas.getWidth()-1e3*r),l[5]>=0?l[5]=0:l[5]<e.canvas.getHeight()-1e3*r&&(l[5]=e.canvas.getHeight()-1e3*r))}))},drawHandler:function(){this.canvas&&(this.canvas.isDrawingMode=!0)},selectHandler:function(){this.canvas&&(this.canvas.isDrawingMode=!1,console.log("对象集合",this.canvas.getObjects()))},resetHandler:function(){var e=this;this.clearHandler();for(var t=this.$refs.draw,i=t.offsetWidth,a=t.offsetHeight,n=15;n--;){var l=r["fabric"].util.getRandomInt(30,60),c=["image","Rect","Triangle","Circle"][r["fabric"].util.getRandomInt(0,2)],s={top:r["fabric"].util.getRandomInt(0,i),left:r["fabric"].util.getRandomInt(0,a),fill:"green"};if("Circle"===c){s.radius=l;var o=new r["fabric"].Circle({radius:l,fill:"blue",originX:"center",originY:"center"}),v=new r["fabric"].Text("F"+l,{fontSize:l,fill:"#FFF",originX:"center",originY:"center"});this.canvas.add(new r["fabric"].Group([o,v],s))}else"image"==c?r["fabric"].Image.fromURL("/assets/image.jpg",(function(t){t.scale(.5).set({left:r["fabric"].util.getRandomInt(0,i/2),top:r["fabric"].util.getRandomInt(0,a)/2,angle:-15,clipTo:function(e){e.arc(0,0,300,0,2*Math.PI,!0)}}),e.canvas.add(t).setActiveObject(t)})):(s.width=l,s.height=l,this.canvas.add(new r["fabric"][c](s)))}},clearHandler:function(){this.canvas.clear()},selectFileHandler:function(e){var t=document.createElement("input");t.type="file",t.accept="image/png,image/jpeg,image/jpg,image/bmp",t.addEventListener("change",this.fileChangeHandler.bind(this)),t.click(e)},fileChangeHandler:function(e){var t=this;console.log("文件地址",e.target),console.log("this.files",e.target.files);var i=new FileReader;i.addEventListener("load",(function(){r["fabric"].Image.fromURL(i.result,(function(e){e.scale(.5).set({left:0,top:0,angle:0,clipTo:function(e){e.arc(0,0,300,0,2*Math.PI,!0)}}),t.canvas.add(e).setActiveObject(e)}))})),i.readAsDataURL(e.target.files[0])}}},_=d,h=(i("cb10"),function(e){e.options.__source="src/guide/views/canvas/BaseFabric.vue"}),m=h,p=Object(v["a"])(_,a,n,!1,null,"13a89826",null);"function"===typeof m&&m(p);t["default"]=p.exports}}]);