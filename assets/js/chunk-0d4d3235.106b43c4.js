(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d4d3235"],{"22fd":function(t,e,i){},8095:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-main",[i("el-row",{attrs:{gutter:50}},[i("vue-canvas-poster",{attrs:{painting:t.painting},on:{success:t.success,fail:t.fail}}),i("el-col",{attrs:{span:12}},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("文本区域")]),i("el-upload",{staticClass:"file-upload",attrs:{action:"#","on-change":t.fileChangeHandle,"auto-upload":!1,accept:".png, .jpg, .jpeg, .bmp","show-file-list":!1}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:t.publishPoster}},[t._v("发布成品")]),i("el-input",{on:{change:t.qrcodeChange},model:{value:t.qrcode.text,callback:function(e){t.$set(t.qrcode,"text",e)},expression:"qrcode.text"}})],1)],1),i("el-row",[i("div",{staticClass:"edit-poster",style:t.imageStyle},[i("img",{ref:"image",attrs:{src:t.image.url},on:{load:t.imageLoading}}),i("div",{staticClass:"qrcode-legend",style:t.qrStyle,on:{mousedown:t.startMove}})]),i("div",{staticClass:"edit-poster",style:t.imageStyle},[i("img",{ref:"image",attrs:{src:t.url}})])])],1)},o=[],n=(i("4160"),i("c0b6"),i("d3b7"),i("3ca3"),i("159b"),i("ddb0"),i("2b3d"),i("33a5")),a={name:"VuePoster",components:{VueCanvasPoster:n["VueCanvasPoster"]},data:function(){return{width:400,image:{ratio:1,url:null,width:0,height:0,clientWidth:0,clientHeight:0},qrcode:{text:"",mouseDown:!1,startX:0,startY:0,top:0,left:0,width:80,height:80},url:"",painting:null}},computed:{qrStyle:function(){return{top:this.qrcode.top+"px",left:this.qrcode.left+"px",width:this.qrcode.width+"px",height:this.qrcode.height+"px"}},imageStyle:function(){return{width:this.image.clientWidth+"px",height:this.image.clientHeight+"px"}}},mounted:function(){},methods:{fileChangeHandle:function(t,e){console.log(t),this.image.url=URL.createObjectURL(t.raw)},imageLoading:function(t){var e=new Image;e.src=this.image.url,console.log(e.src),this.image.width=e.width,this.image.height=e.height,console.log(e.width,e.height,t);var i=1;e.width>this.width&&(i=e.width/this.width,this.image.clientWidth=this.width,this.image.ratio=i),this.image.clientWidth=e.width/i,this.image.clientHeight=e.height/i,console.log(this.image)},publishPoster:function(){this.painting={width:this.image.width+"px",height:this.image.height+"px",background:"#f4f5f7",views:[{type:"image",url:this.image.url,css:{top:"0px",left:"0px",borderRadius:"10px",width:this.image.width+"px",height:this.image.height+"px"}},{type:"qrcode",content:window.location.href,css:{top:this.qrcode.top*this.image.ratio+"px",left:this.qrcode.left*this.image.ratio+"px",borderRadius:"5px",width:this.qrcode.width*this.image.ratio+"px",height:this.qrcode.height*this.image.ratio+"px"}}]}},qrcodeChange:function(){var t=this;this.painting&&this.painting.views.forEach((function(e){"qrcode"==e.type&&(e.content=t.qrcode.text)}))},success:function(t){this.url=t},fail:function(t){console.log("fail",t)},startMove:function(t){t.preventDefault(),this.qrcode.mouseDown=!0,this.qrcode.top=t.currentTarget.offsetTop,this.qrcode.left=t.currentTarget.offsetLeft,this.qrcode.startX=t.clientX,this.qrcode.startY=t.clientY,document.addEventListener("mousemove",this.mouseMoveHandler.bind(this),!1),document.addEventListener("mouseup",this.mouseUpHandler.bind(this),!1)},mouseMoveHandler:function(t){if(this.qrcode.mouseDown){var e=t.clientX-this.qrcode.startX,i=t.clientY-this.qrcode.startY;this.qrcode.top+=i,this.qrcode.left+=e,this.qrcode.startX=t.clientX,this.qrcode.startY=t.clientY}},mouseUpHandler:function(t){this.qrcode.mouseDown=!1,document.removeEventListener("mousemove",this.mouseMoveHandler.bind(this),!1),document.removeEventListener("mouseup",this.mouseUpHandler.bind(this),!1)}}},r=a,h=(i("87dc"),i("2877")),c=Object(h["a"])(r,s,o,!1,null,"023633c6",null);e["default"]=c.exports},"87dc":function(t,e,i){"use strict";var s=i("22fd"),o=i.n(s);o.a}}]);