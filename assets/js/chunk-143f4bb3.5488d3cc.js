(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-143f4bb3"],{"0a6c":function(e,t,n){},"25c7":function(e,t,n){"use strict";var i=n("0a6c"),o=n.n(i);o.a},"26e8":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100vh"}},[n("el-header",[n("label",[e._v("标 题：")]),n("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),n("el-button",{attrs:{type:"primary"},on:{click:e.newHandler}},[e._v("新 建")]),n("el-dropdown",{attrs:{"split-button":"",type:"danger"},on:{click:e.saveHandler,command:e.exportHandler}},[e._v(" 保 存 "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"md"}},[e._v("导出 *.md")]),n("el-dropdown-item",{attrs:{command:"html"}},[e._v("导出 *.html")])],1)],1)],1),n("el-main",[n("mavon-editor",{ref:"mavon-editor",staticClass:"fill",attrs:{toolbars:e.toolbars,fontSize:"16px",placeholder:"请输入文本"},on:{change:e.changeHandler,save:e.saveHandler},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)},o=[],l=(n("a15b"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("d4ec")),s=n("bee2"),a=n("262e"),r=n("2caf"),c=n("9ab4"),u=n("2d56"),d=n("1b40"),h=n("d1e8"),m=window.URL||window.webkitURL,v=function(e){Object(a["a"])(n,e);var t=Object(r["a"])(n);function n(){var e;return Object(l["a"])(this,n),e=t.apply(this,arguments),e.id=null,e.title=null,e.value="#新建文档",e.html=null,e.desc="",e.error="",e.toolbars={bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},e}return Object(s["a"])(n,[{key:"changeHandler",value:function(e,t){this.value=e,this.html=t}},{key:"resetDocument",value:function(){this.id=null,this.title=null,this.value=null,this.desc=null,this.error=null,this.$refs["mavon-editor"].subfieldtoggle()}},{key:"newHandler",value:function(){var e=this;this.title||this.value?this.$confirm("确认放弃当前内容，新建文档吗？","新建文档").then((function(t){e.resetDocument(),e.$router.push({path:"/markdown/edit/new"})})):(this.resetDocument(),this.$router.push({path:"/markdown/edit/new"}))}},{key:"editHandler",value:function(e){var t=this;Object(u["a"])("/edit/read",{id:e}).then((function(e){var n=e.data,i=e.success;if(!i)return t.resetDocument(),t.$message({type:"warn",message:"未查询到内容"});t.id=n.id,t.title=n.title,t.value=n.text||"",t.desc=n.desc,document.title=t.title||"新建文档"}))}},{key:"saveHandler",value:function(){var e=this;if(!this.value)return this.$message({type:"error",message:"暂无内容需要保存"});this.title?Object(u["a"])("/edit/save",{id:this.id,title:this.title,text:this.value,html:this.html,desc:this.desc}).then((function(t){console.log("保存",t),e.$message({type:"success",message:"内容已经保存成功"})})):this.$message({type:"error",message:"请输入标题内容"})}},{key:"exportHandler",value:function(e){var t=this,n=null;if(this.value&&this.html){n="md"==e?new Blob([this.value],{type:"text/plain"}):new Blob([this.html],{type:"html/plain"});var i=m.createObjectURL(n),o=document.createElement("a");o.style.display="none",o.href=i,o.download=[this.title,e].join("."),document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(i),t.$message({type:"success",message:"文档下载完成"})}),100)}else this.$message({type:"error",message:"暂无内容需要导出"})}},{key:"created",value:function(){var e=this.$route.params;e&&e.id?"new"===e.id?this.id=null:this.editHandler(e.id):this.resetDocument()}}]),n}(d["l"]);v=Object(c["a"])([Object(d["a"])({components:{VueCode:h["a"]},name:"MarkDownEditor"})],v);var f=v,p=f,b=(n("25c7"),n("2877")),w=function(e){e.options.__source="src/tutorial/views/markdown/Editor.vue"},g=w,y=Object(b["a"])(p,i,o,!1,null,"009f425a",null);"function"===typeof g&&g(y);t["default"]=y.exports},"2d56":function(e,t,n){"use strict";n("d3b7"),n("ac1f"),n("5319");var i=n("bc3a"),o=n.n(i),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,i){o.a.post(location.origin.replace(location.port,"2020")+e,t).then((function(e){var t=e.data;return n(t)})).catch(i)}))};t["a"]=l},"90f6":function(e,t,n){"use strict";var i=n("f247"),o=n.n(i);o.a},d1e8:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"code-button",class:{mask:e.show},on:{mouseenter:e.mouseEnterHandler,mouseleave:e.mouseLeaveHandler}},[e._t("default"),e.show?n("el-button",{attrs:{type:"text"},on:{click:e.openHandler}},[e._v("<code/>")]):e._e(),n("el-dialog",{attrs:{title:"",visible:e.visible,width:"50%","append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[n("h3",[e._v("显示slot内容")]),n("vue-code",[n("pre",{attrs:{lang:"html"}},[e._v(e._s(e.html))])])],1)],2)},o=[],l=(n("4160"),n("159b"),n("1cf6")),s={name:"VueCode",data:function(){return{show:!1,visible:!1,html:""}},methods:{mouseEnterHandler:function(){this.show=!0},mouseLeaveHandler:function(){this.show=!1},openHandler:function(){console.log("Code",JSON.stringify(l["a"])),console.log("this",this),this.visible=!0,this.$slots.default.forEach((function(e){e.componentInstance&&console.warn("----\x3e file ",e["__file"])})),this.html=this.$slots.default[0].componentInstance.$el,console.log(this.html),console.log("打开",this.$slots.default)}},mounted:function(){var e=this.$parent.$el;e.style.position="relative"}},a=s,r=(n("90f6"),n("2877")),c=function(e){e.options.__source="src/components/VueCode.vue"},u=c,d=Object(r["a"])(a,i,o,!1,null,"3b78119b",null);"function"===typeof u&&u(d);t["a"]=d.exports},f247:function(e,t,n){}}]);