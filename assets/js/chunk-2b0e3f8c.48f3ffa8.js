(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b0e3f8c"],{"25f0":function(e,n,t){"use strict";var o=t("6eeb"),i=t("825a"),s=t("d039"),r=t("ad6d"),c="toString",a=RegExp.prototype,l=a[c],u=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=c;(u||d)&&o(RegExp.prototype,c,(function(){var e=i(this),n=String(e.source),t=e.flags,o=String(void 0===t&&e instanceof RegExp&&!("flags"in a)?r.call(e):t);return"/"+n+"/"+o}),{unsafe:!0})},"39c1":function(e,n,t){"use strict";var o=t("eedf"),i=t.n(o);i.a},7406:function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-main",[t("el-row",{attrs:{gutter:50}},[t("el-col",{staticClass:"center",attrs:{xs:24,sm:24,md:12}},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("Publisher")]),t("div",{staticClass:"textarea",attrs:{contenteditable:""},on:{input:e.inputHandler}})],1),t("el-col",{staticClass:"center",attrs:{xs:24,sm:24,md:12}},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("Subscriber")]),t("div",{staticClass:"textarea"},[e._v(e._s(e.outputText))])],1)],1),t("el-tag",{staticClass:"error"},[e._v("左侧输入信息，右侧同步显示")]),t("vue-source",{attrs:{src:"guide/views/webrtc/PeerConnection.vue",lang:"html"}})],1)},i=[],s=(t("d3b7"),t("25f0"),{name:"PeerConnection",data:function(){return{inputText:"",outputText:"",servers:null,dataChannel:null,publisherPeerConnection:null,subscriberPeerConnection:null,error:null}},mounted:function(){this.init()},destroyed:function(){this.publisherPeerConnection.close(),this.subscriberPeerConnection.close()},methods:{inputHandler:function(e){this.inputText=e.target.outerText,this.dataChannel&&"open"===this.dataChannel.readyState&&this.dataChannel.send(this.inputText)},init:function(){this.createPublisher(),this.createSubscriber()},createPublisher:function(){var e=this;this.publisherPeerConnection=new RTCPeerConnection(this.servers),this.dataChannel=this.publisherPeerConnection.createDataChannel("sendDataChannel"),this.dataChannel.onopen=function(n){console.log("Send channel state is: "+e.dataChannel.readyState)},this.dataChannel.onclose=function(n){console.log("Send channel state is: "+e.dataChannel.readyState)},this.publisherPeerConnection.onicecandidate=function(n){e.handleCandidate(n.candidate,e.subscriberPeerConnection,"localPeer#:","local")},this.publisherPeerConnection.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1}).then((function(n){e.publisherPeerConnection.setLocalDescription(n),console.log("Offer from publisherPeerConnection \n"+n.sdp),e.subscriberPeerConnection.setRemoteDescription(n),e.subscriberPeerConnection.createAnswer().then((function(n){e.subscriberPeerConnection.setLocalDescription(n),console.log("Answer from subscriberPeerConnection \n"+n.sdp),e.publisherPeerConnection.setRemoteDescription(n)})).catch((function(e){console.log("Failed to create session description: "+e.toString())}))})).catch((function(e){console.log("Failed to create session description: "+e.toString())}))},createSubscriber:function(){var e=this;this.subscriberPeerConnection=new RTCPeerConnection(this.servers),this.subscriberPeerConnection.onicecandidate=function(n){e.handleCandidate(n.candidate,e.publisherPeerConnection,"remotePeer#:","remote")},this.subscriberPeerConnection.ondatachannel=function(n){var t=n.channel;t.onmessage=function(n){e.outputText=n.data},t.onopen=t.onclose=function(){var e=t.readyState;console.log("Receive channel state is: "+e)}}},handleCandidate:function(e,n,t,o){n.addIceCandidate(e).then((function(){console.log("AddIceCandidate success.")})).catch((function(e){console.log("Failed to add ICE candidate: "+e.toString())})),console.log(t+"New "+o+" ICE candidate: "+(e?e.candidate:"(null)"))}}}),r=s,c=(t("39c1"),t("2877")),a=function(e){e.options.__source="src/guide/views/webrtc/PeerConnection.vue"},l=a,u=Object(c["a"])(r,o,i,!1,null,"44614af0",null);"function"===typeof l&&l(u);n["default"]=u.exports},eedf:function(e,n,t){}}]);