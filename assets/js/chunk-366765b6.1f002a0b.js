(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-366765b6"],{2532:function(e,t,n){"use strict";var i=n("23e7"),s=n("5a34"),a=n("1d80"),r=n("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(a(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},"26e8":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100vh"}},[n("el-header",[n("label",[e._v("标 题：")]),n("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),n("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:function(t){return e.saveHandler()},command:e.exportHandler}},[e._v(" 保 存 "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"md"}},[e._v("导出 *.md")]),n("el-dropdown-item",{attrs:{command:"html"}},[e._v("导出 *.html")]),n("el-dropdown-item",{attrs:{command:"publish"}},[e._v("发行H5")])],1)],1)],1),n("el-main",[n("mavon-editor",{ref:"mavon-editor",staticClass:"fill",attrs:{toolbars:e.toolbars,fontSize:"16px",placeholder:"请输入文本"},on:{change:e.changeHandler,save:function(t){return e.saveHandler()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("template",{slot:"left-toolbar-before"},[n("button",{staticClass:"op-icon fa el-button el-icon-document-add",attrs:{type:"button",title:"新建"},on:{click:e.newHandler}}),n("span",{staticClass:"op-icon-divider"})]),n("template",{slot:"left-toolbar-after"},[n("button",{staticClass:"op-icon fa el-button el-icon-tableware",attrs:{type:"button",title:"页面样式和扩展"},on:{click:function(t){e.tableware.visible=!0}}})])],2)],1),n("el-dialog",{attrs:{title:"资源",visible:e.tableware.visible,center:"",width:"600px"},on:{"update:visible":function(t){return e.$set(e.tableware,"visible",t)}}},[n("MoreList",{attrs:{title:"style",list:e.tableware.preStyleList,placeholder:"请输入style地址"},model:{value:e.tableware.styles,callback:function(t){e.$set(e.tableware,"styles",t)},expression:"tableware.styles"}},[n("el-button",{attrs:{slot:"title",type:"text"},slot:"title"},[e._v(" 预设css "),n("i",{staticClass:"el-icon-arrow-down"})])],1),n("MoreList",{attrs:{title:"script",list:e.tableware.preScriptList,placeholder:"请输入script地址"},model:{value:e.tableware.scripts,callback:function(t){e.$set(e.tableware,"scripts",t)},expression:"tableware.scripts"}},[n("el-button",{attrs:{slot:"title",type:"text"},slot:"title"},[e._v(" 预设js "),n("i",{staticClass:"el-icon-arrow-down"})])],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.tableware.visible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tableware.visible=!1}}},[e._v("确 定")])],1)],1)],1)},s=[],a=(n("4de4"),n("a15b"),n("d3b7"),n("3ca3"),n("498a"),n("ddb0"),n("2b3d"),n("d4ec")),r=n("bee2"),l=n("262e"),o=n("2caf"),c=n("9ab4"),u=n("2d56"),d=n("1b40"),f=n("d1e8"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"more-list"},[e.title?n("div",{staticClass:"list-item"},[n("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.title))]),n("el-dropdown",{on:{command:e.commandHandler}},[e._t("title",[n("span",{staticClass:"el-dropdown-link"},[e._v("预设 "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})])]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.list,(function(t,i){return n("el-dropdown-item",{key:i,attrs:{command:t.value}},[e._v(e._s(t.label))])})),1)],2)],1):e._e(),e._l(e.value,(function(t,i){return n("div",{key:i,staticClass:"list-item"},[n("el-input",{attrs:{value:t,placeholder:e.placeholder},on:{input:function(t){return e.changeItemAtIndex(t,i)}}}),n("span",{staticClass:"el-icon-tools"},[n("i",{staticClass:"el-icon el-icon-circle-plus",on:{click:function(t){return e.addItemAtIndex(i)}}}),e.value.length>1?n("i",{staticClass:"el-icon el-icon-error",on:{click:function(t){return e.removeItemAtIndex(i)}}}):e._e()])],1)}))],2)},h=[],v=(n("caad"),n("a434"),n("2532"),function(e){Object(l["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(r["a"])(n,[{key:"changeItemAtIndex",value:function(e,t){var n=JSON.parse(JSON.stringify(this.value));n.splice(t,1,e),this.$emit("input",n)}},{key:"addItemAtIndex",value:function(e){var t=JSON.parse(JSON.stringify(this.value));t.splice(e+1,0,""),this.$emit("input",t)}},{key:"removeItemAtIndex",value:function(e){var t=JSON.parse(JSON.stringify(this.value));t.splice(e,1),this.$emit("input",t)}},{key:"commandHandler",value:function(e){if(!this.value.includes(e)){var t=JSON.parse(JSON.stringify(this.value));t.push(e),this.$emit("input",t)}}},{key:"created",value:function(){this.value.length||this.$emit("input",[""])}}]),n}(d["l"]));Object(c["b"])([Object(d["f"])({default:function(){return[""]}})],v.prototype,"value",void 0),Object(c["b"])([Object(d["f"])()],v.prototype,"title",void 0),Object(c["b"])([Object(d["f"])({default:"请输入"})],v.prototype,"placeholder",void 0),Object(c["b"])([Object(d["f"])()],v.prototype,"list",void 0),v=Object(c["b"])([Object(d["a"])({name:"MoreList"})],v);var m=v,b=m,w=(n("e6d8"),n("2877")),y=function(e){e.options.__source="src/tutorial/views/markdown/MoreList.vue"},g=y,k=Object(w["a"])(b,p,h,!1,null,"400893ac",null);"function"===typeof g&&g(k);var j=k.exports,O=window.URL||window.webkitURL,_=function(e){Object(l["a"])(n,e);var t=Object(o["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.id=null,e.title=null,e.value="#新建文档",e.html=null,e.desc="",e.error="",e.tableware={visible:!1,styles:[],scripts:[],preStyleList:[{label:"animate.css@4.1.1",value:"/css/animate.css/4.1.1/animate.min.css"}],preScriptList:[{label:"vuejs 2.0",value:"//cn.vuejs.org/js/vue.min.js"},{label:"vuejs 3.0-beta",value:"//unpkg.com/vue@3.0.11/dist/vue.global.js"},{label:"jQuery 3.6.0",value:"//code.jquery.com/jquery-3.6.0.min.js"}]},e.toolbars={bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},e}return Object(r["a"])(n,[{key:"routeChangeHandler",value:function(e){this.init(e.params)}},{key:"created",value:function(){this.init(this.$route.params)}},{key:"init",value:function(e){e&&e.id?"new"===e.id?(this.id=null,this.resetDocument()):this.editHandler(e.id):this.resetDocument()}},{key:"changeHandler",value:function(e,t){this.value=e,this.html=t}},{key:"resetDocument",value:function(){this.id=null,this.title=null,this.value="",this.desc=null,this.error=null,this.$refs["mavon-editor"].subfieldtoggle()}},{key:"newHandler",value:function(){var e=this;this.title||this.value?this.$confirm("确认放弃当前内容，新建文档吗？","新建文档").then((function(t){e.resetDocument(),e.$router.push({path:"/markdown/edit/new"})})):(this.resetDocument(),this.$router.push({path:"/markdown/edit/new"}))}},{key:"editHandler",value:function(e){var t=this;Object(u["a"])("/edit/read",{id:e}).then((function(e){var n=e.data,i=e.success;if(!i)return t.resetDocument(),t.$message({type:"warn",message:"未查询到内容"});t.id=n.id,t.title=n.title,t.value=n.text||"",t.desc=n.desc;var s=JSON.parse(n.links);t.tableware.styles=s.styles||[],t.tableware.scripts=s.scripts||[],document.title=t.title||"新建文档"}))}},{key:"saveHandler",value:function(e){var t=this;if(!this.value)return this.$message({type:"error",message:"暂无内容需要保存"});this.title?Object(u["a"])("/edit/save",{id:this.id,title:this.title,text:this.value,html:this.html,desc:this.desc,links:{styles:this.tableware.styles.filter((function(e){return e.trim()})),scripts:this.tableware.scripts.filter((function(e){return e.trim()}))}}).then((function(n){var i=n.success,s=n.data;console.log("保存",s),i&&(e&&e(s),t.$router.push({path:"/markdown/edit/"+s.id}),t.$message({type:"success",message:"内容已经保存成功"}))})):this.$message({type:"error",message:"请输入标题内容"})}},{key:"exportHandler",value:function(e){var t=this;if("publish"===e)return this.saveHandler((function(e){Object(u["a"])("/edit/publish",{id:e.id}).then((function(e){var n=e.success,i=e.message;t.$message({type:n?"success":"error",message:n?"发布完成":i})}))}));var n=null;if(this.value&&this.html){n="md"==e?new Blob([this.value],{type:"text/plain"}):new Blob([this.html],{type:"html/plain"});var i=O.createObjectURL(n),s=document.createElement("a");s.style.display="none",s.href=i,s.download=[this.title,e].join("."),document.body.appendChild(s),s.click(),setTimeout((function(){document.body.removeChild(s),window.URL.revokeObjectURL(i),t.$message({type:"success",message:"文档下载完成"})}),100)}else this.$message({type:"error",message:"暂无内容需要导出"})}}]),n}(d["l"]);Object(c["b"])([Object(d["m"])("$route")],_.prototype,"routeChangeHandler",null),_=Object(c["b"])([Object(d["a"])({components:{VueCode:f["a"],MoreList:j},name:"MarkDownEditor"})],_);var x=_,$=x,C=(n("53ee"),function(e){e.options.__source="src/tutorial/views/markdown/Editor.vue"}),S=C,H=Object(w["a"])($,i,s,!1,null,"81cf6b10",null);"function"===typeof S&&S(H);t["default"]=H.exports},"2d56":function(e,t,n){"use strict";n("d3b7"),n("ac1f"),n("5319");var i=n("bc3a"),s=n.n(i),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,i){s.a.post(location.origin.replace(location.port,"2020")+e,t).then((function(e){var t=e.data;return n(t)})).catch(i)}))};t["a"]=a},"498a":function(e,t,n){"use strict";var i=n("23e7"),s=n("58a8").trim,a=n("c8d2");i({target:"String",proto:!0,forced:a("trim")},{trim:function(){return s(this)}})},"4de4":function(e,t,n){"use strict";var i=n("23e7"),s=n("b727").filter,a=n("1dde"),r=n("ae40"),l=a("filter"),o=r("filter");i({target:"Array",proto:!0,forced:!l||!o},{filter:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},"53ee":function(e,t,n){"use strict";var i=n("d9c1"),s=n.n(i);s.a},"5a34":function(e,t,n){var i=n("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},"90f6":function(e,t,n){"use strict";var i=n("f247"),s=n.n(i);s.a},a15b:function(e,t,n){"use strict";var i=n("23e7"),s=n("44ad"),a=n("fc6a"),r=n("a640"),l=[].join,o=s!=Object,c=r("join",",");i({target:"Array",proto:!0,forced:o||!c},{join:function(e){return l.call(a(this),void 0===e?",":e)}})},a434:function(e,t,n){"use strict";var i=n("23e7"),s=n("23cb"),a=n("a691"),r=n("50c4"),l=n("7b0b"),o=n("65f0"),c=n("8418"),u=n("1dde"),d=n("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,v=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var n,i,u,d,f,p,w=l(this),y=r(w.length),g=s(e,y),k=arguments.length;if(0===k?n=i=0:1===k?(n=0,i=y-g):(n=k-2,i=v(h(a(t),0),y-g)),y+n-i>m)throw TypeError(b);for(u=o(w,i),d=0;d<i;d++)f=g+d,f in w&&c(u,d,w[f]);if(u.length=i,n<i){for(d=g;d<y-i;d++)f=d+i,p=d+n,f in w?w[p]=w[f]:delete w[p];for(d=y;d>y-i+n;d--)delete w[d-1]}else if(n>i)for(d=y-i;d>g;d--)f=d+i-1,p=d+n-1,f in w?w[p]=w[f]:delete w[p];for(d=0;d<n;d++)w[d+g]=arguments[d+2];return w.length=y-i+n,u}})},ab13:function(e,t,n){var i=n("b622"),s=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[s]=!1,"/./"[e](t)}catch(i){}}return!1}},bee2:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.d(t,"a",(function(){return s}))},c8d2:function(e,t,n){var i=n("d039"),s=n("5899"),a="​᠎";e.exports=function(e){return i((function(){return!!s[e]()||a[e]()!=a||s[e].name!==e}))}},caad:function(e,t,n){"use strict";var i=n("23e7"),s=n("4d64").includes,a=n("44d2"),r=n("ae40"),l=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!l},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d1e8:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"code-button",class:{mask:e.show},on:{mouseenter:e.mouseEnterHandler,mouseleave:e.mouseLeaveHandler}},[e._t("default"),e.show?n("el-button",{attrs:{type:"text"},on:{click:e.openHandler}},[e._v("<code/>")]):e._e(),n("el-dialog",{attrs:{title:"",visible:e.visible,width:"50%","append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[n("h3",[e._v("显示slot内容")]),n("vue-code",[n("pre",{attrs:{lang:"html"}},[e._v(e._s(e.html))])])],1)],2)},s=[],a=(n("4160"),n("159b"),n("1cf6")),r={name:"VueCode",data:function(){return{show:!1,visible:!1,html:""}},methods:{mouseEnterHandler:function(){this.show=!0},mouseLeaveHandler:function(){this.show=!1},openHandler:function(){console.log("Code",JSON.stringify(a["a"])),console.log("this",this),this.visible=!0,this.$slots.default.forEach((function(e){e.componentInstance&&console.warn("----\x3e file ",e["__file"])})),this.html=this.$slots.default[0].componentInstance.$el,console.log(this.html),console.log("打开",this.$slots.default)}},mounted:function(){var e=this.$parent.$el;e.style.position="relative"}},l=r,o=(n("90f6"),n("2877")),c=function(e){e.options.__source="src/components/VueCode.vue"},u=c,d=Object(o["a"])(l,i,s,!1,null,"3b78119b",null);"function"===typeof u&&u(d);t["a"]=d.exports},d42c:function(e,t,n){},d9c1:function(e,t,n){},e6d8:function(e,t,n){"use strict";var i=n("d42c"),s=n.n(i);s.a},f247:function(e,t,n){}}]);