(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70d89f24"],{"0268":function(e,t,i){"use strict";var n=i("1d9b"),l=i.n(n);l.a},"131f":function(e,t,i){},"1d9b":function(e,t,i){},"26e8":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticStyle:{height:"100vh"}},[i("el-header",[i("label",[e._v("标 题：")]),i("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),i("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:e.saveHandler,command:e.exportHandler}},[e._v(" 保 存 "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"md"}},[e._v("导出 *.md")]),i("el-dropdown-item",{attrs:{command:"html"}},[e._v("导出 *.html")])],1)],1)],1),i("el-main",[i("mavon-editor",{ref:"mavon-editor",staticClass:"fill",attrs:{toolbars:e.toolbars,fontSize:"16px",placeholder:"请输入文本"},on:{change:e.changeHandler,save:e.saveHandler},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[i("template",{slot:"left-toolbar-before"},[i("button",{staticClass:"op-icon fa el-button el-icon-document-add",attrs:{type:"button",title:"新建"},on:{click:e.newHandler}}),i("span",{staticClass:"op-icon-divider"})]),i("template",{slot:"left-toolbar-after"},[i("button",{staticClass:"op-icon fa el-button el-icon-tableware",attrs:{type:"button",title:"页面样式和扩展"},on:{click:function(t){e.tableware.visible=!0}}})])],2)],1),i("el-dialog",{attrs:{title:"资源",visible:e.tableware.visible,center:"",width:"500px"},on:{"update:visible":function(t){return e.$set(e.tableware,"visible",t)}}},[i("MoreList",{attrs:{title:"style",placeholder:"请输入style地址"},model:{value:e.tableware.styles,callback:function(t){e.$set(e.tableware,"styles",t)},expression:"tableware.styles"}}),i("MoreList",{attrs:{title:"script",placeholder:"请输入script地址"},model:{value:e.tableware.scripts,callback:function(t){e.$set(e.tableware,"scripts",t)},expression:"tableware.scripts"}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.tableware.visible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tableware.visible=!1}}},[e._v("确 定")])],1)],1)],1)},l=[],s=(i("4de4"),i("a15b"),i("d3b7"),i("3ca3"),i("498a"),i("ddb0"),i("2b3d"),i("d4ec")),a=i("bee2"),o=i("262e"),r=i("2caf"),c=i("9ab4"),u=i("2d56"),d=i("1b40"),h=i("d1e8"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"more-list"},[e.title?i("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.title))]):e._e(),e._l(e.value,(function(t,n){return i("div",{key:n,staticClass:"list-item"},[i("el-input",{attrs:{value:t,placeholder:e.placeholder},on:{input:function(t){return e.changeItemAtIndex(t,n)}}}),i("span",{staticClass:"el-icon-tools"},[i("i",{staticClass:"el-icon el-icon-circle-plus",on:{click:function(t){return e.addItemAtIndex(n)}}}),e.value.length>1?i("i",{staticClass:"el-icon el-icon-error",on:{click:function(t){return e.removeItemAtIndex(n)}}}):e._e()])],1)}))],2)},p=[],v=(i("a434"),function(e){Object(o["a"])(i,e);var t=Object(r["a"])(i);function i(){return Object(s["a"])(this,i),t.apply(this,arguments)}return Object(a["a"])(i,[{key:"changeItemAtIndex",value:function(e,t){var i=JSON.parse(JSON.stringify(this.value));i.splice(t,1,e),this.$emit("input",i)}},{key:"addItemAtIndex",value:function(e){var t=JSON.parse(JSON.stringify(this.value));t.splice(e+1,0,""),this.$emit("input",t)}},{key:"removeItemAtIndex",value:function(e){var t=JSON.parse(JSON.stringify(this.value));t.splice(e,1),this.$emit("input",t)}},{key:"created",value:function(){this.value.length||this.$emit("input",[""])}}]),i}(d["l"]));Object(c["a"])([Object(d["f"])({default:function(){return[""]}})],v.prototype,"value",void 0),Object(c["a"])([Object(d["f"])()],v.prototype,"title",void 0),Object(c["a"])([Object(d["f"])({default:"请输入"})],v.prototype,"placeholder",void 0),v=Object(c["a"])([Object(d["a"])({name:"MoreList"})],v);var m=v,b=m,w=(i("0268"),i("2877")),y=function(e){e.options.__source="src/tutorial/views/markdown/MoreList.vue"},g=y,k=Object(w["a"])(b,f,p,!1,null,"24f1e627",null);"function"===typeof g&&g(k);var O=k.exports,_=window.URL||window.webkitURL,$=function(e){Object(o["a"])(i,e);var t=Object(r["a"])(i);function i(){var e;return Object(s["a"])(this,i),e=t.apply(this,arguments),e.id=null,e.title=null,e.value="#新建文档",e.html=null,e.desc="",e.error="",e.tableware={visible:!1,styles:[],scripts:[]},e.toolbars={bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},e}return Object(a["a"])(i,[{key:"changeHandler",value:function(e,t){this.value=e,this.html=t}},{key:"resetDocument",value:function(){this.id=null,this.title=null,this.value=null,this.desc=null,this.error=null,this.$refs["mavon-editor"].subfieldtoggle()}},{key:"newHandler",value:function(){var e=this;this.title||this.value?this.$confirm("确认放弃当前内容，新建文档吗？","新建文档").then((function(t){e.resetDocument(),e.$router.push({path:"/markdown/edit/new"})})):(this.resetDocument(),this.$router.push({path:"/markdown/edit/new"}))}},{key:"editHandler",value:function(e){var t=this;Object(u["a"])("/edit/read",{id:e}).then((function(e){var i=e.data,n=e.success;if(!n)return t.resetDocument(),t.$message({type:"warn",message:"未查询到内容"});t.id=i.id,t.title=i.title,t.value=i.text||"",t.desc=i.desc;var l=JSON.parse(i.links);t.tableware.styles=l.styles||[],t.tableware.scripts=l.scripts||[],document.title=t.title||"新建文档"}))}},{key:"saveHandler",value:function(){var e=this;if(!this.value)return this.$message({type:"error",message:"暂无内容需要保存"});this.title?Object(u["a"])("/edit/save",{id:this.id,title:this.title,text:this.value,html:this.html,desc:this.desc,links:{styles:this.tableware.styles.filter((function(e){return e.trim()})),scripts:this.tableware.scripts.filter((function(e){return e.trim()}))}}).then((function(t){console.log("保存",t),e.$message({type:"success",message:"内容已经保存成功"})})):this.$message({type:"error",message:"请输入标题内容"})}},{key:"exportHandler",value:function(e){var t=this,i=null;if(this.value&&this.html){i="md"==e?new Blob([this.value],{type:"text/plain"}):new Blob([this.html],{type:"html/plain"});var n=_.createObjectURL(i),l=document.createElement("a");l.style.display="none",l.href=n,l.download=[this.title,e].join("."),document.body.appendChild(l),l.click(),setTimeout((function(){document.body.removeChild(l),window.URL.revokeObjectURL(n),t.$message({type:"success",message:"文档下载完成"})}),100)}else this.$message({type:"error",message:"暂无内容需要导出"})}},{key:"created",value:function(){var e=this.$route.params;e&&e.id?"new"===e.id?this.id=null:this.editHandler(e.id):this.resetDocument()}}]),i}(d["l"]);$=Object(c["a"])([Object(d["a"])({components:{VueCode:h["a"],MoreList:O},name:"MarkDownEditor"})],$);var j=$,x=j,C=(i("b4af"),function(e){e.options.__source="src/tutorial/views/markdown/Editor.vue"}),H=C,I=Object(w["a"])(x,n,l,!1,null,"72182f9f",null);"function"===typeof H&&H(I);t["default"]=I.exports},"2d56":function(e,t,i){"use strict";i("d3b7"),i("ac1f"),i("5319");var n=i("bc3a"),l=i.n(n),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(i,n){l.a.post(location.origin.replace(location.port,"2020")+e,t).then((function(e){var t=e.data;return i(t)})).catch(n)}))};t["a"]=s},"90f6":function(e,t,i){"use strict";var n=i("f247"),l=i.n(n);l.a},a434:function(e,t,i){"use strict";var n=i("23e7"),l=i("23cb"),s=i("a691"),a=i("50c4"),o=i("7b0b"),r=i("65f0"),c=i("8418"),u=i("1dde"),d=i("ae40"),h=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!h||!f},{splice:function(e,t){var i,n,u,d,h,f,w=o(this),y=a(w.length),g=l(e,y),k=arguments.length;if(0===k?i=n=0:1===k?(i=0,n=y-g):(i=k-2,n=v(p(s(t),0),y-g)),y+i-n>m)throw TypeError(b);for(u=r(w,n),d=0;d<n;d++)h=g+d,h in w&&c(u,d,w[h]);if(u.length=n,i<n){for(d=g;d<y-n;d++)h=d+n,f=d+i,h in w?w[f]=w[h]:delete w[f];for(d=y;d>y-n+i;d--)delete w[d-1]}else if(i>n)for(d=y-n;d>g;d--)h=d+n-1,f=d+i-1,h in w?w[f]=w[h]:delete w[f];for(d=0;d<i;d++)w[d+g]=arguments[d+2];return w.length=y-n+i,u}})},b4af:function(e,t,i){"use strict";var n=i("131f"),l=i.n(n);l.a},d1e8:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"code-button",class:{mask:e.show},on:{mouseenter:e.mouseEnterHandler,mouseleave:e.mouseLeaveHandler}},[e._t("default"),e.show?i("el-button",{attrs:{type:"text"},on:{click:e.openHandler}},[e._v("<code/>")]):e._e(),i("el-dialog",{attrs:{title:"",visible:e.visible,width:"50%","append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[i("h3",[e._v("显示slot内容")]),i("vue-code",[i("pre",{attrs:{lang:"html"}},[e._v(e._s(e.html))])])],1)],2)},l=[],s=(i("4160"),i("159b"),i("1cf6")),a={name:"VueCode",data:function(){return{show:!1,visible:!1,html:""}},methods:{mouseEnterHandler:function(){this.show=!0},mouseLeaveHandler:function(){this.show=!1},openHandler:function(){console.log("Code",JSON.stringify(s["a"])),console.log("this",this),this.visible=!0,this.$slots.default.forEach((function(e){e.componentInstance&&console.warn("----\x3e file ",e["__file"])})),this.html=this.$slots.default[0].componentInstance.$el,console.log(this.html),console.log("打开",this.$slots.default)}},mounted:function(){var e=this.$parent.$el;e.style.position="relative"}},o=a,r=(i("90f6"),i("2877")),c=function(e){e.options.__source="src/components/VueCode.vue"},u=c,d=Object(r["a"])(o,n,l,!1,null,"3b78119b",null);"function"===typeof u&&u(d);t["a"]=d.exports},f247:function(e,t,i){}}]);