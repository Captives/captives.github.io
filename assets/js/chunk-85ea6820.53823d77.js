(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85ea6820"],{2532:function(t,e,i){"use strict";var n=i("23e7"),a=i("5a34"),r=i("1d80"),s=i("ab13");n({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(r(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"26e8":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",{staticStyle:{height:"100vh"}},[i("el-header",[i("label",[t._v("标 题：")]),i("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:function(e){return t.saveHandler()},command:t.exportHandler}},[t._v(" 保 存 "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"md"}},[t._v("导出 *.md")]),i("el-dropdown-item",{attrs:{command:"html"}},[t._v("导出 *.html")]),i("el-dropdown-item",{attrs:{command:"publish"}},[t._v("发行H5")])],1)],1)],1),i("el-main",[i("mavon-editor",{ref:"mavon-editor",staticClass:"fill content",attrs:{toolbars:t.toolbars,ishljs:!0,externalLink:t.externalLink,fontSize:"16px",placeholder:"请输入文本"},on:{change:t.changeHandler,save:function(e){return t.saveHandler()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[i("template",{slot:"left-toolbar-before"},[i("button",{staticClass:"op-icon fa el-button el-icon-document-add",attrs:{type:"button",title:"新建"},on:{click:t.newHandler}}),i("span",{staticClass:"op-icon-divider"})]),i("template",{slot:"left-toolbar-after"},[i("button",{staticClass:"op-icon fa el-button el-icon-tableware",attrs:{type:"button",title:"页面样式和扩展"},on:{click:function(e){t.tableware.visible=!0}}})])],2)],1),i("el-dialog",{attrs:{title:"资源",visible:t.tableware.visible,center:"",width:"600px"},on:{"update:visible":function(e){return t.$set(t.tableware,"visible",e)}}},[i("MoreList",{attrs:{title:"style",list:t.tableware.preStyleList,placeholder:"请输入style地址"},model:{value:t.tableware.styles,callback:function(e){t.$set(t.tableware,"styles",e)},expression:"tableware.styles"}},[i("el-button",{attrs:{slot:"title",type:"text"},slot:"title"},[t._v(" 预设css "),i("i",{staticClass:"el-icon-arrow-down"})])],1),i("MoreList",{attrs:{title:"script",list:t.tableware.preScriptList,placeholder:"请输入script地址"},model:{value:t.tableware.scripts,callback:function(e){t.$set(t.tableware,"scripts",e)},expression:"tableware.scripts"}},[i("el-button",{attrs:{slot:"title",type:"text"},slot:"title"},[t._v(" 预设js "),i("i",{staticClass:"el-icon-arrow-down"})])],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.tableware.visible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.tableware.visible=!1}}},[t._v("确 定")])],1)],1)],1)},a=[],r=(i("4de4"),i("a15b"),i("d3b7"),i("3ca3"),i("498a"),i("ddb0"),i("2b3d"),i("d4ec")),s=i("bee2"),l=i("262e"),o=i("2caf"),c=i("9ab4"),u=i("2d56"),d=i("1b40"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"more-list"},[t.title?i("div",{staticClass:"list-item"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.title))]),i("el-dropdown",{on:{command:t.commandHandler}},[t._t("title",[i("span",{staticClass:"el-dropdown-link"},[t._v("预设 "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})])]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.list,(function(e,n){return i("el-dropdown-item",{key:n,attrs:{command:e.value}},[t._v(t._s(e.label))])})),1)],2)],1):t._e(),t._l(t.value,(function(e,n){return i("div",{key:n,staticClass:"list-item"},[i("el-input",{attrs:{value:e,placeholder:t.placeholder},on:{input:function(e){return t.changeItemAtIndex(e,n)}}}),i("span",{staticClass:"el-icon-tools"},[i("i",{staticClass:"el-icon el-icon-circle-plus",on:{click:function(e){return t.addItemAtIndex(n)}}}),t.value.length>1?i("i",{staticClass:"el-icon el-icon-error",on:{click:function(e){return t.removeItemAtIndex(n)}}}):t._e()])],1)}))],2)},v=[],h=(i("caad"),i("a434"),i("2532"),function(t){Object(l["a"])(i,t);var e=Object(o["a"])(i);function i(){return Object(r["a"])(this,i),e.apply(this,arguments)}return Object(s["a"])(i,[{key:"changeItemAtIndex",value:function(t,e){var i=JSON.parse(JSON.stringify(this.value));i.splice(e,1,t),this.$emit("input",i)}},{key:"addItemAtIndex",value:function(t){var e=JSON.parse(JSON.stringify(this.value));e.splice(t+1,0,""),this.$emit("input",e)}},{key:"removeItemAtIndex",value:function(t){var e=JSON.parse(JSON.stringify(this.value));e.splice(t,1),this.$emit("input",e)}},{key:"commandHandler",value:function(t){if(!this.value.includes(t)){var e=JSON.parse(JSON.stringify(this.value));e.push(t),this.$emit("input",e)}}},{key:"created",value:function(){this.value.length||this.$emit("input",[""])}}]),i}(d["l"]));Object(c["b"])([Object(d["f"])({default:function(){return[""]}})],h.prototype,"value",void 0),Object(c["b"])([Object(d["f"])()],h.prototype,"title",void 0),Object(c["b"])([Object(d["f"])({default:"请输入"})],h.prototype,"placeholder",void 0),Object(c["b"])([Object(d["f"])()],h.prototype,"list",void 0),h=Object(c["b"])([Object(d["a"])({name:"MoreList"})],h);var f=h,m=f,b=(i("e6d8"),i("2877")),w=function(t){t.options.__source="src/tutorial/views/markdown/MoreList.vue"},y=w,g=Object(b["a"])(m,p,v,!1,null,"400893ac",null);"function"===typeof y&&y(g);var k=g.exports,j=window.URL||window.webkitURL,O=function(t){Object(l["a"])(i,t);var e=Object(o["a"])(i);function i(){var t;return Object(r["a"])(this,i),t=e.apply(this,arguments),t.id=null,t.title=null,t.value="#新建文档",t.html=null,t.desc="",t.error="",t.tableware={visible:!1,styles:[],scripts:[],preStyleList:[{label:"animate.css@4.1.1",value:"/css/animate.css/4.1.1/animate.min.css"}],preScriptList:[{label:"vuejs 2.0",value:"//cn.vuejs.org/js/vue.min.js"},{label:"vuejs 3.0-beta",value:"//unpkg.com/vue@3.0.11/dist/vue.global.js"},{label:"jQuery 3.6.0",value:"//code.jquery.com/jquery-3.6.0.min.js"}]},t.toolbars={bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},t.externalLink={markdown_css:!1},t}return Object(s["a"])(i,[{key:"routeChangeHandler",value:function(t){this.init(t.params)}},{key:"created",value:function(){this.init(this.$route.params)}},{key:"init",value:function(t){t&&t.id?"new"===t.id?(this.id=null,this.resetDocument()):this.editHandler(t.id):this.resetDocument()}},{key:"changeHandler",value:function(t,e){this.value=t,this.html=e}},{key:"resetDocument",value:function(){this.id=null,this.title=null,this.value="",this.desc=null,this.error=null,this.$refs["mavon-editor"].subfieldtoggle()}},{key:"newHandler",value:function(){var t=this;this.title||this.value?this.$confirm("确认放弃当前内容，新建文档吗？","新建文档").then((function(e){t.resetDocument(),t.$router.push({path:"/markdown/edit/new"})})):(this.resetDocument(),this.$router.push({path:"/markdown/edit/new"}))}},{key:"editHandler",value:function(t){var e=this;Object(u["a"])("/edit/read",{id:t}).then((function(t){var i=t.data,n=t.success;if(!n)return e.resetDocument(),e.$message({type:"warn",message:"未查询到内容"});e.id=i.id,e.title=i.title,e.value=i.text||"",e.desc=i.desc;var a=JSON.parse(i.links);e.tableware.styles=a.styles||[],e.tableware.scripts=a.scripts||[],document.title=e.title||"新建文档"}))}},{key:"saveHandler",value:function(t){var e=this;if(!this.value)return this.$message({type:"error",message:"暂无内容需要保存"});this.title?Object(u["a"])("/edit/save",{id:this.id,title:this.title,text:this.value,html:this.html,desc:this.desc,links:{styles:this.tableware.styles.filter((function(t){return t.trim()})),scripts:this.tableware.scripts.filter((function(t){return t.trim()}))}}).then((function(i){var n=i.success,a=i.data;console.log("保存",a),n&&(t&&t(a),e.$router.push({path:"/markdown/edit/"+a.id}),e.$message({type:"success",message:"内容已经保存成功"}))})):this.$message({type:"error",message:"请输入标题内容"})}},{key:"exportHandler",value:function(t){var e=this;if("publish"===t)return this.saveHandler((function(t){Object(u["a"])("/edit/publish",{id:t.id}).then((function(t){var i=t.success,n=t.message;e.$message({type:i?"success":"error",message:i?"发布完成":n})}))}));var i=null;if(this.value&&this.html){i="md"==t?new Blob([this.value],{type:"text/plain"}):new Blob([this.html],{type:"html/plain"});var n=j.createObjectURL(i),a=document.createElement("a");a.style.display="none",a.href=n,a.download=[this.title,t].join("."),document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(n),e.$message({type:"success",message:"文档下载完成"})}),100)}else this.$message({type:"error",message:"暂无内容需要导出"})}}]),i}(d["l"]);Object(c["b"])([Object(d["m"])("$route")],O.prototype,"routeChangeHandler",null),O=Object(c["b"])([Object(d["a"])({components:{MoreList:k},name:"MarkDownEditor"})],O);var x=O,_=x,S=(i("59ba"),function(t){t.options.__source="src/tutorial/views/markdown/Editor.vue"}),$=S,C=Object(b["a"])(_,n,a,!1,null,"9dad9e6c",null);"function"===typeof $&&$(C);e["default"]=C.exports},"2d56":function(t,e,i){"use strict";i("d3b7"),i("ac1f"),i("5319");var n=i("cebe"),a=i.n(n),r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(i,n){a.a.post(location.origin.replace(location.port,"http:"==location.protocol?"2010":"2020")+t,e).then((function(t){var e=t.data;return i(e)})).catch(n)}))};e["a"]=r},"498a":function(t,e,i){"use strict";var n=i("23e7"),a=i("58a8").trim,r=i("c8d2");n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},5525:function(t,e,i){},"59ba":function(t,e,i){"use strict";var n=i("5525"),a=i.n(n);a.a},"5a34":function(t,e,i){var n=i("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},a15b:function(t,e,i){"use strict";var n=i("23e7"),a=i("44ad"),r=i("fc6a"),s=i("a640"),l=[].join,o=a!=Object,c=s("join",",");n({target:"Array",proto:!0,forced:o||!c},{join:function(t){return l.call(r(this),void 0===t?",":t)}})},a434:function(t,e,i){"use strict";var n=i("23e7"),a=i("23cb"),r=i("a691"),s=i("50c4"),l=i("7b0b"),o=i("65f0"),c=i("8418"),u=i("1dde"),d=i("ae40"),p=u("splice"),v=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,f=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!v},{splice:function(t,e){var i,n,u,d,p,v,w=l(this),y=s(w.length),g=a(t,y),k=arguments.length;if(0===k?i=n=0:1===k?(i=0,n=y-g):(i=k-2,n=f(h(r(e),0),y-g)),y+i-n>m)throw TypeError(b);for(u=o(w,n),d=0;d<n;d++)p=g+d,p in w&&c(u,d,w[p]);if(u.length=n,i<n){for(d=g;d<y-n;d++)p=d+n,v=d+i,p in w?w[v]=w[p]:delete w[v];for(d=y;d>y-n+i;d--)delete w[d-1]}else if(i>n)for(d=y-n;d>g;d--)p=d+n-1,v=d+i-1,p in w?w[v]=w[p]:delete w[v];for(d=0;d<i;d++)w[d+g]=arguments[d+2];return w.length=y-n+i,u}})},ab13:function(t,e,i){var n=i("b622"),a=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[a]=!1,"/./"[t](e)}catch(n){}}return!1}},c8d2:function(t,e,i){var n=i("d039"),a=i("5899"),r="​᠎";t.exports=function(t){return n((function(){return!!a[t]()||r[t]()!=r||a[t].name!==t}))}},caad:function(t,e,i){"use strict";var n=i("23e7"),a=i("4d64").includes,r=i("44d2"),s=i("ae40"),l=s("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!l},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")},d42c:function(t,e,i){},e6d8:function(t,e,i){"use strict";var n=i("d42c"),a=i.n(n);a.a}}]);